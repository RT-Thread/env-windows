<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invocation &mdash; QEMU  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/qemu_32x32.png"/>
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Device Emulation" href="device-emulation.html" />
    <link rel="prev" title="Quick Start" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #802400" >
            <a href="../index.html" class="icon icon-home"> QEMU
            <img src="../_static/qemu_128x128.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                7.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About QEMU</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">System Emulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Invocation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-0">Standard options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-1">Block device options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-2">USB convenience options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-3">Display options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-4">i386 target only</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-5">Network options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-6">Character device options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-7">TPM device options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-8">Boot Image or Kernel specific</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-9">Debug/Expert options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hxtool-10">Generic object creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-url-syntax">Device URL Syntax</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="device-emulation.html">Device Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="keys.html">Keys in the graphical frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="mux-chardev.html">Keys in the character backend multiplexer</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitor.html">QEMU Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html">Disk Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtio-net-failover.html">QEMU virtio-net standby (net_failover)</a></li>
<li class="toctree-l2"><a class="reference internal" href="linuxboot.html">Direct Linux Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic-loader.html">Generic Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="guest-loader.html">Guest Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="barrier.html">QEMU Barrier Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="vnc-security.html">VNC security</a></li>
<li class="toctree-l2"><a class="reference internal" href="tls.html">TLS setup for network services</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">Providing secret data to QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="authz.html">Client authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdb.html">GDB usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="replay.html">Record/replay</a></li>
<li class="toctree-l2"><a class="reference internal" href="managed-startup.html">Managed start up options</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootindex.html">Managing device boot order with bootindex properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu-hotplug.html">Virtual CPU hotplug</a></li>
<li class="toctree-l2"><a class="reference internal" href="pr-manager.html">Persistent reservation managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">QEMU System Emulator Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-process.html">Multi-process QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="confidential-guest-support.html">Confidential Guest Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Developer Information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #802400" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QEMU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">System Emulation</a></li>
      <li class="breadcrumb-item active">Invocation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://gitlab.com/qemu-project/qemu/blob/master/docs/system/invocation.rst" class="fa fa-gitlab"> Edit on GitLab</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="invocation">
<span id="sec-005finvocation"></span><h1>Invocation<a class="headerlink" href="#invocation" title="Permalink to this heading"></a></h1>
<pre class="literal-block">qemu-system-x86_64 [options] [disk_image]</pre>
<p>disk_image is a raw hard disk image for IDE hard disk 0. Some targets do
not need a disk image.</p>
<section id="hxtool-0">
<h2>Standard options<a class="headerlink" href="#hxtool-0" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-h</span></code></dt><dd><p>Display help and exit</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-version</span></code></dt><dd><p>Display version information and exit</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-machine</span> <span class="pre">[type=]name[,prop=value[,...]]</span></code></dt><dd><p>Select the emulated machine by name. Use <code class="docutils literal notranslate"><span class="pre">-machine</span> <span class="pre">help</span></code> to list
available machines.</p>
<p>For architectures which aim to support live migration compatibility
across releases, each release will introduce a new versioned machine
type. For example, the 2.8.0 release introduced machine types
“pc-i440fx-2.8” and “pc-q35-2.8” for the x86_64/i686 architectures.</p>
<p>To allow live migration of guests from QEMU version 2.8.0, to QEMU
version 2.9.0, the 2.9.0 version must support the “pc-i440fx-2.8”
and “pc-q35-2.8” machines too. To allow users live migrating VMs to
skip multiple intermediate releases when upgrading, new releases of
QEMU will support machine types from many previous versions.</p>
<p>Supported machine properties are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">accel=accels1[:accels2[:...]]</span></code></dt><dd><p>This is used to enable an accelerator. Depending on the target
architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available.
By default, tcg is used. If there is more than one accelerator
specified, the next one is used if the previous one fails to
initialize.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmport=on|off|auto</span></code></dt><dd><p>Enables emulation of VMWare IO port, for vmmouse etc. auto says
to select the value based on accel. For accel=xen the default is
off otherwise the default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dump-guest-core=on|off</span></code></dt><dd><p>Include guest memory in a core dump. The default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mem-merge=on|off</span></code></dt><dd><p>Enables or disables memory merge support. This feature, when
supported by the host, de-duplicates identical memory pages
among VMs instances (enabled by default).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aes-key-wrap=on|off</span></code></dt><dd><p>Enables or disables AES key wrapping support on s390-ccw hosts.
This feature controls whether AES wrapping keys will be created
to allow execution of AES cryptographic functions. The default
is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dea-key-wrap=on|off</span></code></dt><dd><p>Enables or disables DEA key wrapping support on s390-ccw hosts.
This feature controls whether DEA wrapping keys will be created
to allow execution of DEA cryptographic functions. The default
is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nvdimm=on|off</span></code></dt><dd><p>Enables or disables NVDIMM support. The default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memory-encryption=</span></code></dt><dd><p>Memory encryption object to use. The default is none.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hmat=on|off</span></code></dt><dd><p>Enables or disables ACPI Heterogeneous Memory Attribute Table
(HMAT) support. The default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">memory-backend='id'</span></code></dt><dd><p>An alternative to legacy <code class="docutils literal notranslate"><span class="pre">-mem-path</span></code> and <code class="docutils literal notranslate"><span class="pre">mem-prealloc</span></code> options.
Allows to use a memory backend as main RAM.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">file</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">pc</span><span class="o">.</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span><span class="p">,</span><span class="n">mem</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">hugetlbfs</span><span class="p">,</span><span class="n">prealloc</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">share</span><span class="o">=</span><span class="n">on</span>
<span class="o">-</span><span class="n">machine</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">=</span><span class="n">pc</span><span class="o">.</span><span class="n">ram</span>
<span class="o">-</span><span class="n">m</span> <span class="mi">512</span><span class="n">M</span>
</pre></div>
</div>
<p>Migration compatibility note:</p>
<ul class="simple">
<li><p>as backend id one shall use value of ‘default-ram-id’, advertised by
machine type (available via <code class="docutils literal notranslate"><span class="pre">query-machines</span></code> QMP command), if migration
to/from old QEMU (&lt;5.0) is expected.</p></li>
<li><p>for machine types 4.0 and older, user shall
use <code class="docutils literal notranslate"><span class="pre">x-use-canonical-path-for-ramblock-id=off</span></code> backend option
if migration to/from old QEMU (&lt;5.0) is expected.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">ram</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">pc</span><span class="o">.</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span><span class="p">,</span><span class="n">x</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">canonical</span><span class="o">-</span><span class="n">path</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">ramblock</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">machine</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">=</span><span class="n">pc</span><span class="o">.</span><span class="n">ram</span>
<span class="o">-</span><span class="n">m</span> <span class="mi">512</span><span class="n">M</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cxl-fmw.0.targets.0=firsttarget,cxl-fmw.0.targets.1=secondtarget,cxl-fmw.0.size=size[,cxl-fmw.0.interleave-granularity=granularity]</span></code></dt><dd><p>Define a CXL Fixed Memory Window (CFMW).</p>
<p>Described in the CXL 2.0 ECN: CEDT CFMWS &amp; QTG _DSM.</p>
<p>They are regions of Host Physical Addresses (HPA) on a system which
may be interleaved across one or more CXL host bridges.  The system
software will assign particular devices into these windows and
configure the downstream Host-managed Device Memory (HDM) decoders
in root ports, switch ports and devices appropriately to meet the
interleave requirements before enabling the memory devices.</p>
<p><code class="docutils literal notranslate"><span class="pre">targets.X=target</span></code> provides the mapping to CXL host bridges
which may be identified by the id provided in the -device entry.
Multiple entries are needed to specify all the targets when
the fixed memory window represents interleaved memory. X is the
target index from 0.</p>
<p><code class="docutils literal notranslate"><span class="pre">size=size</span></code> sets the size of the CFMW. This must be a multiple of
256MiB. The region will be aligned to 256MiB but the location is
platform and configuration dependent.</p>
<p><code class="docutils literal notranslate"><span class="pre">interleave-granularity=granularity</span></code> sets the granularity of
interleave. Default 256KiB. Only 256KiB, 512KiB, 1024KiB, 2048KiB
4096KiB, 8192KiB and 16384KiB granularities supported.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">machine</span> <span class="n">cxl</span><span class="o">-</span><span class="n">fmw</span><span class="mf">.0</span><span class="o">.</span><span class="n">targets</span><span class="mf">.0</span><span class="o">=</span><span class="n">cxl</span><span class="mf">.0</span><span class="p">,</span><span class="n">cxl</span><span class="o">-</span><span class="n">fmw</span><span class="mf">.0</span><span class="o">.</span><span class="n">targets</span><span class="mf">.1</span><span class="o">=</span><span class="n">cxl</span><span class="mf">.1</span><span class="p">,</span><span class="n">cxl</span><span class="o">-</span><span class="n">fmw</span><span class="mf">.0</span><span class="o">.</span><span class="n">size</span><span class="o">=</span><span class="mi">128</span><span class="n">G</span><span class="p">,</span><span class="n">cxl</span><span class="o">-</span><span class="n">fmw</span><span class="mf">.0</span><span class="o">.</span><span class="n">interleave</span><span class="o">-</span><span class="n">granularity</span><span class="o">=</span><span class="mi">512</span><span class="n">k</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sgx-epc.0.memdev=&#64;var{memid},sgx-epc.0.node=&#64;var{numaid}</span></code></dt><dd><p>Define an SGX EPC section.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-cpu</span> <span class="pre">model</span></code></dt><dd><p>Select CPU model (<code class="docutils literal notranslate"><span class="pre">-cpu</span> <span class="pre">help</span></code> for list and additional feature
selection)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-accel</span> <span class="pre">name[,prop=value[,...]]</span></code></dt><dd><p>This is used to enable an accelerator. Depending on the target
architecture, kvm, xen, hax, hvf, nvmm, whpx or tcg can be available. By
default, tcg is used. If there is more than one accelerator
specified, the next one is used if the previous one fails to
initialize.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">igd-passthru=on|off</span></code></dt><dd><p>When Xen is in use, this option controls whether Intel
integrated graphics devices can be passed through to the guest
(default=off)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kernel-irqchip=on|off|split</span></code></dt><dd><p>Controls KVM in-kernel irqchip support. The default is full
acceleration of the interrupt controllers. On x86, split irqchip
reduces the kernel attack surface, at a performance cost for
non-MSI interrupts. Disabling the in-kernel irqchip completely
is not recommended except for debugging purposes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kvm-shadow-mem=size</span></code></dt><dd><p>Defines the size of the KVM shadow MMU.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">split-wx=on|off</span></code></dt><dd><p>Controls the use of split w^x mapping for the TCG code generation
buffer. Some operating systems require this to be enabled, and in
such a case this will default on. On other operating systems, this
will default off, but one may enable this for testing or debugging.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tb-size=n</span></code></dt><dd><p>Controls the size (in MiB) of the TCG translation block cache.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">thread=single|multi</span></code></dt><dd><p>Controls number of TCG threads. When the TCG is multi-threaded
there will be one thread per vCPU therefore taking advantage of
additional host cores. The default is to enable multi-threading
where both the back-end and front-ends support it and no
incompatible TCG features have been enabled (e.g.
icount/replay).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dirty-ring-size=n</span></code></dt><dd><p>When the KVM accelerator is used, it controls the size of the per-vCPU
dirty page ring buffer (number of entries for each vCPU). It should
be a value that is power of two, and it should be 1024 or bigger (but
still less than the maximum value that the kernel supports).  4096
could be a good initial value if you have no idea which is the best.
Set this value to 0 to disable the feature.  By default, this feature
is disabled (dirty-ring-size=0).  When enabled, KVM will instead
record dirty pages in a bitmap.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">notify-vmexit=run|internal-error|disable,notify-window=n</span></code></dt><dd><p>Enables or disables notify VM exit support on x86 host and specify
the corresponding notify window to trigger the VM exit if enabled.
<code class="docutils literal notranslate"><span class="pre">run</span></code> option enables the feature. It does nothing and continue
if the exit happens. <code class="docutils literal notranslate"><span class="pre">internal-error</span></code> option enables the feature.
It raises a internal error. <code class="docutils literal notranslate"><span class="pre">disable</span></code> option doesn’t enable the feature.
This feature can mitigate the CPU stuck issue due to event windows don’t
open up for a specified of time (i.e. notify-window).
Default: notify-vmexit=run,notify-window=0.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smp</span> <span class="pre">[[cpus=]n][,maxcpus=maxcpus][,sockets=sockets][,dies=dies][,clusters=clusters][,cores=cores][,threads=threads]</span></code></dt><dd><p>Simulate a SMP system with ‘<code class="docutils literal notranslate"><span class="pre">n</span></code>‘ CPUs initially present on
the machine type board. On boards supporting CPU hotplug, the optional
‘<code class="docutils literal notranslate"><span class="pre">maxcpus</span></code>‘ parameter can be set to enable further CPUs to be
added at runtime. When both parameters are omitted, the maximum number
of CPUs will be calculated from the provided topology members and the
initial CPU count will match the maximum number. When only one of them
is given then the omitted one will be set to its counterpart’s value.
Both parameters may be specified, but the maximum number of CPUs must
be equal to or greater than the initial CPU count. Product of the
CPU topology hierarchy must be equal to the maximum number of CPUs.
Both parameters are subject to an upper limit that is determined by
the specific machine type chosen.</p>
<p>To control reporting of CPU topology information, values of the topology
parameters can be specified. Machines may only support a subset of the
parameters and different machines may have different subsets supported
which vary depending on capacity of the corresponding CPU targets. So
for a particular machine type board, an expected topology hierarchy can
be defined through the supported sub-option. Unsupported parameters can
also be provided in addition to the sub-option, but their values must be
set as 1 in the purpose of correct parsing.</p>
<p>Either the initial CPU count, or at least one of the topology parameters
must be specified. The specified parameters must be greater than zero,
explicit configuration like “cpus=0” is not allowed. Values for any
omitted parameters will be computed from those which are given.</p>
<p>For example, the following sub-option defines a CPU topology hierarchy
(2 sockets totally on the machine, 2 cores per socket, 2 threads per
core) for a machine that only supports sockets/cores/threads.
Some members of the option can be omitted but their values will be
automatically computed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">smp</span> <span class="mi">8</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">cores</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">threads</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">8</span>
</pre></div>
</div>
<p>The following sub-option defines a CPU topology hierarchy (2 sockets
totally on the machine, 2 dies per socket, 2 cores per die, 2 threads
per core) for PC machines which support sockets/dies/cores/threads.
Some members of the option can be omitted but their values will be
automatically computed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">smp</span> <span class="mi">16</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">dies</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">cores</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">threads</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">16</span>
</pre></div>
</div>
<p>The following sub-option defines a CPU topology hierarchy (2 sockets
totally on the machine, 2 clusters per socket, 2 cores per cluster,
2 threads per core) for ARM virt machines which support sockets/clusters
/cores/threads. Some members of the option can be omitted but their values
will be automatically computed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">smp</span> <span class="mi">16</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">cores</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">threads</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">16</span>
</pre></div>
</div>
<p>Historically preference was given to the coarsest topology parameters
when computing missing values (ie sockets preferred over cores, which
were preferred over threads), however, this behaviour is considered
liable to change. Prior to 6.2 the preference was sockets over cores
over threads. Since 6.2 the preference is cores over sockets over threads.</p>
<p>For example, the following option defines a machine board with 2 sockets
of 1 core before 6.2 and 1 socket of 2 cores after 6.2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">smp</span> <span class="mi">2</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">node[,mem=size][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">node[,memdev=id][,cpus=firstcpu[-lastcpu]][,nodeid=node][,initiator=initiator]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">dist,src=source,dst=destination,val=distance</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">cpu,node-id=node[,socket-id=x][,core-id=y][,thread-id=z]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">hmat-lb,initiator=node,target=node,hierarchy=hierarchy,data-type=type[,latency=lat][,bandwidth=bw]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-numa</span> <span class="pre">hmat-cache,node-id=node,size=size,level=level[,associativity=str][,policy=str][,line=size]</span></code></dt><dd><p>Define a NUMA node and assign RAM and VCPUs to it. Set the NUMA
distance from a source node to a destination node. Set the ACPI
Heterogeneous Memory Attributes for the given nodes.</p>
<p>Legacy VCPU assignment uses ‘<code class="docutils literal notranslate"><span class="pre">cpus</span></code>‘ option where firstcpu and
lastcpu are CPU indexes. Each ‘<code class="docutils literal notranslate"><span class="pre">cpus</span></code>‘ option represent a
contiguous range of CPU indexes (or a single VCPU if lastcpu is
omitted). A non-contiguous set of VCPUs can be represented by
providing multiple ‘<code class="docutils literal notranslate"><span class="pre">cpus</span></code>‘ options. If ‘<code class="docutils literal notranslate"><span class="pre">cpus</span></code>‘ is
omitted on all nodes, VCPUs are automatically split between them.</p>
<p>For example, the following option assigns VCPUs 0, 1, 2 and 5 to a
NUMA node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">cpus</span><span class="o">=</span><span class="mi">0</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="n">cpus</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
<p>‘<code class="docutils literal notranslate"><span class="pre">cpu</span></code>‘ option is a new alternative to ‘<code class="docutils literal notranslate"><span class="pre">cpus</span></code>‘ option
which uses ‘<code class="docutils literal notranslate"><span class="pre">socket-id|core-id|thread-id</span></code>‘ properties to
assign CPU objects to a node using topology layout properties of
CPU. The set of properties is machine specific, and depends on used
machine type/’<code class="docutils literal notranslate"><span class="pre">smp</span></code>‘ options. It could be queried with
‘<code class="docutils literal notranslate"><span class="pre">hotpluggable-cpus</span></code>‘ monitor command. ‘<code class="docutils literal notranslate"><span class="pre">node-id</span></code>‘
property specifies node to which CPU object will be assigned, it’s
required for node to be declared with ‘<code class="docutils literal notranslate"><span class="pre">node</span></code>‘ option before
it’s used with ‘<code class="docutils literal notranslate"><span class="pre">cpu</span></code>‘ option.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">M</span> <span class="n">pc</span> \
<span class="o">-</span><span class="n">smp</span> <span class="mi">1</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">2</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">0</span> <span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">1</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span> <span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Legacy ‘<code class="docutils literal notranslate"><span class="pre">mem</span></code>‘ assigns a given RAM amount to a node (not supported
for 5.1 and newer machine types). ‘<code class="docutils literal notranslate"><span class="pre">memdev</span></code>‘ assigns RAM from
a given memory backend device to a node. If ‘<code class="docutils literal notranslate"><span class="pre">mem</span></code>‘ and
‘<code class="docutils literal notranslate"><span class="pre">memdev</span></code>‘ are omitted in all nodes, RAM is split equally between them.</p>
<p>‘<code class="docutils literal notranslate"><span class="pre">mem</span></code>‘ and ‘<code class="docutils literal notranslate"><span class="pre">memdev</span></code>‘ are mutually exclusive.
Furthermore, if one node uses ‘<code class="docutils literal notranslate"><span class="pre">memdev</span></code>‘, all of them have to
use it.</p>
<p>‘<code class="docutils literal notranslate"><span class="pre">initiator</span></code>‘ is an additional option that points to an
initiator NUMA node that has best performance (the lowest latency or
largest bandwidth) to this NUMA node. Note that this option can be
set only when the machine property ‘hmat’ is set to ‘on’.</p>
<p>Following example creates a machine with 2 NUMA nodes, node 0 has
CPU. node 1 has only memory, and its initiator is node 0. Note that
because node 0 has CPU, by default the initiator of node 0 is itself
and must be itself.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">machine</span> <span class="n">hmat</span><span class="o">=</span><span class="n">on</span> \
<span class="o">-</span><span class="n">m</span> <span class="mi">2</span><span class="n">G</span><span class="p">,</span><span class="n">slots</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxmem</span><span class="o">=</span><span class="mi">4</span><span class="n">G</span> \
<span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="n">G</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m0</span> \
<span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="n">G</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m1</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">memdev</span><span class="o">=</span><span class="n">m0</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">memdev</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span> \
<span class="o">-</span><span class="n">smp</span> <span class="mi">2</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">2</span>  \
<span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>source and destination are NUMA node IDs. distance is the NUMA
distance from source to destination. The distance from a node to
itself is always 10. If any pair of nodes is given a distance, then
all pairs must be given distances. Although, when distances are only
given in one direction for each pair of nodes, then the distances in
the opposite directions are assumed to be the same. If, however, an
asymmetrical pair of distances is given for even one node pair, then
all node pairs must be provided distance values for both directions,
even when they are symmetrical. When a node is unreachable from
another node, set the pair’s distance to 255.</p>
<p>Note that the -<code class="docutils literal notranslate"><span class="pre">numa</span></code> option doesn’t allocate any of the specified
resources, it just assigns existing resources to NUMA nodes. This
means that one still has to use the <code class="docutils literal notranslate"><span class="pre">-m</span></code>, <code class="docutils literal notranslate"><span class="pre">-smp</span></code> options to
allocate RAM and VCPUs respectively.</p>
<p>Use ‘<code class="docutils literal notranslate"><span class="pre">hmat-lb</span></code>‘ to set System Locality Latency and Bandwidth
Information between initiator and target NUMA nodes in ACPI
Heterogeneous Attribute Memory Table (HMAT). Initiator NUMA node can
create memory requests, usually it has one or more processors.
Target NUMA node contains addressable memory.</p>
<p>In ‘<code class="docutils literal notranslate"><span class="pre">hmat-lb</span></code>‘ option, node are NUMA node IDs. hierarchy is
the memory hierarchy of the target NUMA node: if hierarchy is
‘memory’, the structure represents the memory performance; if
hierarchy is ‘first-level|second-level|third-level’, this
structure represents aggregated performance of memory side caches
for each domain. type of ‘data-type’ is type of data represented by
this structure instance: if ‘hierarchy’ is ‘memory’, ‘data-type’ is
‘access|read|write’ latency or ‘access|read|write’ bandwidth of
the target memory; if ‘hierarchy’ is
‘first-level|second-level|third-level’, ‘data-type’ is
‘access|read|write’ hit latency or ‘access|read|write’ hit
bandwidth of the target memory side cache.</p>
<p>lat is latency value in nanoseconds. bw is bandwidth value, the
possible value and units are NUM[M|G|T], mean that the bandwidth
value are NUM byte per second (or MB/s, GB/s or TB/s depending on
used suffix). Note that if latency or bandwidth value is 0, means
the corresponding latency or bandwidth information is not provided.</p>
<p>In ‘<code class="docutils literal notranslate"><span class="pre">hmat-cache</span></code>‘ option, node-id is the NUMA-id of the memory
belongs. size is the size of memory side cache in bytes. level is
the cache level described in this structure, note that the cache
level 0 should not be used with ‘<code class="docutils literal notranslate"><span class="pre">hmat-cache</span></code>‘ option.
associativity is the cache associativity, the possible value is
‘none/direct(direct-mapped)/complex(complex cache indexing)’. policy
is the write policy. line is the cache Line size in bytes.</p>
<p>For example, the following options describe 2 NUMA nodes. Node 0 has
2 cpus and a ram, node 1 has only a ram. The processors in node 0
access memory in node 0 with access-latency 5 nanoseconds,
access-bandwidth is 200 MB/s; The processors in NUMA node 0 access
memory in NUMA node 1 with access-latency 10 nanoseconds,
access-bandwidth is 100 MB/s. And for memory side cache information,
NUMA node 0 and 1 both have 1 level memory cache, size is 10KB,
policy is write-back, the cache Line size is 8 bytes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">machine</span> <span class="n">hmat</span><span class="o">=</span><span class="n">on</span> \
<span class="o">-</span><span class="n">m</span> <span class="mi">2</span><span class="n">G</span> \
<span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="n">G</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m0</span> \
<span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">ram</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="n">G</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m1</span> \
<span class="o">-</span><span class="n">smp</span> <span class="mi">2</span><span class="p">,</span><span class="n">sockets</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">maxcpus</span><span class="o">=</span><span class="mi">2</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">memdev</span><span class="o">=</span><span class="n">m0</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">nodeid</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">memdev</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">cpu</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">socket</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">lb</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">hierarchy</span><span class="o">=</span><span class="n">memory</span><span class="p">,</span><span class="n">data</span><span class="o">-</span><span class="nb">type</span><span class="o">=</span><span class="n">access</span><span class="o">-</span><span class="n">latency</span><span class="p">,</span><span class="n">latency</span><span class="o">=</span><span class="mi">5</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">lb</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">hierarchy</span><span class="o">=</span><span class="n">memory</span><span class="p">,</span><span class="n">data</span><span class="o">-</span><span class="nb">type</span><span class="o">=</span><span class="n">access</span><span class="o">-</span><span class="n">bandwidth</span><span class="p">,</span><span class="n">bandwidth</span><span class="o">=</span><span class="mi">200</span><span class="n">M</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">lb</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">hierarchy</span><span class="o">=</span><span class="n">memory</span><span class="p">,</span><span class="n">data</span><span class="o">-</span><span class="nb">type</span><span class="o">=</span><span class="n">access</span><span class="o">-</span><span class="n">latency</span><span class="p">,</span><span class="n">latency</span><span class="o">=</span><span class="mi">10</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">lb</span><span class="p">,</span><span class="n">initiator</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">hierarchy</span><span class="o">=</span><span class="n">memory</span><span class="p">,</span><span class="n">data</span><span class="o">-</span><span class="nb">type</span><span class="o">=</span><span class="n">access</span><span class="o">-</span><span class="n">bandwidth</span><span class="p">,</span><span class="n">bandwidth</span><span class="o">=</span><span class="mi">100</span><span class="n">M</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="n">K</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">associativity</span><span class="o">=</span><span class="n">direct</span><span class="p">,</span><span class="n">policy</span><span class="o">=</span><span class="n">write</span><span class="o">-</span><span class="n">back</span><span class="p">,</span><span class="n">line</span><span class="o">=</span><span class="mi">8</span> \
<span class="o">-</span><span class="n">numa</span> <span class="n">hmat</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="n">K</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">associativity</span><span class="o">=</span><span class="n">direct</span><span class="p">,</span><span class="n">policy</span><span class="o">=</span><span class="n">write</span><span class="o">-</span><span class="n">back</span><span class="p">,</span><span class="n">line</span><span class="o">=</span><span class="mi">8</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-add-fd</span> <span class="pre">fd=fd,set=set[,opaque=opaque]</span></code></dt><dd><p>Add a file descriptor to an fd set. Valid options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fd=fd</span></code></dt><dd><p>This option defines the file descriptor of which a duplicate is
added to fd set. The file descriptor cannot be stdin, stdout, or
stderr.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set=set</span></code></dt><dd><p>This option defines the ID of the fd set to add the file
descriptor to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">opaque=opaque</span></code></dt><dd><p>This option defines a free-form string that can be used to
describe fd.</p>
</dd>
</dl>
<p>You can open an image using pre-opened file descriptors from an fd
set:</p>
<pre class="literal-block">qemu-system-x86_64 \
 -add-fd fd=3,set=2,opaque=&quot;rdwr:/path/to/file&quot; \
 -add-fd fd=4,set=2,opaque=&quot;rdonly:/path/to/file&quot; \
 -drive file=/dev/fdset/2,index=0,media=disk</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-set</span> <span class="pre">group.id.arg=value</span></code></dt><dd><p>Set parameter arg for item id of type group</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-global</span> <span class="pre">driver.prop=value</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-global</span> <span class="pre">driver=driver,property=property,value=value</span></code></dt><dd><p>Set default value of driver’s property prop to value, e.g.:</p>
<pre class="literal-block">qemu-system-x86_64 -global ide-hd.physical_block_size=4096 disk-image.img</pre>
<p>In particular, you can use this to set driver properties for devices
which are created automatically by the machine model. To create a
device which is not created automatically and set properties on it,
use -<code class="docutils literal notranslate"><span class="pre">device</span></code>.</p>
<p>-global driver.prop=value is shorthand for -global
driver=driver,property=prop,value=value. The longhand syntax works
even when driver contains a dot.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-boot</span> <span class="pre">[order=drives][,once=drives][,menu=on|off][,splash=sp_name][,splash-time=sp_time][,reboot-timeout=rb_timeout][,strict=on|off]</span></code></dt><dd><p>Specify boot order drives as a string of drive letters. Valid drive
letters depend on the target architecture. The x86 PC uses: a, b
(floppy 1 and 2), c (first hard disk), d (first CD-ROM), n-p
(Etherboot from network adapter 1-4), hard disk boot is the default.
To apply a particular boot order only on the first startup, specify
it via <code class="docutils literal notranslate"><span class="pre">once</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">order</span></code> or <code class="docutils literal notranslate"><span class="pre">once</span></code> parameter
should not be used together with the <code class="docutils literal notranslate"><span class="pre">bootindex</span></code> property of
devices, since the firmware implementations normally do not support
both at the same time.</p>
<p>Interactive boot menus/prompts can be enabled via <code class="docutils literal notranslate"><span class="pre">menu=on</span></code> as far
as firmware/BIOS supports them. The default is non-interactive boot.</p>
<p>A splash picture could be passed to bios, enabling user to show it
as logo, when option splash=sp_name is given and menu=on, If
firmware/BIOS supports them. Currently Seabios for X86 system
support it. limitation: The splash file could be a jpeg file or a
BMP file in 24 BPP format(true color). The resolution should be
supported by the SVGA mode, so the recommended is 320x240, 640x480,
800x640.</p>
<p>A timeout could be passed to bios, guest will pause for rb_timeout
ms when boot failed, then reboot. If rb_timeout is ‘-1’, guest will
not reboot, qemu passes ‘-1’ to bios by default. Currently Seabios
for X86 system support it.</p>
<p>Do strict boot via <code class="docutils literal notranslate"><span class="pre">strict=on</span></code> as far as firmware/BIOS supports
it. This only effects when boot priority is changed by bootindex
options. The default is non-strict boot.</p>
<pre class="literal-block"># try to boot from network first, then from hard disk
qemu-system-x86_64 -boot order=nc
# boot from CD-ROM first, switch back to default order after reboot
qemu-system-x86_64 -boot once=d
# boot with a splash picture for 5 seconds.
qemu-system-x86_64 -boot menu=on,splash=/root/boot.bmp,splash-time=5000</pre>
<p>Note: The legacy format ‘-boot drives’ is still supported but its
use is discouraged as it may be removed from future versions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">[size=]megs[,slots=n,maxmem=size]</span></code></dt><dd><p>Sets guest startup RAM size to megs megabytes. Default is 128 MiB.
Optionally, a suffix of “M” or “G” can be used to signify a value in
megabytes or gigabytes respectively. Optional pair slots, maxmem
could be used to set amount of hotpluggable memory slots and maximum
amount of memory. Note that maxmem must be aligned to the page size.</p>
<p>For example, the following command-line sets the guest startup RAM
size to 1GB, creates 3 slots to hotplug additional memory and sets
the maximum memory the guest can reach to 4GB:</p>
<pre class="literal-block">qemu-system-x86_64 -m 1G,slots=3,maxmem=4G</pre>
<p>If slots and maxmem are not specified, memory hotplug won’t be
enabled and the guest startup RAM will never increase.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-mem-path</span> <span class="pre">path</span></code></dt><dd><p>Allocate guest RAM from a temporarily created file in path.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-mem-prealloc</span></code></dt><dd><p>Preallocate memory when using -mem-path.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">language</span></code></dt><dd><p>Use keyboard layout language (for example <code class="docutils literal notranslate"><span class="pre">fr</span></code> for French). This
option is only needed where it is not easy to get raw PC keycodes
(e.g. on Macs, with some X11 servers or with a VNC or curses
display). You don’t normally need to use it on PC/Linux or
PC/Windows hosts.</p>
<p>The available layouts are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ar</span>  <span class="n">de</span><span class="o">-</span><span class="n">ch</span>  <span class="n">es</span>  <span class="n">fo</span>     <span class="n">fr</span><span class="o">-</span><span class="n">ca</span>  <span class="n">hu</span>  <span class="n">ja</span>  <span class="n">mk</span>     <span class="n">no</span>  <span class="n">pt</span><span class="o">-</span><span class="n">br</span>  <span class="n">sv</span>
<span class="n">da</span>  <span class="n">en</span><span class="o">-</span><span class="n">gb</span>  <span class="n">et</span>  <span class="n">fr</span>     <span class="n">fr</span><span class="o">-</span><span class="n">ch</span>  <span class="ow">is</span>  <span class="n">lt</span>  <span class="n">nl</span>     <span class="n">pl</span>  <span class="n">ru</span>     <span class="n">th</span>
<span class="n">de</span>  <span class="n">en</span><span class="o">-</span><span class="n">us</span>  <span class="n">fi</span>  <span class="n">fr</span><span class="o">-</span><span class="n">be</span>  <span class="n">hr</span>     <span class="n">it</span>  <span class="n">lv</span>  <span class="n">nl</span><span class="o">-</span><span class="n">be</span>  <span class="n">pt</span>  <span class="n">sl</span>     <span class="n">tr</span>
</pre></div>
</div>
<p>The default is <code class="docutils literal notranslate"><span class="pre">en-us</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audio-help</span></code></dt><dd><p>Will show the -audiodev equivalent of the currently specified
(deprecated) environment variables.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audio</span> <span class="pre">[driver=]driver,model=value[,prop[=value][,...]]</span></code></dt><dd><p>This option is a shortcut for configuring both the guest audio
hardware and the host audio backend in one go.
The driver option is the same as with the corresponding <code class="docutils literal notranslate"><span class="pre">-audiodev</span></code> option below.
The guest hardware model can be set with <code class="docutils literal notranslate"><span class="pre">model=modelname</span></code>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">driver=help</span></code> to list the available drivers,
and <code class="docutils literal notranslate"><span class="pre">model=help</span></code> to list the available device types.</p>
<p>The following two example do exactly the same, to show how <code class="docutils literal notranslate"><span class="pre">-audio</span></code>
can be used to shorten the command line length:</p>
<pre class="literal-block">qemu-system-x86_64 -audiodev pa,id=pa -device sb16,audiodev=pa
qemu-system-x86_64 -audio pa,model=sb16</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">[driver=]driver,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Adds a new audio backend driver identified by id. There are global
and driver specific properties. Some values can be set differently
for input and output, they’re marked with <code class="docutils literal notranslate"><span class="pre">in|out.</span></code>. You can set
the input’s property with <code class="docutils literal notranslate"><span class="pre">in.prop</span></code> and the output’s property with
<code class="docutils literal notranslate"><span class="pre">out.prop</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">audiodev</span> <span class="n">alsa</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="ow">in</span><span class="o">.</span><span class="n">frequency</span><span class="o">=</span><span class="mi">44110</span><span class="p">,</span><span class="n">out</span><span class="o">.</span><span class="n">frequency</span><span class="o">=</span><span class="mi">8000</span>
<span class="o">-</span><span class="n">audiodev</span> <span class="n">alsa</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">example</span><span class="p">,</span><span class="n">out</span><span class="o">.</span><span class="n">channels</span><span class="o">=</span><span class="mi">1</span> <span class="c1"># leaves in.channels unspecified</span>
</pre></div>
</div>
<p>NOTE: parameter validation is known to be incomplete, in many cases
specifying an invalid option causes QEMU to print an error message
and continue emulation without sound.</p>
<p>Valid global options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id=identifier</span></code></dt><dd><p>Identifies the audio backend.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timer-period=period</span></code></dt><dd><p>Sets the timer period used by the audio subsystem in
microseconds. Default is 10000 (10 ms).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.mixing-engine=on|off</span></code></dt><dd><p>Use QEMU’s mixing engine to mix all streams inside QEMU and
convert audio formats when not supported by the backend. When
off, fixed-settings must be off too. Note that disabling this
option means that the selected backend must support multiple
streams and the audio formats used by the virtual cards,
otherwise you’ll get no sound. It’s not recommended to disable
this option unless you want to use 5.1 or 7.1 audio, as mixing
engine only supports mono and stereo audio. Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.fixed-settings=on|off</span></code></dt><dd><p>Use fixed settings for host audio. When off, it will change
based on how the guest opens the sound card. In this case you
must not specify frequency, channels or format. Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.frequency=frequency</span></code></dt><dd><p>Specify the frequency to use when using fixed-settings. Default
is 44100Hz.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.channels=channels</span></code></dt><dd><p>Specify the number of channels to use when using fixed-settings.
Default is 2 (stereo).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.format=format</span></code></dt><dd><p>Specify the sample format to use when using fixed-settings.
Valid values are: <code class="docutils literal notranslate"><span class="pre">s8</span></code>, <code class="docutils literal notranslate"><span class="pre">s16</span></code>, <code class="docutils literal notranslate"><span class="pre">s32</span></code>, <code class="docutils literal notranslate"><span class="pre">u8</span></code>, <code class="docutils literal notranslate"><span class="pre">u16</span></code>,
<code class="docutils literal notranslate"><span class="pre">u32</span></code>, <code class="docutils literal notranslate"><span class="pre">f32</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">s16</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.voices=voices</span></code></dt><dd><p>Specify the number of voices to use. Default is 1.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.buffer-length=usecs</span></code></dt><dd><p>Sets the size of the buffer in microseconds.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">none,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a dummy backend that discards all outputs. This backend has
no backend specific properties.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">alsa,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates backend using the ALSA. This backend is only available on
Linux.</p>
<p>ALSA specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">in|out.dev=device</span></code></dt><dd><p>Specify the ALSA device to use for input and/or output. Default
is <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.period-length=usecs</span></code></dt><dd><p>Sets the period length in microseconds.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.try-poll=on|off</span></code></dt><dd><p>Attempt to use poll mode with the device. Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">threshold=threshold</span></code></dt><dd><p>Threshold (in microseconds) when playback starts. Default is 0.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">coreaudio,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using Apple’s Core Audio. This backend is only
available on Mac OS and only supports playback.</p>
<p>Core Audio specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">in|out.buffer-count=count</span></code></dt><dd><p>Sets the count of the buffers.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">dsound,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using Microsoft’s DirectSound. This backend is
only available on Windows and only supports playback.</p>
<p>DirectSound specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">latency=usecs</span></code></dt><dd><p>Add extra usecs microseconds latency to playback. Default is
10000 (10 ms).</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">oss,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using OSS. This backend is available on most
Unix-like systems.</p>
<p>OSS specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">in|out.dev=device</span></code></dt><dd><p>Specify the file name of the OSS device to use. Default is
<code class="docutils literal notranslate"><span class="pre">/dev/dsp</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.buffer-count=count</span></code></dt><dd><p>Sets the count of the buffers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.try-poll=on|of</span></code></dt><dd><p>Attempt to use poll mode with the device. Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">try-mmap=on|off</span></code></dt><dd><p>Try using memory mapped device access. Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">exclusive=on|off</span></code></dt><dd><p>Open the device in exclusive mode (vmix won’t work in this
case). Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dsp-policy=policy</span></code></dt><dd><p>Sets the timing policy (between 0 and 10, where smaller number
means smaller latency but higher CPU usage). Use -1 to use
buffer sizes specified by <code class="docutils literal notranslate"><span class="pre">buffer</span></code> and <code class="docutils literal notranslate"><span class="pre">buffer-count</span></code>. This
option is ignored if you do not have OSS 4. Default is 5.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">pa,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using PulseAudio. This backend is available on
most systems.</p>
<p>PulseAudio specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">server=server</span></code></dt><dd><p>Sets the PulseAudio server to connect to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.name=sink</span></code></dt><dd><p>Use the specified source/sink for recording/playback.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.latency=usecs</span></code></dt><dd><p>Desired latency in microseconds. The PulseAudio server will try
to honor this value but actual latencies may be lower or higher.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">sdl,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using SDL. This backend is available on most
systems, but you should use your platform’s native backend if
possible.</p>
<p>SDL specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">in|out.buffer-count=count</span></code></dt><dd><p>Sets the count of the buffers.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">sndio,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend using SNDIO. This backend is available on
OpenBSD and most other Unix-like systems.</p>
<p>Sndio specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">in|out.dev=device</span></code></dt><dd><p>Specify the sndio device to use for input and/or output. Default
is <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">in|out.latency=usecs</span></code></dt><dd><p>Sets the desired period length in microseconds.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">spice,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend that sends audio through SPICE. This backend
requires <code class="docutils literal notranslate"><span class="pre">-spice</span></code> and automatically selected in that case, so
usually you can ignore this option. This backend has no backend
specific properties.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-audiodev</span> <span class="pre">wav,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Creates a backend that writes audio to a WAV file.</p>
<p>Backend specific options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">path=path</span></code></dt><dd><p>Write recorded audio into the specified file. Default is
<code class="docutils literal notranslate"><span class="pre">qemu.wav</span></code>.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">driver[,prop[=value][,...]]</span></code></dt><dd><p>Add device driver. prop=value sets driver properties. Valid
properties depend on the driver. To get help on possible drivers and
properties, use <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">help</span></code> and <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">driver,help</span></code>.</p>
<p>Some drivers are:</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">ipmi-bmc-sim,id=id[,prop[=value][,...]]</span></code></dt><dd><p>Add an IPMI BMC. This is a simulation of a hardware management
interface processor that normally sits on a system. It provides a
watchdog and the ability to reset and power control the system. You
need to connect this to an IPMI interface to make it useful</p>
<p>The IPMI slave address to use for the BMC. The default is 0x20. This
address is the BMC’s address on the I2C network of management
controllers. If you don’t know what this means, it is safe to ignore
it.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id=id</span></code></dt><dd><p>The BMC id for interfaces to use this device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">slave_addr=val</span></code></dt><dd><p>Define slave address to use for the BMC. The default is 0x20.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sdrfile=file</span></code></dt><dd><p>file containing raw Sensor Data Records (SDR) data. The default
is none.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fruareasize=val</span></code></dt><dd><p>size of a Field Replaceable Unit (FRU) area. The default is
1024.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">frudatafile=file</span></code></dt><dd><p>file containing raw Field Replaceable Unit (FRU) inventory data.
The default is none.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guid=uuid</span></code></dt><dd><p>value for the GUID for the BMC, in standard UUID format. If this
is set, get “Get GUID” command to the BMC will return it.
Otherwise “Get GUID” will return an error.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">ipmi-bmc-extern,id=id,chardev=id[,slave_addr=val]</span></code></dt><dd><p>Add a connection to an external IPMI BMC simulator. Instead of
locally emulating the BMC like the above item, instead connect to an
external entity that provides the IPMI services.</p>
<p>A connection is made to an external BMC simulator. If you do this,
it is strongly recommended that you use the “reconnect=” chardev
option to reconnect to the simulator if the connection is lost. Note
that if this is not used carefully, it can be a security issue, as
the interface has the ability to send resets, NMIs, and power off
the VM. It’s best if QEMU makes a connection to an external
simulator running on a secure port on localhost, so neither the
simulator nor QEMU is exposed to any outside network.</p>
<p>See the “lanserv/README.vm” file in the OpenIPMI library for more
details on the external interface.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">isa-ipmi-kcs,bmc=id[,ioport=val][,irq=val]</span></code></dt><dd><p>Add a KCS IPMI interface on the ISA bus. This also adds a
corresponding ACPI and SMBIOS entries, if appropriate.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bmc=id</span></code></dt><dd><p>The BMC to connect to, one of ipmi-bmc-sim or ipmi-bmc-extern
above.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ioport=val</span></code></dt><dd><p>Define the I/O address of the interface. The default is 0xca0
for KCS.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">irq=val</span></code></dt><dd><p>Define the interrupt to use. The default is 5. To disable
interrupts, set this to 0.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">isa-ipmi-bt,bmc=id[,ioport=val][,irq=val]</span></code></dt><dd><p>Like the KCS interface, but defines a BT interface. The default port
is 0xe4 and the default interrupt is 5.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">pci-ipmi-kcs,bmc=id</span></code></dt><dd><p>Add a KCS IPMI interface on the PCI bus.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bmc=id</span></code></dt><dd><p>The BMC to connect to, one of ipmi-bmc-sim or ipmi-bmc-extern above.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">pci-ipmi-bt,bmc=id</span></code></dt><dd><p>Like the KCS interface, but defines a BT interface on the PCI bus.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">intel-iommu[,option=...]</span></code></dt><dd><p>This is only supported by <code class="docutils literal notranslate"><span class="pre">-machine</span> <span class="pre">q35</span></code>, which will enable Intel VT-d
emulation within the guest.  It supports below options:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">intremap=on|off</span></code> (default: auto)</dt><dd><p>This enables interrupt remapping feature.  It’s required to enable
complete x2apic.  Currently it only supports kvm kernel-irqchip modes
<code class="docutils literal notranslate"><span class="pre">off</span></code> or <code class="docutils literal notranslate"><span class="pre">split</span></code>, while full kernel-irqchip is not yet supported.
The default value is “auto”, which will be decided by the mode of
kernel-irqchip.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">caching-mode=on|off</span></code> (default: off)</dt><dd><p>This enables caching mode for the VT-d emulated device.  When
caching-mode is enabled, each guest DMA buffer mapping will generate an
IOTLB invalidation from the guest IOMMU driver to the vIOMMU device in
a synchronous way.  It is required for <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">vfio-pci</span></code> to work
with the VT-d device, because host assigned devices requires to setup
the DMA mapping on the host before guest DMA starts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device-iotlb=on|off</span></code> (default: off)</dt><dd><p>This enables device-iotlb capability for the emulated VT-d device.  So
far virtio/vhost should be the only real user for this parameter,
paired with ats=on configured for the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aw-bits=39|48</span></code> (default: 39)</dt><dd><p>This decides the address width of IOVA address space.  The address
space has 39 bits width for 3-level IOMMU page tables, and 48 bits for
4-level IOMMU page tables.</p>
</dd>
</dl>
<p>Please also refer to the wiki page for general scenarios of VT-d
emulation in QEMU: <a class="reference external" href="https://wiki.qemu.org/Features/VT-d">https://wiki.qemu.org/Features/VT-d</a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-name</span> <span class="pre">name</span></code></dt><dd><p>Sets the name of the guest. This name will be displayed in the SDL
window caption. The name will also be used for the VNC server. Also
optionally set the top visible process name in Linux. Naming of
individual threads can also be enabled on Linux to aid debugging.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-uuid</span> <span class="pre">uuid</span></code></dt><dd><p>Set system UUID.</p>
</dd>
</dl>
</section>
<section id="hxtool-1">
<h2>Block device options<a class="headerlink" href="#hxtool-1" title="Permalink to this heading"></a></h2>
<p>The QEMU block device handling options have a long history and
have gone through several iterations as the feature set and complexity
of the block layer have grown. Many online guides to QEMU often
reference older and deprecated options, which can lead to confusion.</p>
<p>The recommended modern way to describe disks is to use a combination of
<code class="docutils literal notranslate"><span class="pre">-device</span></code> to specify the hardware device and <code class="docutils literal notranslate"><span class="pre">-blockdev</span></code> to
describe the backend. The device defines what the guest sees and the
backend describes how QEMU handles the data.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-fda</span> <span class="pre">file</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fdb</span> <span class="pre">file</span></code></dt><dd><p>Use file as floppy disk 0/1 image (see the <a class="reference internal" href="images.html#disk-images"><span class="std std-ref">Disk Images</span></a> chapter in
the System Emulation Users Guide).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-hda</span> <span class="pre">file</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-hdb</span> <span class="pre">file</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-hdc</span> <span class="pre">file</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-hdd</span> <span class="pre">file</span></code></dt><dd><p>Use file as hard disk 0, 1, 2 or 3 image (see the <a class="reference internal" href="images.html#disk-images"><span class="std std-ref">Disk Images</span></a>
chapter in the System Emulation Users Guide).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-cdrom</span> <span class="pre">file</span></code></dt><dd><p>Use file as CD-ROM image (you cannot use <code class="docutils literal notranslate"><span class="pre">-hdc</span></code> and <code class="docutils literal notranslate"><span class="pre">-cdrom</span></code> at
the same time). You can use the host CD-ROM by using <code class="docutils literal notranslate"><span class="pre">/dev/cdrom</span></code>
as filename.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-blockdev</span> <span class="pre">option[,option[,option[,...]]]</span></code></dt><dd><p>Define a new block driver node. Some of the options apply to all
block drivers, other options are only accepted for a specific block
driver. See below for a list of generic options and options for the
most common block drivers.</p>
<p>Options that expect a reference to another node (e.g. <code class="docutils literal notranslate"><span class="pre">file</span></code>) can
be given in two ways. Either you specify the node name of an already
existing node (file=node-name), or you define a new node inline,
adding options for the referenced node after a dot
(file.filename=path,file.aio=native).</p>
<p>A block driver node created with <code class="docutils literal notranslate"><span class="pre">-blockdev</span></code> can be used for a
guest device by specifying its node name for the <code class="docutils literal notranslate"><span class="pre">drive</span></code> property
in a <code class="docutils literal notranslate"><span class="pre">-device</span></code> argument that defines a block device.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">Valid</span> <span class="pre">options</span> <span class="pre">for</span> <span class="pre">any</span> <span class="pre">block</span> <span class="pre">driver</span> <span class="pre">node:</span></code></dt><dd><dl>
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code></dt><dd><p>Specifies the block driver to use for the given node.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node-name</span></code></dt><dd><p>This defines the name of the block driver node by which it
will be referenced later. The name must be unique, i.e. it
must not match the name of a different block driver node, or
(if you use <code class="docutils literal notranslate"><span class="pre">-drive</span></code> as well) the ID of a drive.</p>
<p>If no node name is specified, it is automatically generated.
The generated node name is not intended to be predictable
and changes between QEMU invocations. For the top level, an
explicit node name must be specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read-only</span></code></dt><dd><p>Open the node read-only. Guest write attempts will fail.</p>
<p>Note that some block drivers support only read-only access,
either generally or in certain configurations. In this case,
the default value <code class="docutils literal notranslate"><span class="pre">read-only=off</span></code> does not work and the
option must be specified explicitly.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auto-read-only</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">auto-read-only=on</span></code> is set, QEMU may fall back to
read-only usage even when <code class="docutils literal notranslate"><span class="pre">read-only=off</span></code> is requested, or
even switch between modes as needed, e.g. depending on
whether the image file is writable or whether a writing user
is attached to the node.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">force-share</span></code></dt><dd><p>Override the image locking system of QEMU by forcing the
node to utilize weaker shared access for permissions where
it would normally request exclusive access. When there is
the potential for multiple instances to have the same file
open (whether this invocation of QEMU is the first or the
second instance), both instances must permit shared access
for the second instance to succeed at opening the file.</p>
<p>Enabling <code class="docutils literal notranslate"><span class="pre">force-share=on</span></code> requires <code class="docutils literal notranslate"><span class="pre">read-only=on</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache.direct</span></code></dt><dd><p>The host page cache can be avoided with <code class="docutils literal notranslate"><span class="pre">cache.direct=on</span></code>.
This will attempt to do disk IO directly to the guest’s
memory. QEMU may still perform an internal copy of the data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache.no-flush</span></code></dt><dd><p>In case you don’t care about data integrity over host
failures, you can use <code class="docutils literal notranslate"><span class="pre">cache.no-flush=on</span></code>. This option
tells QEMU that it never needs to write any data to the disk
but can instead keep things in cache. If anything goes
wrong, like your host losing power, the disk storage getting
disconnected accidentally, etc. your image will most
probably be rendered unusable.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discard=discard</span></code></dt><dd><p>discard is one of “ignore” (or “off”) or “unmap” (or “on”)
and controls whether <code class="docutils literal notranslate"><span class="pre">discard</span></code> (also known as <code class="docutils literal notranslate"><span class="pre">trim</span></code> or
<code class="docutils literal notranslate"><span class="pre">unmap</span></code>) requests are ignored or passed to the filesystem.
Some machine types may not support discard requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detect-zeroes=detect-zeroes</span></code></dt><dd><p>detect-zeroes is “off”, “on” or “unmap” and enables the
automatic conversion of plain zero writes by the OS to
driver specific optimized zero write commands. You may even
choose “unmap” if discard is set to “unmap” to allow a zero
write to be converted to an <code class="docutils literal notranslate"><span class="pre">unmap</span></code> operation.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Driver-specific</span> <span class="pre">options</span> <span class="pre">for</span> <span class="pre">file</span></code></dt><dd><p>This is the protocol-level block driver for accessing regular
files.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code></dt><dd><p>The path to the image file in the local filesystem</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aio</span></code></dt><dd><p>Specifies the AIO backend (threads/native/io_uring,
default: threads)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">locking</span></code></dt><dd><p>Specifies whether the image file is protected with Linux OFD
/ POSIX locks. The default is to use the Linux Open File
Descriptor API if available, otherwise no lock is applied.
(auto/on/off, default: auto)</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">file</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">disk</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">disk</span><span class="o">.</span><span class="n">img</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Driver-specific</span> <span class="pre">options</span> <span class="pre">for</span> <span class="pre">raw</span></code></dt><dd><p>This is the image format block driver for raw images. It is
usually stacked on top of a protocol level block driver such as
<code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt><dd><p>Reference to or definition of the data source block driver
node (e.g. a <code class="docutils literal notranslate"><span class="pre">file</span></code> driver node)</p>
</dd>
</dl>
<p>Example 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">file</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">disk_file</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">disk</span><span class="o">.</span><span class="n">img</span>
<span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">disk</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="n">disk_file</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">disk</span><span class="p">,</span><span class="n">file</span><span class="o">.</span><span class="n">driver</span><span class="o">=</span><span class="n">file</span><span class="p">,</span><span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="o">=</span><span class="n">disk</span><span class="o">.</span><span class="n">img</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Driver-specific</span> <span class="pre">options</span> <span class="pre">for</span> <span class="pre">qcow2</span></code></dt><dd><p>This is the image format block driver for qcow2 images. It is
usually stacked on top of a protocol level block driver such as
<code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt><dd><p>Reference to or definition of the data source block driver
node (e.g. a <code class="docutils literal notranslate"><span class="pre">file</span></code> driver node)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backing</span></code></dt><dd><p>Reference to or definition of the backing file block device
(default is taken from the image file). It is allowed to
pass <code class="docutils literal notranslate"><span class="pre">null</span></code> here in order to disable the default backing
file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lazy-refcounts</span></code></dt><dd><p>Whether to enable the lazy refcounts feature (on/off;
default is taken from the image file)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-size</span></code></dt><dd><p>The maximum total size of the L2 table and refcount block
caches in bytes (default: the sum of l2-cache-size and
refcount-cache-size)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">l2-cache-size</span></code></dt><dd><p>The maximum size of the L2 table cache in bytes (default: if
cache-size is not specified - 32M on Linux platforms, and 8M
on non-Linux platforms; otherwise, as large as possible
within the cache-size, while permitting the requested or the
minimal refcount cache size)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">refcount-cache-size</span></code></dt><dd><p>The maximum size of the refcount block cache in bytes
(default: 4 times the cluster size; or if cache-size is
specified, the part of it which is not used for the L2
cache)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-clean-interval</span></code></dt><dd><p>Clean unused entries in the L2 and refcount caches. The
interval is in seconds. The default value is 600 on
supporting platforms, and 0 on other platforms. Setting it
to 0 disables this feature.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-request</span></code></dt><dd><p>Whether discard requests to the qcow2 device should be
forwarded to the data source (on/off; default: on if
discard=unmap is specified, off otherwise)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-snapshot</span></code></dt><dd><p>Whether discard requests for the data source should be
issued when a snapshot operation (e.g. deleting a snapshot)
frees clusters in the qcow2 file (on/off; default: on)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pass-discard-other</span></code></dt><dd><p>Whether discard requests for the data source should be
issued on other occasions where a cluster gets freed
(on/off; default: off)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overlap-check</span></code></dt><dd><p>Which overlap checks to perform for writes to the image
(none/constant/cached/all; default: cached). For details or
finer granularity control refer to the QAPI documentation of
<code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code>.</p>
</dd>
</dl>
<p>Example 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">file</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">my_file</span><span class="p">,</span><span class="n">filename</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">disk</span><span class="o">.</span><span class="n">qcow2</span>
<span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">qcow2</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">hda</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="n">my_file</span><span class="p">,</span><span class="n">overlap</span><span class="o">-</span><span class="n">check</span><span class="o">=</span><span class="n">none</span><span class="p">,</span><span class="n">cache</span><span class="o">-</span><span class="n">size</span><span class="o">=</span><span class="mi">16777216</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">blockdev</span> <span class="n">driver</span><span class="o">=</span><span class="n">qcow2</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">disk</span><span class="p">,</span><span class="n">file</span><span class="o">.</span><span class="n">driver</span><span class="o">=</span><span class="n">http</span><span class="p">,</span><span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">qcow2</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Driver-specific</span> <span class="pre">options</span> <span class="pre">for</span> <span class="pre">other</span> <span class="pre">drivers</span></code></dt><dd><p>Please refer to the QAPI documentation of the <code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code>
QMP command.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-drive</span> <span class="pre">option[,option[,option[,...]]]</span></code></dt><dd><p>Define a new drive. This includes creating a block driver node (the
backend) as well as a guest device, and is mostly a shortcut for
defining the corresponding <code class="docutils literal notranslate"><span class="pre">-blockdev</span></code> and <code class="docutils literal notranslate"><span class="pre">-device</span></code> options.</p>
<p><code class="docutils literal notranslate"><span class="pre">-drive</span></code> accepts all options that are accepted by <code class="docutils literal notranslate"><span class="pre">-blockdev</span></code>.
In addition, it knows the following options:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">file=file</span></code></dt><dd><p>This option defines which disk image (see the <a class="reference internal" href="images.html#disk-images"><span class="std std-ref">Disk Images</span></a>
chapter in the System Emulation Users Guide) to use with this drive.
If the filename contains comma, you must double it (for instance,
“file=my,,file” to use file “my,file”).</p>
<p>Special files such as iSCSI devices can be specified using
protocol specific URLs. See the section for “Device URL Syntax”
for more information.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">if=interface</span></code></dt><dd><p>This option defines on which type on interface the drive is
connected. Available types are: ide, scsi, sd, mtd, floppy,
pflash, virtio, none.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus=bus,unit=unit</span></code></dt><dd><p>These options define where is connected the drive by defining
the bus number and the unit id.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">index=index</span></code></dt><dd><p>This option defines where the drive is connected by using an
index in the list of available connectors of a given interface
type.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">media=media</span></code></dt><dd><p>This option defines the type of the media: disk or cdrom.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">snapshot=snapshot</span></code></dt><dd><p>snapshot is “on” or “off” and controls snapshot mode for the
given drive (see <code class="docutils literal notranslate"><span class="pre">-snapshot</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache=cache</span></code></dt><dd><p>cache is “none”, “writeback”, “unsafe”, “directsync” or
“writethrough” and controls how the host cache is used to access
block data. This is a shortcut that sets the <code class="docutils literal notranslate"><span class="pre">cache.direct</span></code>
and <code class="docutils literal notranslate"><span class="pre">cache.no-flush</span></code> options (as in <code class="docutils literal notranslate"><span class="pre">-blockdev</span></code>), and
additionally <code class="docutils literal notranslate"><span class="pre">cache.writeback</span></code>, which provides a default for
the <code class="docutils literal notranslate"><span class="pre">write-cache</span></code> option of block guest devices (as in
<code class="docutils literal notranslate"><span class="pre">-device</span></code>). The modes correspond to the following settings:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 28%" />
<col style="width: 22%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>cache.writeback</p></th>
<th class="head"><p>cache.direct</p></th>
<th class="head"><p>cache.no-flush</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>writeback</p></td>
<td><p>on</p></td>
<td><p>off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>none</p></td>
<td><p>on</p></td>
<td><p>on</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>writethrough</p></td>
<td><p>off</p></td>
<td><p>off</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-odd"><td><p>directsync</p></td>
<td><p>off</p></td>
<td><p>on</p></td>
<td><p>off</p></td>
</tr>
<tr class="row-even"><td><p>unsafe</p></td>
<td><p>on</p></td>
<td><p>off</p></td>
<td><p>on</p></td>
</tr>
</tbody>
</table>
<p>The default mode is <code class="docutils literal notranslate"><span class="pre">cache=writeback</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aio=aio</span></code></dt><dd><p>aio is “threads”, “native”, or “io_uring” and selects between pthread
based disk I/O, native Linux AIO, or Linux io_uring API.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format=format</span></code></dt><dd><p>Specify which disk format will be used rather than detecting the
format. Can be used to specify format=raw to avoid interpreting
an untrusted format header.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">werror=action,rerror=action</span></code></dt><dd><p>Specify which action to take on write and read errors. Valid
actions are: “ignore” (ignore the error and try to continue),
“stop” (pause QEMU), “report” (report the error to the guest),
“enospc” (pause QEMU only if the host disk is full; report the
error to the guest otherwise). The default setting is
<code class="docutils literal notranslate"><span class="pre">werror=enospc</span></code> and <code class="docutils literal notranslate"><span class="pre">rerror=report</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">copy-on-read=copy-on-read</span></code></dt><dd><p>copy-on-read is “on” or “off” and enables whether to copy read
backing file sectors into the image file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps=b,bps_rd=r,bps_wr=w</span></code></dt><dd><p>Specify bandwidth throttling limits in bytes per second, either
for all request types or for reads or writes only. Small values
can lead to timeouts or hangs inside the guest. A safe minimum
for disks is 2 MB/s.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bps_max=bm,bps_rd_max=rm,bps_wr_max=wm</span></code></dt><dd><p>Specify bursts in bytes per second, either for all request types
or for reads or writes only. Bursts allow the guest I/O to spike
above the limit temporarily.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops=i,iops_rd=r,iops_wr=w</span></code></dt><dd><p>Specify request rate limits in requests per second, either for
all request types or for reads or writes only.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_max=bm,iops_rd_max=rm,iops_wr_max=wm</span></code></dt><dd><p>Specify bursts in requests per second, either for all request
types or for reads or writes only. Bursts allow the guest I/O to
spike above the limit temporarily.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iops_size=is</span></code></dt><dd><p>Let every is bytes of a request count as a new request for iops
throttling purposes. Use this option to prevent guests from
circumventing iops limits by sending fewer but larger requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">group=g</span></code></dt><dd><p>Join a throttling quota group with given name g. All drives that
are members of the same group are accounted for together. Use
this option to prevent guests from circumventing throttling
limits by using many small disks instead of a single larger
disk.</p>
</dd>
</dl>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">cache.writeback=on</span></code> mode is used. It will report
data writes as completed as soon as the data is present in the host
page cache. This is safe as long as your guest OS makes sure to
correctly flush disk caches where needed. If your guest OS does not
handle volatile disk write caches correctly and your host crashes or
loses power, then the guest may experience data corruption.</p>
<p>For such guests, you should consider using <code class="docutils literal notranslate"><span class="pre">cache.writeback=off</span></code>.
This means that the host page cache will be used to read and write
data, but write notification will be sent to the guest only after
QEMU has made sure to flush each write to the disk. Be aware that
this has a major impact on performance.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">-snapshot</span></code> option, unsafe caching is always used.</p>
<p>Copy-on-read avoids accessing the same backing file sectors
repeatedly and is useful when the backing file is over a slow
network. By default copy-on-read is off.</p>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">-cdrom</span></code> you can use:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=file,index=2,media=cdrom</pre>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">-hda</span></code>, <code class="docutils literal notranslate"><span class="pre">-hdb</span></code>, <code class="docutils literal notranslate"><span class="pre">-hdc</span></code>, <code class="docutils literal notranslate"><span class="pre">-hdd</span></code>, you can use:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=file,index=0,media=disk
qemu-system-x86_64 -drive file=file,index=1,media=disk
qemu-system-x86_64 -drive file=file,index=2,media=disk
qemu-system-x86_64 -drive file=file,index=3,media=disk</pre>
<p>You can open an image using pre-opened file descriptors from an fd
set:</p>
<pre class="literal-block">qemu-system-x86_64 \
 -add-fd fd=3,set=2,opaque=&quot;rdwr:/path/to/file&quot; \
 -add-fd fd=4,set=2,opaque=&quot;rdonly:/path/to/file&quot; \
 -drive file=/dev/fdset/2,index=0,media=disk</pre>
<p>You can connect a CDROM to the slave of ide0:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=file,if=ide,index=1,media=cdrom</pre>
<p>If you don’t specify the “file=” argument, you define an empty
drive:</p>
<pre class="literal-block">qemu-system-x86_64 -drive if=ide,index=1,media=cdrom</pre>
<p>Instead of <code class="docutils literal notranslate"><span class="pre">-fda</span></code>, <code class="docutils literal notranslate"><span class="pre">-fdb</span></code>, you can use:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=file,index=0,if=floppy
qemu-system-x86_64 -drive file=file,index=1,if=floppy</pre>
<p>By default, interface is “ide” and index is automatically
incremented:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=a -drive file=b&quot;</pre>
<p>is interpreted like:</p>
<pre class="literal-block">qemu-system-x86_64 -hda a -hdb b</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-mtdblock</span> <span class="pre">file</span></code></dt><dd><p>Use file as on-board Flash memory image.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-sd</span> <span class="pre">file</span></code></dt><dd><p>Use file as SecureDigital card image.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-snapshot</span></code></dt><dd><p>Write to temporary files instead of disk image files. In this case,
the raw disk image you use is not written back. You can however
force the write back by pressing C-a s (see the <a class="reference internal" href="images.html#disk-images"><span class="std std-ref">Disk Images</span></a>
chapter in the System Emulation Users Guide).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">local,id=id,path=path,security_model=security_model</span> <span class="pre">[,writeout=writeout][,readonly=on][,fmode=fmode][,dmode=dmode]</span> <span class="pre">[,throttling.option=value[,throttling.option=value[,...]]]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">proxy,id=id,socket=socket[,writeout=writeout][,readonly=on]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">proxy,id=id,sock_fd=sock_fd[,writeout=writeout][,readonly=on]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">synth,id=id[,readonly=on]</span></code></dt><dd><p>Define a new file system device. Valid options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">local</span></code></dt><dd><p>Accesses to the filesystem are done by QEMU.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">proxy</span></code></dt><dd><p>Accesses to the filesystem are done by virtfs-proxy-helper(1).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">synth</span></code></dt><dd><p>Synthetic filesystem, only used by QTests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id=id</span></code></dt><dd><p>Specifies identifier for this device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path=path</span></code></dt><dd><p>Specifies the export path for the file system device. Files
under this path will be available to the 9p client on the guest.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">security_model=security_model</span></code></dt><dd><p>Specifies the security model to be used for this export path.
Supported security models are “passthrough”, “mapped-xattr”,
“mapped-file” and “none”. In “passthrough” security model, files
are stored using the same credentials as they are created on the
guest. This requires QEMU to run as root. In “mapped-xattr”
security model, some of the file attributes like uid, gid, mode
bits and link target are stored as file attributes. For
“mapped-file” these attributes are stored in the hidden
.virtfs_metadata directory. Directories exported by this
security model cannot interact with other unix tools. “none”
security model is same as passthrough except the sever won’t
report failures if it fails to set file attributes like
ownership. Security model is mandatory only for local fsdriver.
Other fsdrivers (like proxy) don’t take security model as a
parameter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writeout=writeout</span></code></dt><dd><p>This is an optional argument. The only supported value is
“immediate”. This means that host page cache will be used to
read and write data but write notification will be sent to the
guest only when the data has been reported as written by the
storage subsystem.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readonly=on</span></code></dt><dd><p>Enables exporting 9p share as a readonly mount for guests. By
default read-write access is given.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">socket=socket</span></code></dt><dd><p>Enables proxy filesystem driver to use passed socket file for
communicating with virtfs-proxy-helper(1).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sock_fd=sock_fd</span></code></dt><dd><p>Enables proxy filesystem driver to use passed socket descriptor
for communicating with virtfs-proxy-helper(1). Usually a helper
like libvirt will create socketpair and pass one of the fds as
sock_fd.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fmode=fmode</span></code></dt><dd><p>Specifies the default mode for newly created files on the host.
Works only with security models “mapped-xattr” and
“mapped-file”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dmode=dmode</span></code></dt><dd><p>Specifies the default mode for newly created directories on the
host. Works only with security models “mapped-xattr” and
“mapped-file”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">throttling.bps-total=b,throttling.bps-read=r,throttling.bps-write=w</span></code></dt><dd><p>Specify bandwidth throttling limits in bytes per second, either
for all request types or for reads or writes only.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">throttling.bps-total-max=bm,bps-read-max=rm,bps-write-max=wm</span></code></dt><dd><p>Specify bursts in bytes per second, either for all request types
or for reads or writes only. Bursts allow the guest I/O to spike
above the limit temporarily.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">throttling.iops-total=i,throttling.iops-read=r,</span> <span class="pre">throttling.iops-write=w</span></code></dt><dd><p>Specify request rate limits in requests per second, either for
all request types or for reads or writes only.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">throttling.iops-total-max=im,throttling.iops-read-max=irm,</span> <span class="pre">throttling.iops-write-max=iwm</span></code></dt><dd><p>Specify bursts in requests per second, either for all request
types or for reads or writes only. Bursts allow the guest I/O to
spike above the limit temporarily.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">throttling.iops-size=is</span></code></dt><dd><p>Let every is bytes of a request count as a new request for iops
throttling purposes.</p>
</dd>
</dl>
<p>-fsdev option is used along with -device driver “virtio-9p-…”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">virtio-9p-type,fsdev=id,mount_tag=mount_tag</span></code></dt><dd><p>Options for virtio-9p-… driver are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>Specifies the variant to be used. Supported values are “pci”,
“ccw” or “device”, depending on the machine type.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fsdev=id</span></code></dt><dd><p>Specifies the id value specified along with -fsdev option.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mount_tag=mount_tag</span></code></dt><dd><p>Specifies the tag name to be used by the guest to mount this
export point.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">local,path=path,mount_tag=mount_tag</span> <span class="pre">,security_model=security_model[,writeout=writeout][,readonly=on]</span> <span class="pre">[,fmode=fmode][,dmode=dmode][,multidevs=multidevs]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">proxy,socket=socket,mount_tag=mount_tag</span> <span class="pre">[,writeout=writeout][,readonly=on]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">proxy,sock_fd=sock_fd,mount_tag=mount_tag</span> <span class="pre">[,writeout=writeout][,readonly=on]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">synth,mount_tag=mount_tag</span></code></dt><dd><p>Define a new virtual filesystem device and expose it to the guest using
a virtio-9p-device (a.k.a. 9pfs), which essentially means that a certain
directory on host is made directly accessible by guest as a pass-through
file system by using the 9P network protocol for communication between
host and guests, if desired even accessible, shared by several guests
simultaneously.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">-virtfs</span></code> is actually just a convenience shortcut for its
generalized form <code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">-device</span> <span class="pre">virtio-9p-pci</span></code>.</p>
<p>The general form of pass-through file system options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">local</span></code></dt><dd><p>Accesses to the filesystem are done by QEMU.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">proxy</span></code></dt><dd><p>Accesses to the filesystem are done by virtfs-proxy-helper(1).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">synth</span></code></dt><dd><p>Synthetic filesystem, only used by QTests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id=id</span></code></dt><dd><p>Specifies identifier for the filesystem device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path=path</span></code></dt><dd><p>Specifies the export path for the file system device. Files
under this path will be available to the 9p client on the guest.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">security_model=security_model</span></code></dt><dd><p>Specifies the security model to be used for this export path.
Supported security models are “passthrough”, “mapped-xattr”,
“mapped-file” and “none”. In “passthrough” security model, files
are stored using the same credentials as they are created on the
guest. This requires QEMU to run as root. In “mapped-xattr”
security model, some of the file attributes like uid, gid, mode
bits and link target are stored as file attributes. For
“mapped-file” these attributes are stored in the hidden
.virtfs_metadata directory. Directories exported by this
security model cannot interact with other unix tools. “none”
security model is same as passthrough except the sever won’t
report failures if it fails to set file attributes like
ownership. Security model is mandatory only for local fsdriver.
Other fsdrivers (like proxy) don’t take security model as a
parameter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writeout=writeout</span></code></dt><dd><p>This is an optional argument. The only supported value is
“immediate”. This means that host page cache will be used to
read and write data but write notification will be sent to the
guest only when the data has been reported as written by the
storage subsystem.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readonly=on</span></code></dt><dd><p>Enables exporting 9p share as a readonly mount for guests. By
default read-write access is given.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">socket=socket</span></code></dt><dd><p>Enables proxy filesystem driver to use passed socket file for
communicating with virtfs-proxy-helper(1). Usually a helper like
libvirt will create socketpair and pass one of the fds as
sock_fd.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sock_fd</span></code></dt><dd><p>Enables proxy filesystem driver to use passed ‘sock_fd’ as the
socket descriptor for interfacing with virtfs-proxy-helper(1).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fmode=fmode</span></code></dt><dd><p>Specifies the default mode for newly created files on the host.
Works only with security models “mapped-xattr” and
“mapped-file”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dmode=dmode</span></code></dt><dd><p>Specifies the default mode for newly created directories on the
host. Works only with security models “mapped-xattr” and
“mapped-file”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mount_tag=mount_tag</span></code></dt><dd><p>Specifies the tag name to be used by the guest to mount this
export point.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">multidevs=multidevs</span></code></dt><dd><p>Specifies how to deal with multiple devices being shared with a
9p export. Supported behaviours are either “remap”, “forbid” or
“warn”. The latter is the default behaviour on which virtfs 9p
expects only one device to be shared with the same export, and
if more than one device is shared and accessed via the same 9p
export then only a warning message is logged (once) by qemu on
host side. In order to avoid file ID collisions on guest you
should either create a separate virtfs export for each device to
be shared with guests (recommended way) or you might use “remap”
instead which allows you to share multiple devices with only one
export instead, which is achieved by remapping the original
inode numbers from host to guest in a way that would prevent
such collisions. Remapping inodes in such use cases is required
because the original device IDs from host are never passed and
exposed on guest. Instead all files of an export shared with
virtfs always share the same device id on guest. So two files
with identical inode numbers but from actually different devices
on host would otherwise cause a file ID collision and hence
potential misbehaviours on guest. “forbid” on the other hand
assumes like “warn” that only one device is shared by the same
export, however it will not only log a warning message but also
deny access to additional devices on guest. Note though that
“forbid” does currently not block all possible file access
operations (e.g. readdir() would still return entries from other
devices).</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-iscsi</span></code></dt><dd><p>Configure iSCSI session parameters.</p>
</dd>
</dl>
</section>
<section id="hxtool-2">
<h2>USB convenience options<a class="headerlink" href="#hxtool-2" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-usb</span></code></dt><dd><p>Enable USB emulation on machine types with an on-board USB host
controller (if not enabled by default). Note that on-board USB host
controllers may not support USB 3.0. In this case
<code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">qemu-xhci</span></code> can be used instead on machines with PCI.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-usbdevice</span> <span class="pre">devname</span></code></dt><dd><p>Add the USB device devname, and enable an on-board USB controller
if possible and necessary (just like it can be done via
<code class="docutils literal notranslate"><span class="pre">-machine</span> <span class="pre">usb=on</span></code>). Note that this option is mainly intended for
the user’s convenience only. More fine-grained control can be
achieved by selecting a USB host controller (if necessary) and the
desired USB device via the <code class="docutils literal notranslate"><span class="pre">-device</span></code> option instead. For example,
instead of using <code class="docutils literal notranslate"><span class="pre">-usbdevice</span> <span class="pre">mouse</span></code> it is possible to use
<code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">qemu-xhci</span> <span class="pre">-device</span> <span class="pre">usb-mouse</span></code> to connect the USB mouse
to a USB 3.0 controller instead (at least on machines that support
PCI and do not have an USB controller enabled by default yet).
For more details, see the chapter about
<a class="reference internal" href="devices/usb.html#connecting-usb-devices"><span class="std std-ref">Connecting USB devices</span></a> in the System Emulation Users Guide.
Possible devices for devname are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">braille</span></code></dt><dd><p>Braille device. This will use BrlAPI to display the braille
output on a real or fake device (i.e. it also creates a
corresponding <code class="docutils literal notranslate"><span class="pre">braille</span></code> chardev automatically beside the
<code class="docutils literal notranslate"><span class="pre">usb-braille</span></code> USB device).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keyboard</span></code></dt><dd><p>Standard USB keyboard. Will override the PS/2 keyboard (if present).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mouse</span></code></dt><dd><p>Virtual Mouse. This will override the PS/2 mouse emulation when
activated.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tablet</span></code></dt><dd><p>Pointer device that uses absolute coordinates (like a
touchscreen). This means QEMU is able to report the mouse
position without having to grab the mouse. Also overrides the
PS/2 mouse emulation when activated.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wacom-tablet</span></code></dt><dd><p>Wacom PenPartner USB tablet.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="hxtool-3">
<h2>Display options<a class="headerlink" href="#hxtool-3" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-display</span> <span class="pre">type</span></code></dt><dd><p>Select type of display to use. Use <code class="docutils literal notranslate"><span class="pre">-display</span> <span class="pre">help</span></code> to list the available
display types. Valid values for type are</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">spice-app[,gl=on|off]</span></code></dt><dd><p>Start QEMU as a Spice server and launch the default Spice client
application. The Spice server will redirect the serial consoles
and QEMU monitors. (Since 4.0)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dbus</span></code></dt><dd><p>Export the display over D-Bus interfaces. (Since 7.0)</p>
<p>The connection is registered with the “org.qemu” name (and queued when
already owned).</p>
<p><code class="docutils literal notranslate"><span class="pre">addr=&lt;dbusaddr&gt;</span></code> : D-Bus bus address to connect to.</p>
<p><code class="docutils literal notranslate"><span class="pre">p2p=yes|no</span></code> : Use peer-to-peer connection, accepted via QMP <code class="docutils literal notranslate"><span class="pre">add_client</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">gl=on|off|core|es</span></code> : Use OpenGL for rendering (the D-Bus interface
will share framebuffers with DMABUF file descriptors).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sdl</span></code></dt><dd><p>Display video output via SDL (usually in a separate graphics
window; see the SDL documentation for other possibilities).
Valid parameters are:</p>
<p><code class="docutils literal notranslate"><span class="pre">grab-mod=&lt;mods&gt;</span></code> : Used to select the modifier keys for toggling
the mouse grabbing in conjunction with the “g” key. <code class="docutils literal notranslate"><span class="pre">&lt;mods&gt;</span></code> can be
either <code class="docutils literal notranslate"><span class="pre">lshift-lctrl-lalt</span></code> or <code class="docutils literal notranslate"><span class="pre">rctrl</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">gl=on|off|core|es</span></code> : Use OpenGL for displaying</p>
<p><code class="docutils literal notranslate"><span class="pre">show-cursor=on|off</span></code> :  Force showing the mouse cursor</p>
<p><code class="docutils literal notranslate"><span class="pre">window-close=on|off</span></code> : Allow to quit qemu with window close button</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gtk</span></code></dt><dd><p>Display video output in a GTK window. This interface provides
drop-down menus and other UI elements to configure and control
the VM during runtime. Valid parameters are:</p>
<p><code class="docutils literal notranslate"><span class="pre">full-screen=on|off</span></code> : Start in fullscreen mode</p>
<p><code class="docutils literal notranslate"><span class="pre">gl=on|off</span></code> : Use OpenGL for displaying</p>
<p><code class="docutils literal notranslate"><span class="pre">grab-on-hover=on|off</span></code> : Grab keyboard input on mouse hover</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">show-tabs=on|off</span></code><span class="classifier">Display the tab bar for switching between the</span></dt><dd><p>various graphical interfaces (e.g. VGA and
virtual console character devices) by default.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">show-cursor=on|off</span></code> :  Force showing the mouse cursor</p>
<p><code class="docutils literal notranslate"><span class="pre">window-close=on|off</span></code> : Allow to quit qemu with window close button</p>
<p><code class="docutils literal notranslate"><span class="pre">show-menubar=on|off</span></code> : Display the main window menubar, defaults to “on”</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">curses[,charset=&lt;encoding&gt;]</span></code></dt><dd><p>Display video output via curses. For graphics device models
which support a text mode, QEMU can display this output using a
curses/ncurses interface. Nothing is displayed when the graphics
device is in graphical mode or if the graphics device does not
support a text mode. Generally only the VGA device models
support text mode. The font charset used by the guest can be
specified with the <code class="docutils literal notranslate"><span class="pre">charset</span></code> option, for example
<code class="docutils literal notranslate"><span class="pre">charset=CP850</span></code> for IBM CP850 encoding. The default is
<code class="docutils literal notranslate"><span class="pre">CP437</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cocoa</span></code></dt><dd><p>Display video output in a Cocoa window. Mac only. This interface
provides drop-down menus and other UI elements to configure and
control the VM during runtime. Valid parameters are:</p>
<p><code class="docutils literal notranslate"><span class="pre">show-cursor=on|off</span></code> :  Force showing the mouse cursor</p>
<p><code class="docutils literal notranslate"><span class="pre">left-command-key=on|off</span></code> : Disable forwarding left command key to host</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">egl-headless[,rendernode=&lt;file&gt;]</span></code></dt><dd><p>Offload all OpenGL operations to a local DRI device. For any
graphical display, this display needs to be paired with either
VNC or SPICE displays.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vnc=&lt;display&gt;</span></code></dt><dd><p>Start a VNC server on display &lt;display&gt;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>Do not display video output. The guest will still see an
emulated graphics card, but its output will not be displayed to
the QEMU user. This option differs from the -nographic option in
that it only affects what is done with video output; -nographic
also changes the destination of the serial and parallel port
data.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-nographic</span></code></dt><dd><p>Normally, if QEMU is compiled with graphical window support, it
displays output such as guest graphics, guest console, and the QEMU
monitor in a window. With this option, you can totally disable
graphical output so that QEMU is a simple command line application.
The emulated serial port is redirected on the console and muxed with
the monitor (unless redirected elsewhere explicitly). Therefore, you
can still use QEMU to debug a Linux kernel with a serial console.
Use C-a h for help on switching between the console and monitor.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-spice</span> <span class="pre">option[,option[,...]]</span></code></dt><dd><p>Enable the spice remote desktop protocol. Valid options are</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">port=&lt;nr&gt;</span></code></dt><dd><p>Set the TCP port spice is listening on for plaintext channels.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">addr=&lt;addr&gt;</span></code></dt><dd><p>Set the IP address spice is listening on. Default is any
address.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv4=on|off</span></code>; <code class="docutils literal notranslate"><span class="pre">ipv6=on|off</span></code>; <code class="docutils literal notranslate"><span class="pre">unix=on|off</span></code></dt><dd><p>Force using the specified IP version.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password=&lt;string&gt;</span></code></dt><dd><p>Set the password you need to authenticate.</p>
<p>This option is deprecated and insecure because it leaves the
password visible in the process listing. Use <code class="docutils literal notranslate"><span class="pre">password-secret</span></code>
instead.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password-secret=&lt;secret-id&gt;</span></code></dt><dd><p>Set the ID of the <code class="docutils literal notranslate"><span class="pre">secret</span></code> object containing the password
you need to authenticate.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sasl=on|off</span></code></dt><dd><p>Require that the client use SASL to authenticate with the spice.
The exact choice of authentication method used is controlled
from the system / user’s SASL configuration file for the ‘qemu’
service. This is typically found in /etc/sasl2/qemu.conf. If
running QEMU as an unprivileged user, an environment variable
SASL_CONF_PATH can be used to make it search alternate
locations for the service config. While some SASL auth methods
can also provide data encryption (eg GSSAPI), it is recommended
that SASL always be combined with the ‘tls’ and ‘x509’ settings
to enable use of SSL and server certificates. This ensures a
data encryption preventing compromise of authentication
credentials.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable-ticketing=on|off</span></code></dt><dd><p>Allow client connects without authentication.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable-copy-paste=on|off</span></code></dt><dd><p>Disable copy paste between the client and the guest.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable-agent-file-xfer=on|off</span></code></dt><dd><p>Disable spice-vdagent based file-xfer between the client and the
guest.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-port=&lt;nr&gt;</span></code></dt><dd><p>Set the TCP port spice is listening on for encrypted channels.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">x509-dir=&lt;dir&gt;</span></code></dt><dd><p>Set the x509 file directory. Expects same filenames as -vnc
$display,x509=$dir</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">x509-key-file=&lt;file&gt;</span></code>; <code class="docutils literal notranslate"><span class="pre">x509-key-password=&lt;file&gt;</span></code>; <code class="docutils literal notranslate"><span class="pre">x509-cert-file=&lt;file&gt;</span></code>; <code class="docutils literal notranslate"><span class="pre">x509-cacert-file=&lt;file&gt;</span></code>; <code class="docutils literal notranslate"><span class="pre">x509-dh-key-file=&lt;file&gt;</span></code></dt><dd><p>The x509 file names can also be configured individually.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-ciphers=&lt;list&gt;</span></code></dt><dd><p>Specify which ciphers to use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-channel=[main|display|cursor|inputs|record|playback]</span></code>; <code class="docutils literal notranslate"><span class="pre">plaintext-channel=[main|display|cursor|inputs|record|playback]</span></code></dt><dd><p>Force specific channel to be used with or without TLS
encryption. The options can be specified multiple times to
configure multiple channels. The special name “default” can be
used to set the default mode. For channels which are not
explicitly forced into one mode the spice client is allowed to
pick tls/plaintext as he pleases.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image-compression=[auto_glz|auto_lz|quic|glz|lz|off]</span></code></dt><dd><p>Configure image compression (lossless). Default is auto_glz.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">jpeg-wan-compression=[auto|never|always]</span></code>; <code class="docutils literal notranslate"><span class="pre">zlib-glz-wan-compression=[auto|never|always]</span></code></dt><dd><p>Configure wan image compression (lossy for slow links). Default
is auto.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">streaming-video=[off|all|filter]</span></code></dt><dd><p>Configure video stream detection. Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">agent-mouse=[on|off]</span></code></dt><dd><p>Enable/disable passing mouse events via vdagent. Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playback-compression=[on|off]</span></code></dt><dd><p>Enable/disable audio stream compression (using celt 0.5.1).
Default is on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seamless-migration=[on|off]</span></code></dt><dd><p>Enable/disable spice seamless migration. Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gl=[on|off]</span></code></dt><dd><p>Enable/disable OpenGL context. Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rendernode=&lt;file&gt;</span></code></dt><dd><p>DRM render node for OpenGL rendering. If not specified, it will
pick the first available. (Since 2.9)</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-portrait</span></code></dt><dd><p>Rotate graphical output 90 deg left (only PXA LCD).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-rotate</span> <span class="pre">deg</span></code></dt><dd><p>Rotate graphical output some deg left (only PXA LCD).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-vga</span> <span class="pre">type</span></code></dt><dd><p>Select type of VGA card to emulate. Valid values for type are</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cirrus</span></code></dt><dd><p>Cirrus Logic GD5446 Video card. All Windows versions starting
from Windows 95 should recognize and use this graphic card. For
optimal performances, use 16 bit color depth in the guest and
the host OS. (This card was the default before QEMU 2.2)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">std</span></code></dt><dd><p>Standard VGA card with Bochs VBE extensions. If your guest OS
supports the VESA 2.0 VBE extensions (e.g. Windows XP) and if
you want to use high resolution modes (&gt;= 1280x1024x16) then you
should use this option. (This card is the default since QEMU
2.2)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware</span></code></dt><dd><p>VMWare SVGA-II compatible adapter. Use it if you have
sufficiently recent XFree86/XOrg server or Windows guest with a
driver for this card.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">qxl</span></code></dt><dd><p>QXL paravirtual graphic card. It is VGA compatible (including
VESA 2.0 VBE support). Works best with qxl guest drivers
installed though. Recommended choice when using the spice
protocol.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tcx</span></code></dt><dd><p>(sun4m only) Sun TCX framebuffer. This is the default
framebuffer for sun4m machines and offers both 8-bit and 24-bit
colour depths at a fixed resolution of 1024x768.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cg3</span></code></dt><dd><p>(sun4m only) Sun cgthree framebuffer. This is a simple 8-bit
framebuffer for sun4m machines available in both 1024x768
(OpenBIOS) and 1152x900 (OBP) resolutions aimed at people
wishing to run older Solaris versions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">virtio</span></code></dt><dd><p>Virtio VGA card.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>Disable VGA card.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-full-screen</span></code></dt><dd><p>Start in full screen.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-g</span></code> <em>width</em><code class="docutils literal notranslate"><span class="pre">x</span></code><em>height</em><code class="docutils literal notranslate"><span class="pre">[x</span></code><em>depth</em><code class="docutils literal notranslate"><span class="pre">]</span></code></dt><dd><p>Set the initial graphical resolution and depth (PPC, SPARC only).</p>
<p>For PPC the default is 800x600x32.</p>
<p>For SPARC with the TCX graphics device, the default is 1024x768x8
with the option of 1024x768x24. For cgthree, the default is
1024x768x8 with the option of 1152x900x8 for people who wish to use
OBP.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-vnc</span> <span class="pre">display[,option[,option[,...]]]</span></code></dt><dd><p>Normally, if QEMU is compiled with graphical window support, it
displays output such as guest graphics, guest console, and the QEMU
monitor in a window. With this option, you can have QEMU listen on
VNC display display and redirect the VGA display over the VNC
session. It is very useful to enable the usb tablet device when
using this option (option <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">usb-tablet</span></code>). When using the
VNC display, you must use the <code class="docutils literal notranslate"><span class="pre">-k</span></code> parameter to set the keyboard
layout if you are not using en-us. Valid syntax for the display is</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">to=L</span></code></dt><dd><p>With this option, QEMU will try next available VNC displays,
until the number L, if the origianlly defined “-vnc display” is
not available, e.g. port 5900+display is already used by another
application. By default, to=0.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host:d</span></code></dt><dd><p>TCP connections will only be allowed from host on display d. By
convention the TCP port is 5900+d. Optionally, host can be
omitted in which case the server will accept connections from
any host.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unix:path</span></code></dt><dd><p>Connections will be allowed over UNIX domain sockets where path
is the location of a unix socket to listen for connections on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>VNC is initialized but not started. The monitor <code class="docutils literal notranslate"><span class="pre">change</span></code>
command can be used to later start the VNC server.</p>
</dd>
</dl>
<p>Following the display value there may be one or more option flags
separated by commas. Valid options are</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">reverse=on|off</span></code></dt><dd><p>Connect to a listening VNC client via a “reverse” connection.
The client is specified by the display. For reverse network
connections (host:d,``reverse``), the d argument is a TCP port
number, not a display number.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">websocket=on|off</span></code></dt><dd><p>Opens an additional TCP listening port dedicated to VNC
Websocket connections. If a bare websocket option is given, the
Websocket port is 5700+display. An alternative port can be
specified with the syntax <code class="docutils literal notranslate"><span class="pre">websocket</span></code>=port.</p>
<p>If host is specified connections will only be allowed from this
host. It is possible to control the websocket listen address
independently, using the syntax <code class="docutils literal notranslate"><span class="pre">websocket</span></code>=host:port.</p>
<p>If no TLS credentials are provided, the websocket connection
runs in unencrypted mode. If TLS credentials are provided, the
websocket connection requires encrypted client connections.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password=on|off</span></code></dt><dd><p>Require that password based authentication is used for client
connections.</p>
<p>The password must be set separately using the <code class="docutils literal notranslate"><span class="pre">set_password</span></code>
command in the <a class="reference internal" href="monitor.html#qemu-monitor"><span class="std std-ref">QEMU Monitor</span></a>. The
syntax to change your password is:
<code class="docutils literal notranslate"><span class="pre">set_password</span> <span class="pre">&lt;protocol&gt;</span> <span class="pre">&lt;password&gt;</span></code> where &lt;protocol&gt; could be
either “vnc” or “spice”.</p>
<p>If you would like to change &lt;protocol&gt; password expiration, you
should use <code class="docutils literal notranslate"><span class="pre">expire_password</span> <span class="pre">&lt;protocol&gt;</span> <span class="pre">&lt;expiration-time&gt;</span></code>
where expiration time could be one of the following options:
now, never, +seconds or UNIX time of expiration, e.g. +60 to
make password expire in 60 seconds, or 1335196800 to make
password expire on “Mon Apr 23 12:00:00 EDT 2012” (UNIX time for
this date and time).</p>
<p>You can also use keywords “now” or “never” for the expiration
time to allow &lt;protocol&gt; password to expire immediately or never
expire.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password-secret=&lt;secret-id&gt;</span></code></dt><dd><p>Require that password based authentication is used for client
connections, using the password provided by the <code class="docutils literal notranslate"><span class="pre">secret</span></code>
object identified by <code class="docutils literal notranslate"><span class="pre">secret-id</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-creds=ID</span></code></dt><dd><p>Provides the ID of a set of TLS credentials to use to secure the
VNC server. They will apply to both the normal VNC server socket
and the websocket socket (if enabled). Setting TLS credentials
will cause the VNC server socket to enable the VeNCrypt auth
mechanism. The credentials should have been previously created
using the <code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-creds</span></code> argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tls-authz=ID</span></code></dt><dd><p>Provides the ID of the QAuthZ authorization object against which
the client’s x509 distinguished name will validated. This object
is only resolved at time of use, so can be deleted and recreated
on the fly while the VNC server is active. If missing, it will
default to denying access.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sasl=on|off</span></code></dt><dd><p>Require that the client use SASL to authenticate with the VNC
server. The exact choice of authentication method used is
controlled from the system / user’s SASL configuration file for
the ‘qemu’ service. This is typically found in
/etc/sasl2/qemu.conf. If running QEMU as an unprivileged user,
an environment variable SASL_CONF_PATH can be used to make it
search alternate locations for the service config. While some
SASL auth methods can also provide data encryption (eg GSSAPI),
it is recommended that SASL always be combined with the ‘tls’
and ‘x509’ settings to enable use of SSL and server
certificates. This ensures a data encryption preventing
compromise of authentication credentials. See the
<a class="reference internal" href="vnc-security.html#vnc-security"><span class="std std-ref">VNC security</span></a> section in the System Emulation Users Guide
for details on using SASL authentication.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sasl-authz=ID</span></code></dt><dd><p>Provides the ID of the QAuthZ authorization object against which
the client’s SASL username will validated. This object is only
resolved at time of use, so can be deleted and recreated on the
fly while the VNC server is active. If missing, it will default
to denying access.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">acl=on|off</span></code></dt><dd><p>Legacy method for enabling authorization of clients against the
x509 distinguished name and SASL username. It results in the
creation of two <code class="docutils literal notranslate"><span class="pre">authz-list</span></code> objects with IDs of
<code class="docutils literal notranslate"><span class="pre">vnc.username</span></code> and <code class="docutils literal notranslate"><span class="pre">vnc.x509dname</span></code>. The rules for these
objects must be configured with the HMP ACL commands.</p>
<p>This option is deprecated and should no longer be used. The new
<code class="docutils literal notranslate"><span class="pre">sasl-authz</span></code> and <code class="docutils literal notranslate"><span class="pre">tls-authz</span></code> options are a replacement.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lossy=on|off</span></code></dt><dd><p>Enable lossy compression methods (gradient, JPEG, …). If this
option is set, VNC client may receive lossy framebuffer updates
depending on its encoding settings. Enabling this option can
save a lot of bandwidth at the expense of quality.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">non-adaptive=on|off</span></code></dt><dd><p>Disable adaptive encodings. Adaptive encodings are enabled by
default. An adaptive encoding will try to detect frequently
updated screen regions, and send updates in these regions using
a lossy encoding (like JPEG). This can be really helpful to save
bandwidth when playing videos. Disabling adaptive encodings
restores the original static behavior of encodings like Tight.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">share=[allow-exclusive|force-shared|ignore]</span></code></dt><dd><p>Set display sharing policy. ‘allow-exclusive’ allows clients to
ask for exclusive access. As suggested by the rfb spec this is
implemented by dropping other connections. Connecting multiple
clients in parallel requires all clients asking for a shared
session (vncviewer: -shared switch). This is the default.
‘force-shared’ disables exclusive client access. Useful for
shared desktop sessions, where you don’t want someone forgetting
specify -shared disconnect everybody else. ‘ignore’ completely
ignores the shared flag and allows everybody connect
unconditionally. Doesn’t conform to the rfb spec but is
traditional QEMU behavior.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">key-delay-ms</span></code></dt><dd><p>Set keyboard delay, for key down and key up events, in
milliseconds. Default is 10. Keyboards are low-bandwidth
devices, so this slowdown can help the device and guest to keep
up and not lose events in case events are arriving in bulk.
Possible causes for the latter are flaky network connections, or
scripts for automated testing.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audiodev=audiodev</span></code></dt><dd><p>Use the specified audiodev when the VNC client requests audio
transmission. When not using an -audiodev argument, this option
must be omitted, otherwise is must be present and specify a
valid audiodev.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">power-control=on|off</span></code></dt><dd><p>Permit the remote client to issue shutdown, reboot or reset power
control requests.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="hxtool-4">
<h2>i386 target only<a class="headerlink" href="#hxtool-4" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-win2k-hack</span></code></dt><dd><p>Use it when installing Windows 2000 to avoid a disk full bug. After
Windows 2000 is installed, you no longer need this option (this
option slows down the IDE transfers).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-fd-bootchk</span></code></dt><dd><p>Disable boot signature checking for floppy disks in BIOS. May be
needed to boot from old floppy disks.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-acpi</span></code></dt><dd><p>Disable ACPI (Advanced Configuration and Power Interface) support.
Use it if your guest OS complains about ACPI problems (PC target
machine only).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-hpet</span></code></dt><dd><p>Disable HPET support.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-acpitable</span> <span class="pre">[sig=str][,rev=n][,oem_id=str][,oem_table_id=str][,oem_rev=n]</span> <span class="pre">[,asl_compiler_id=str][,asl_compiler_rev=n][,data=file1[:file2]...]</span></code></dt><dd><p>Add ACPI table with specified header fields and context from
specified files. For file=, take whole ACPI table from the specified
files, including all ACPI headers (possible overridden by other
options). For data=, only data portion of the table is used, all
header information is specified in the command line. If a SLIC table
is supplied to QEMU, then the SLIC’s oem_id and oem_table_id
fields will override the same in the RSDT and the FADT (a.k.a.
FACP), in order to ensure the field matches required by the
Microsoft SLIC spec and the ACPI spec.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">file=binary</span></code></dt><dd><p>Load SMBIOS entry from binary file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=0[,vendor=str][,version=str][,date=str][,release=%d.%d][,uefi=on|off]</span></code></dt><dd><p>Specify SMBIOS type 0 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=1[,manufacturer=str][,product=str][,version=str][,serial=str][,uuid=uuid][,sku=str][,family=str]</span></code></dt><dd><p>Specify SMBIOS type 1 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=2[,manufacturer=str][,product=str][,version=str][,serial=str][,asset=str][,location=str]</span></code></dt><dd><p>Specify SMBIOS type 2 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=3[,manufacturer=str][,version=str][,serial=str][,asset=str][,sku=str]</span></code></dt><dd><p>Specify SMBIOS type 3 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=4[,sock_pfx=str][,manufacturer=str][,version=str][,serial=str][,asset=str][,part=str][,processor-id=%d]</span></code></dt><dd><p>Specify SMBIOS type 4 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=11[,value=str][,path=filename]</span></code></dt><dd><p>Specify SMBIOS type 11 fields</p>
<p>This argument can be repeated multiple times, and values are added in the order they are parsed.
Applications intending to use OEM strings data are encouraged to use their application name as
a prefix for the value string. This facilitates passing information for multiple applications
concurrently.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">value=str</span></code> syntax provides the string data inline, while the <code class="docutils literal notranslate"><span class="pre">path=filename</span></code> syntax
loads data from a file on disk. Note that the file is not permitted to contain any NUL bytes.</p>
<p>Both the <code class="docutils literal notranslate"><span class="pre">value</span></code> and <code class="docutils literal notranslate"><span class="pre">path</span></code> options can be repeated multiple times and will be added to
the SMBIOS table in the order in which they appear.</p>
<p>Note that on the x86 architecture, the total size of all SMBIOS tables is limited to 65535
bytes. Thus the OEM strings data is not suitable for passing large amounts of data into the
guest. Instead it should be used as a indicator to inform the guest where to locate the real
data set, for example, by specifying the serial ID of a block device.</p>
<p>An example passing three strings is</p>
<pre class="literal-block">-smbios type=11,value=cloud-init:ds=nocloud-net;s=http://10.10.0.1:8000/,\
                value=anaconda:method=http://dl.fedoraproject.org/pub/fedora/linux/releases/25/x86_64/os,\
                path=/some/file/with/oemstringsdata.txt</pre>
<p>In the guest OS this is visible with the <code class="docutils literal notranslate"><span class="pre">dmidecode</span></code> command</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ dmidecode -t 11
Handle 0x0E00, DMI type 11, 5 bytes
OEM Strings
     String 1: cloud-init:ds=nocloud-net;s=http://10.10.0.1:8000/
     String 2: anaconda:method=http://dl.fedoraproject.org/pub/fedora/linux/releases/25/x86_64/os
     String 3: myapp:some extra data
</pre></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=17[,loc_pfx=str][,bank=str][,manufacturer=str][,serial=str][,asset=str][,part=str][,speed=%d]</span></code></dt><dd><p>Specify SMBIOS type 17 fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-smbios</span> <span class="pre">type=41[,designation=str][,kind=str][,instance=%d][,pcidev=str]</span></code></dt><dd><p>Specify SMBIOS type 41 fields</p>
<p>This argument can be repeated multiple times.  Its main use is to allow network interfaces be created
as <code class="docutils literal notranslate"><span class="pre">enoX</span></code> on Linux, with X being the instance number, instead of the name depending on the interface
position on the PCI bus.</p>
<p>Here is an example of use:</p>
<pre class="literal-block">-netdev user,id=internet \
-device virtio-net-pci,mac=50:54:00:00:00:42,netdev=internet,id=internet-dev \
-smbios type=41,designation='Onboard LAN',instance=1,kind=ethernet,pcidev=internet-dev</pre>
<p>In the guest OS, the device should then appear as <code class="docutils literal notranslate"><span class="pre">eno1</span></code>:</p>
<p>..parsed-literal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ip -brief l
lo               UNKNOWN        00:00:00:00:00:00 &lt;LOOPBACK,UP,LOWER_UP&gt;
eno1             UP             50:54:00:00:00:42 &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;
</pre></div>
</div>
<p>Currently, the PCI device has to be attached to the root bus.</p>
</dd>
</dl>
</section>
<section id="hxtool-5">
<h2>Network options<a class="headerlink" href="#hxtool-5" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-nic</span> <span class="pre">[tap|bridge|user|l2tpv3|vde|netmap|vhost-user|socket][,...][,mac=macaddr][,model=mn]</span></code></dt><dd><p>This option is a shortcut for configuring both the on-board
(default) guest NIC hardware and the host network backend in one go.
The host backend options are the same as with the corresponding
<code class="docutils literal notranslate"><span class="pre">-netdev</span></code> options below. The guest NIC model can be set with
<code class="docutils literal notranslate"><span class="pre">model=modelname</span></code>. Use <code class="docutils literal notranslate"><span class="pre">model=help</span></code> to list the available device
types. The hardware MAC address can be set with <code class="docutils literal notranslate"><span class="pre">mac=macaddr</span></code>.</p>
<p>The following two example do exactly the same, to show how <code class="docutils literal notranslate"><span class="pre">-nic</span></code>
can be used to shorten the command line length:</p>
<pre class="literal-block">qemu-system-x86_64 -netdev user,id=n1,ipv6=off -device e1000,netdev=n1,mac=52:54:98:76:54:32
qemu-system-x86_64 -nic user,ipv6=off,model=e1000,mac=52:54:98:76:54:32</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-nic</span> <span class="pre">none</span></code></dt><dd><p>Indicate that no network devices should be configured. It is used to
override the default configuration (default NIC with “user” host
network backend) which is activated if no other networking options
are provided.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">user,id=id[,option][,option][,...]</span></code></dt><dd><p>Configure user mode host network backend which requires no
administrator privilege to run. Valid options are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">id=id</span></code></dt><dd><p>Assign symbolic name for use in monitor commands.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv4=on|off</span> <span class="pre">and</span> <span class="pre">ipv6=on|off</span></code></dt><dd><p>Specify that either IPv4 or IPv6 must be enabled. If neither is
specified both protocols are enabled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">net=addr[/mask]</span></code></dt><dd><p>Set IP network address the guest will see. Optionally specify
the netmask, either in the form a.b.c.d or as number of valid
top-most bits. Default is 10.0.2.0/24.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host=addr</span></code></dt><dd><p>Specify the guest-visible address of the host. Default is the
2nd IP in the guest network, i.e. x.x.x.2.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6-net=addr[/int]</span></code></dt><dd><p>Set IPv6 network address the guest will see (default is
fec0::/64). The network prefix is given in the usual hexadecimal
IPv6 address notation. The prefix size is optional, and is given
as the number of valid top-most bits (default is 64).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6-host=addr</span></code></dt><dd><p>Specify the guest-visible IPv6 address of the host. Default is
the 2nd IPv6 in the guest network, i.e. xxxx::2.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">restrict=on|off</span></code></dt><dd><p>If this option is enabled, the guest will be isolated, i.e. it
will not be able to contact the host and no guest IP packets
will be routed over the host to the outside. This option does
not affect any explicitly set forwarding rules.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hostname=name</span></code></dt><dd><p>Specifies the client hostname reported by the built-in DHCP
server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dhcpstart=addr</span></code></dt><dd><p>Specify the first of the 16 IPs the built-in DHCP server can
assign. Default is the 15th to 31st IP in the guest network,
i.e. x.x.x.15 to x.x.x.31.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dns=addr</span></code></dt><dd><p>Specify the guest-visible address of the virtual nameserver. The
address must be different from the host address. Default is the
3rd IP in the guest network, i.e. x.x.x.3.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6-dns=addr</span></code></dt><dd><p>Specify the guest-visible address of the IPv6 virtual
nameserver. The address must be different from the host address.
Default is the 3rd IP in the guest network, i.e. xxxx::3.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dnssearch=domain</span></code></dt><dd><p>Provides an entry for the domain-search list sent by the
built-in DHCP server. More than one domain suffix can be
transmitted by specifying this option multiple times. If
supported, this will cause the guest to automatically try to
append the given domain suffix(es) in case a domain name can not
be resolved.</p>
<p>Example:</p>
<pre class="literal-block">qemu-system-x86_64 -nic user,dnssearch=mgmt.example.org,dnssearch=example.org</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">domainname=domain</span></code></dt><dd><p>Specifies the client domain name reported by the built-in DHCP
server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tftp=dir</span></code></dt><dd><p>When using the user mode network stack, activate a built-in TFTP
server. The files in dir will be exposed as the root of a TFTP
server. The TFTP client on the guest must be configured in
binary mode (use the command <code class="docutils literal notranslate"><span class="pre">bin</span></code> of the Unix TFTP client).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tftp-server-name=name</span></code></dt><dd><p>In BOOTP reply, broadcast name as the “TFTP server name”
(RFC2132 option 66). This can be used to advise the guest to
load boot files or configurations from a different server than
the host address.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bootfile=file</span></code></dt><dd><p>When using the user mode network stack, broadcast file as the
BOOTP filename. In conjunction with <code class="docutils literal notranslate"><span class="pre">tftp</span></code>, this can be used
to network boot a guest from a local directory.</p>
<p>Example (using pxelinux):</p>
<pre class="literal-block">qemu-system-x86_64 -hda linux.img -boot n -device e1000,netdev=n1 \
    -netdev user,id=n1,tftp=/path/to/tftp/files,bootfile=/pxelinux.0</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smb=dir[,smbserver=addr]</span></code></dt><dd><p>When using the user mode network stack, activate a built-in SMB
server so that Windows OSes can access to the host files in
<code class="docutils literal notranslate"><span class="pre">dir</span></code> transparently. The IP address of the SMB server can be
set to addr. By default the 4th IP in the guest network is used,
i.e. x.x.x.4.</p>
<p>In the guest Windows OS, the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">10.0.2.4</span> <span class="n">smbserver</span>
</pre></div>
</div>
<p>must be added in the file <code class="docutils literal notranslate"><span class="pre">C:\WINDOWS\LMHOSTS</span></code> (for windows
9x/Me) or <code class="docutils literal notranslate"><span class="pre">C:\WINNT\SYSTEM32\DRIVERS\ETC\LMHOSTS</span></code> (Windows
NT/2000).</p>
<p>Then <code class="docutils literal notranslate"><span class="pre">dir</span></code> can be accessed in <code class="docutils literal notranslate"><span class="pre">\\smbserver\qemu</span></code>.</p>
<p>Note that a SAMBA server must be installed on the host OS.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hostfwd=[tcp|udp]:[hostaddr]:hostport-[guestaddr]:guestport</span></code></dt><dd><p>Redirect incoming TCP or UDP connections to the host port
hostport to the guest IP address guestaddr on guest port
guestport. If guestaddr is not specified, its value is x.x.x.15
(default first address given by the built-in DHCP server). By
specifying hostaddr, the rule can be bound to a specific host
interface. If no connection type is set, TCP is used. This
option can be given multiple times.</p>
<p>For example, to redirect host X11 connection from screen 1 to
guest screen 0, use the following:</p>
<pre class="literal-block"># on the host
qemu-system-x86_64 -nic user,hostfwd=tcp:127.0.0.1:6001-:6000
# this host xterm should open in the guest X11 server
xterm -display :1</pre>
<p>To redirect telnet connections from host port 5555 to telnet
port on the guest, use the following:</p>
<pre class="literal-block"># on the host
qemu-system-x86_64 -nic user,hostfwd=tcp::5555-:23
telnet localhost 5555</pre>
<p>Then when you use on the host <code class="docutils literal notranslate"><span class="pre">telnet</span> <span class="pre">localhost</span> <span class="pre">5555</span></code>, you
connect to the guest telnet server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guestfwd=[tcp]:server:port-dev</span></code>; <code class="docutils literal notranslate"><span class="pre">guestfwd=[tcp]:server:port-cmd:command</span></code></dt><dd><p>Forward guest TCP connections to the IP address server on port
port to the character device dev or to a program executed by
cmd:command which gets spawned for each connection. This option
can be given multiple times.</p>
<p>You can either use a chardev directly and have that one used
throughout QEMU’s lifetime, like in the following example:</p>
<pre class="literal-block"># open 10.10.1.1:4321 on bootup, connect 10.0.2.100:1234 to it whenever
# the guest accesses it
qemu-system-x86_64 -nic user,guestfwd=tcp:10.0.2.100:1234-<a class="reference external" href="tcp:10.10.1.1:4321">tcp:10.10.1.1:4321</a></pre>
<p>Or you can execute a command on every TCP connection established
by the guest, so that QEMU behaves similar to an inetd process
for that virtual server:</p>
<pre class="literal-block"># call &quot;netcat 10.10.1.1 4321&quot; on every TCP connection to 10.0.2.100:1234
# and connect the TCP stream to its stdin/stdout
qemu-system-x86_64 -nic  'user,id=n1,guestfwd=tcp:10.0.2.100:1234-cmd:netcat 10.10.1.1 4321'</pre>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">tap,id=id[,fd=h][,ifname=name][,script=file][,downscript=dfile][,br=bridge][,helper=helper]</span></code></dt><dd><p>Configure a host TAP network backend with ID id.</p>
<p>Use the network script file to configure it and the network script
dfile to deconfigure it. If name is not provided, the OS
automatically provides one. The default network configure script is
<code class="docutils literal notranslate"><span class="pre">/etc/qemu-ifup</span></code> and the default network deconfigure script is
<code class="docutils literal notranslate"><span class="pre">/etc/qemu-ifdown</span></code>. Use <code class="docutils literal notranslate"><span class="pre">script=no</span></code> or <code class="docutils literal notranslate"><span class="pre">downscript=no</span></code> to
disable script execution.</p>
<p>If running QEMU as an unprivileged user, use the network helper
to configure the TAP interface and attach it to the bridge.
The default network helper executable is
<code class="docutils literal notranslate"><span class="pre">/path/to/qemu-bridge-helper</span></code> and the default bridge device is
<code class="docutils literal notranslate"><span class="pre">br0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">fd</span></code>=h can be used to specify the handle of an already opened
host TAP interface.</p>
<p>Examples:</p>
<pre class="literal-block">#launch a QEMU instance with the default network script
qemu-system-x86_64 linux.img -nic tap</pre>
<pre class="literal-block">#launch a QEMU instance with two NICs, each one connected
#to a TAP device
qemu-system-x86_64 linux.img \
        -netdev tap,id=nd0,ifname=tap0 -device e1000,netdev=nd0 \
        -netdev tap,id=nd1,ifname=tap1 -device rtl8139,netdev=nd1</pre>
<pre class="literal-block">#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge br0
qemu-system-x86_64 linux.img -device virtio-net-pci,netdev=n1 \
        -netdev tap,id=n1,&quot;helper=/path/to/qemu-bridge-helper&quot;</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">bridge,id=id[,br=bridge][,helper=helper]</span></code></dt><dd><p>Connect a host TAP network interface to a host bridge device.</p>
<p>Use the network helper helper to configure the TAP interface and
attach it to the bridge. The default network helper executable is
<code class="docutils literal notranslate"><span class="pre">/path/to/qemu-bridge-helper</span></code> and the default bridge device is
<code class="docutils literal notranslate"><span class="pre">br0</span></code>.</p>
<p>Examples:</p>
<pre class="literal-block">#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge br0
qemu-system-x86_64 linux.img -netdev bridge,id=n1 -device virtio-net,netdev=n1</pre>
<pre class="literal-block">#launch a QEMU instance with the default network helper to
#connect a TAP device to bridge qemubr0
qemu-system-x86_64 linux.img -netdev bridge,br=qemubr0,id=n1 -device virtio-net,netdev=n1</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">socket,id=id[,fd=h][,listen=[host]:port][,connect=host:port]</span></code></dt><dd><p>This host network backend can be used to connect the guest’s network
to another QEMU virtual machine using a TCP socket connection. If
<code class="docutils literal notranslate"><span class="pre">listen</span></code> is specified, QEMU waits for incoming connections on port
(host is optional). <code class="docutils literal notranslate"><span class="pre">connect</span></code> is used to connect to another QEMU
instance using the <code class="docutils literal notranslate"><span class="pre">listen</span></code> option. <code class="docutils literal notranslate"><span class="pre">fd</span></code>=h specifies an
already opened TCP socket.</p>
<p>Example:</p>
<pre class="literal-block"># launch a first QEMU instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,listen=:1234
# connect the network of this instance to the network of the first instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n2,mac=52:54:00:12:34:57 \
                 -netdev socket,id=n2,connect=127.0.0.1:1234</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">socket,id=id[,fd=h][,mcast=maddr:port[,localaddr=addr]]</span></code></dt><dd><p>Configure a socket host network backend to share the guest’s network
traffic with another QEMU virtual machines using a UDP multicast
socket, effectively making a bus for every QEMU with same multicast
address maddr and port. NOTES:</p>
<ol class="arabic simple">
<li><p>Several QEMU can be running on different hosts and share same bus
(assuming correct multicast setup for these hosts).</p></li>
<li><p>mcast support is compatible with User Mode Linux (argument
<code class="docutils literal notranslate"><span class="pre">ethN=mcast</span></code>), see <a class="reference external" href="http://user-mode-linux.sf.net">http://user-mode-linux.sf.net</a>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">fd=h</span></code> to specify an already opened UDP multicast socket.</p></li>
</ol>
<p>Example:</p>
<pre class="literal-block"># launch one QEMU instance
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=230.0.0.1:1234
# launch another QEMU instance on same &quot;bus&quot;
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n2,mac=52:54:00:12:34:57 \
                 -netdev socket,id=n2,mcast=230.0.0.1:1234
# launch yet another QEMU instance on same &quot;bus&quot;
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n3,mac=52:54:00:12:34:58 \
                 -netdev socket,id=n3,mcast=230.0.0.1:1234</pre>
<p>Example (User Mode Linux compat.):</p>
<pre class="literal-block"># launch QEMU instance (note mcast address selected is UML's default)
qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=239.192.168.1:1102
# launch UML
/path/to/linux ubd0=/path/to/root_fs eth0=mcast</pre>
<p>Example (send packets from host’s 1.2.3.4):</p>
<pre class="literal-block">qemu-system-x86_64 linux.img \
                 -device e1000,netdev=n1,mac=52:54:00:12:34:56 \
                 -netdev socket,id=n1,mcast=239.192.168.1:1102,localaddr=1.2.3.4</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">l2tpv3,id=id,src=srcaddr,dst=dstaddr[,srcport=srcport][,dstport=dstport],txsession=txsession[,rxsession=rxsession][,ipv6=on|off][,udp=on|off][,cookie64][,counter][,pincounter][,txcookie=txcookie][,rxcookie=rxcookie][,offset=offset]</span></code></dt><dd><p>Configure a L2TPv3 pseudowire host network backend. L2TPv3 (RFC3931)
is a popular protocol to transport Ethernet (and other Layer 2) data
frames between two systems. It is present in routers, firewalls and
the Linux kernel (from version 3.3 onwards).</p>
<p>This transport allows a VM to communicate to another VM, router or
firewall directly.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">src=srcaddr</span></code></dt><dd><p>source address (mandatory)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dst=dstaddr</span></code></dt><dd><p>destination address (mandatory)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">udp</span></code></dt><dd><p>select udp encapsulation (default is ip).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">srcport=srcport</span></code></dt><dd><p>source udp port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dstport=dstport</span></code></dt><dd><p>destination udp port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ipv6</span></code></dt><dd><p>force v6, otherwise defaults to v4.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rxcookie=rxcookie</span></code>; <code class="docutils literal notranslate"><span class="pre">txcookie=txcookie</span></code></dt><dd><p>Cookies are a weak form of security in the l2tpv3 specification.
Their function is mostly to prevent misconfiguration. By default
they are 32 bit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cookie64</span></code></dt><dd><p>Set cookie size to 64 bit instead of the default 32</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">counter=off</span></code></dt><dd><p>Force a ‘cut-down’ L2TPv3 with no counter as in
draft-mkonstan-l2tpext-keyed-ipv6-tunnel-00</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pincounter=on</span></code></dt><dd><p>Work around broken counter handling in peer. This may also help
on networks which have packet reorder.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">offset=offset</span></code></dt><dd><p>Add an extra offset between header and data</p>
</dd>
</dl>
<p>For example, to attach a VM running on host 4.3.2.1 via L2TPv3 to
the bridge br-lan on the remote Linux host 1.2.3.4:</p>
<pre class="literal-block"># Setup tunnel on linux host using raw ip as encapsulation
# on 1.2.3.4
ip l2tp add tunnel remote 4.3.2.1 local 1.2.3.4 tunnel_id 1 peer_tunnel_id 1 \
    encap udp udp_sport 16384 udp_dport 16384
ip l2tp add session tunnel_id 1 name vmtunnel0 session_id \
    0xFFFFFFFF peer_session_id 0xFFFFFFFF
ifconfig vmtunnel0 mtu 1500
ifconfig vmtunnel0 up
brctl addif br-lan vmtunnel0


# on 4.3.2.1
# launch QEMU instance - if your network has reorder or is very lossy add ,pincounter

qemu-system-x86_64 linux.img -device e1000,netdev=n1 \
    -netdev l2tpv3,id=n1,src=4.2.3.1,dst=1.2.3.4,udp,srcport=16384,dstport=16384,rxsession=0xffffffff,txsession=0xffffffff,counter</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">vde,id=id[,sock=socketpath][,port=n][,group=groupname][,mode=octalmode]</span></code></dt><dd><p>Configure VDE backend to connect to PORT n of a vde switch running
on host and listening for incoming connections on socketpath. Use
GROUP groupname and MODE octalmode to change default ownership and
permissions for communication port. This option is only available if
QEMU has been compiled with vde support enabled.</p>
<p>Example:</p>
<pre class="literal-block"># launch vde switch
vde_switch -F -sock /tmp/myswitch
# launch QEMU instance
qemu-system-x86_64 linux.img -nic vde,sock=/tmp/myswitch</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">vhost-user,chardev=id[,vhostforce=on|off][,queues=n]</span></code></dt><dd><p>Establish a vhost-user netdev, backed by a chardev id. The chardev
should be a unix domain socket backed one. The vhost-user uses a
specifically defined protocol to pass vhost ioctl replacement
messages to an application on the other end of the socket. On
non-MSIX guests, the feature can be forced with vhostforce. Use
‘queues=n’ to specify the number of queues to be created for
multiqueue vhost-user.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qemu</span> <span class="o">-</span><span class="n">m</span> <span class="mi">512</span> <span class="o">-</span><span class="nb">object</span> <span class="n">memory</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">file</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">mem</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span><span class="p">,</span><span class="n">mem</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">hugetlbfs</span><span class="p">,</span><span class="n">share</span><span class="o">=</span><span class="n">on</span> \
     <span class="o">-</span><span class="n">numa</span> <span class="n">node</span><span class="p">,</span><span class="n">memdev</span><span class="o">=</span><span class="n">mem</span> \
     <span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">chr0</span><span class="p">,</span><span class="n">path</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">socket</span> \
     <span class="o">-</span><span class="n">netdev</span> <span class="nb">type</span><span class="o">=</span><span class="n">vhost</span><span class="o">-</span><span class="n">user</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">net0</span><span class="p">,</span><span class="n">chardev</span><span class="o">=</span><span class="n">chr0</span> \
     <span class="o">-</span><span class="n">device</span> <span class="n">virtio</span><span class="o">-</span><span class="n">net</span><span class="o">-</span><span class="n">pci</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">net0</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">vhost-vdpa[,vhostdev=/path/to/dev][,vhostfd=h]</span></code></dt><dd><p>Establish a vhost-vdpa netdev.</p>
<p>vDPA device is a device that uses a datapath which complies with
the virtio specifications with a vendor specific control path.
vDPA devices can be both physically located on the hardware or
emulated by software.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-netdev</span> <span class="pre">hubport,id=id,hubid=hubid[,netdev=nd]</span></code></dt><dd><p>Create a hub port on the emulated hub with ID hubid.</p>
<p>The hubport netdev lets you connect a NIC to a QEMU emulated hub
instead of a single netdev. Alternatively, you can also connect the
hubport to another netdev with ID nd by using the <code class="docutils literal notranslate"><span class="pre">netdev=nd</span></code>
option.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-net</span> <span class="pre">nic[,netdev=nd][,macaddr=mac][,model=type]</span> <span class="pre">[,name=name][,addr=addr][,vectors=v]</span></code></dt><dd><p>Legacy option to configure or create an on-board (or machine
default) Network Interface Card(NIC) and connect it either to the
emulated hub with ID 0 (i.e. the default hub), or to the netdev nd.
If model is omitted, then the default NIC model associated with the
machine type is used. Note that the default NIC model may change in
future QEMU releases, so it is highly recommended to always specify
a model. Optionally, the MAC address can be changed to mac, the
device address set to addr (PCI cards only), and a name can be
assigned for use in monitor commands. Optionally, for PCI cards, you
can specify the number v of MSI-X vectors that the card should have;
this option currently only affects virtio cards; set v = 0 to
disable MSI-X. If no <code class="docutils literal notranslate"><span class="pre">-net</span></code> option is specified, a single NIC is
created. QEMU can emulate several different models of network card.
Use <code class="docutils literal notranslate"><span class="pre">-net</span> <span class="pre">nic,model=help</span></code> for a list of available devices for your
target.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-net</span> <span class="pre">user|tap|bridge|socket|l2tpv3|vde[,...][,name=name]</span></code></dt><dd><p>Configure a host network backend (with the options corresponding to
the same <code class="docutils literal notranslate"><span class="pre">-netdev</span></code> option) and connect it to the emulated hub 0
(the default hub). Use name to specify the name of the hub port.</p>
</dd>
</dl>
</section>
<section id="hxtool-6">
<h2>Character device options<a class="headerlink" href="#hxtool-6" title="Permalink to this heading"></a></h2>
<p>The general form of a character device option is:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">backend,id=id[,mux=on|off][,options]</span></code></dt><dd><p>Backend is one of: <code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">socket</span></code>, <code class="docutils literal notranslate"><span class="pre">udp</span></code>, <code class="docutils literal notranslate"><span class="pre">msmouse</span></code>,
<code class="docutils literal notranslate"><span class="pre">vc</span></code>, <code class="docutils literal notranslate"><span class="pre">ringbuf</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code>, <code class="docutils literal notranslate"><span class="pre">pipe</span></code>, <code class="docutils literal notranslate"><span class="pre">console</span></code>, <code class="docutils literal notranslate"><span class="pre">serial</span></code>,
<code class="docutils literal notranslate"><span class="pre">pty</span></code>, <code class="docutils literal notranslate"><span class="pre">stdio</span></code>, <code class="docutils literal notranslate"><span class="pre">braille</span></code>, <code class="docutils literal notranslate"><span class="pre">tty</span></code>, <code class="docutils literal notranslate"><span class="pre">parallel</span></code>, <code class="docutils literal notranslate"><span class="pre">parport</span></code>,
<code class="docutils literal notranslate"><span class="pre">spicevmc</span></code>, <code class="docutils literal notranslate"><span class="pre">spiceport</span></code>. The specific backend will determine the
applicable options.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">help</span></code> to print all available chardev backend types.</p>
<p>All devices must have an id, which can be any string up to 127
characters long. It is used to uniquely identify this device in
other command line directives.</p>
<p>A character device may be used in multiplexing mode by multiple
front-ends. Specify <code class="docutils literal notranslate"><span class="pre">mux=on</span></code> to enable this mode. A multiplexer is
a “1:N” device, and here the “1” end is your specified chardev
backend, and the “N” end is the various parts of QEMU that can talk
to a chardev. If you create a chardev with <code class="docutils literal notranslate"><span class="pre">id=myid</span></code> and
<code class="docutils literal notranslate"><span class="pre">mux=on</span></code>, QEMU will create a multiplexer with your specified ID,
and you can then configure multiple front ends to use that chardev
ID for their input/output. Up to four different front ends can be
connected to a single multiplexed chardev. (Without multiplexing
enabled, a chardev can only be used by a single front end.) For
instance you could use this to allow a single stdio chardev to be
used by two serial ports and the QEMU monitor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">chardev</span> <span class="n">stdio</span><span class="p">,</span><span class="n">mux</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">char0</span> \
<span class="o">-</span><span class="n">mon</span> <span class="n">chardev</span><span class="o">=</span><span class="n">char0</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">readline</span> \
<span class="o">-</span><span class="n">serial</span> <span class="n">chardev</span><span class="p">:</span><span class="n">char0</span> \
<span class="o">-</span><span class="n">serial</span> <span class="n">chardev</span><span class="p">:</span><span class="n">char0</span>
</pre></div>
</div>
<p>You can have more than one multiplexer in a system configuration;
for instance you could have a TCP port multiplexed between UART 0
and UART 1, and stdio multiplexed between the QEMU monitor and a
parallel port:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">chardev</span> <span class="n">stdio</span><span class="p">,</span><span class="n">mux</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">char0</span> \
<span class="o">-</span><span class="n">mon</span> <span class="n">chardev</span><span class="o">=</span><span class="n">char0</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="n">readline</span> \
<span class="o">-</span><span class="n">parallel</span> <span class="n">chardev</span><span class="p">:</span><span class="n">char0</span> \
<span class="o">-</span><span class="n">chardev</span> <span class="n">tcp</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">mux</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">char1</span> \
<span class="o">-</span><span class="n">serial</span> <span class="n">chardev</span><span class="p">:</span><span class="n">char1</span> \
<span class="o">-</span><span class="n">serial</span> <span class="n">chardev</span><span class="p">:</span><span class="n">char1</span>
</pre></div>
</div>
<p>When you’re using a multiplexed character device, some escape
sequences are interpreted in the input. See the chapter about
<a class="reference internal" href="mux-chardev.html#keys-in-the-character-backend-multiplexer"><span class="std std-ref">Keys in the character backend multiplexer</span></a> in the
System Emulation Users Guide for more details.</p>
<p>Note that some other command line options may implicitly create
multiplexed character backends; for instance <code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">mon:stdio</span></code>
creates a multiplexed stdio backend connected to the serial port and
the QEMU monitor, and <code class="docutils literal notranslate"><span class="pre">-nographic</span></code> also multiplexes the console
and the monitor to stdio.</p>
<p>There is currently no support for multiplexing in the other
direction (where a single QEMU front end takes input and output from
multiple chardevs).</p>
<p>Every backend supports the <code class="docutils literal notranslate"><span class="pre">logfile</span></code> option, which supplies the
path to a file to record all data transmitted via the backend. The
<code class="docutils literal notranslate"><span class="pre">logappend</span></code> option controls whether the log file will be truncated
or appended to when opened.</p>
</dd>
</dl>
<p>The available backends are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">null,id=id</span></code></dt><dd><p>A void device. This device will not emit any data, and will drop any
data it receives. The null backend does not take any options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">socket,id=id[,TCP</span> <span class="pre">options</span> <span class="pre">or</span> <span class="pre">unix</span> <span class="pre">options][,server=on|off][,wait=on|off][,telnet=on|off][,websocket=on|off][,reconnect=seconds][,tls-creds=id][,tls-authz=id]</span></code></dt><dd><p>Create a two-way stream socket, which can be either a TCP or a unix
socket. A unix socket will be created if <code class="docutils literal notranslate"><span class="pre">path</span></code> is specified.
Behaviour is undefined if TCP options are specified for a unix
socket.</p>
<p><code class="docutils literal notranslate"><span class="pre">server=on|off</span></code> specifies that the socket shall be a listening socket.</p>
<p><code class="docutils literal notranslate"><span class="pre">wait=on|off</span></code> specifies that QEMU should not block waiting for a client
to connect to a listening socket.</p>
<p><code class="docutils literal notranslate"><span class="pre">telnet=on|off</span></code> specifies that traffic on the socket should interpret
telnet escape sequences.</p>
<p><code class="docutils literal notranslate"><span class="pre">websocket=on|off</span></code> specifies that the socket uses WebSocket protocol for
communication.</p>
<p><code class="docutils literal notranslate"><span class="pre">reconnect</span></code> sets the timeout for reconnecting on non-server
sockets when the remote end goes away. qemu will delay this many
seconds and then attempt to reconnect. Zero disables reconnecting,
and is the default.</p>
<p><code class="docutils literal notranslate"><span class="pre">tls-creds</span></code> requests enablement of the TLS protocol for
encryption, and specifies the id of the TLS credentials to use for
the handshake. The credentials must be previously created with the
<code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-creds</span></code> argument.</p>
<p><code class="docutils literal notranslate"><span class="pre">tls-auth</span></code> provides the ID of the QAuthZ authorization object
against which the client’s x509 distinguished name will be
validated. This object is only resolved at time of use, so can be
deleted and recreated on the fly while the chardev server is active.
If missing, it will default to denying access.</p>
<p>TCP and unix socket options are given below:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">TCP</span> <span class="pre">options:</span> <span class="pre">port=port[,host=host][,to=to][,ipv4=on|off][,ipv6=on|off][,nodelay=on|off]</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">host</span></code> for a listening socket specifies the local address to
be bound. For a connecting socket species the remote host to
connect to. <code class="docutils literal notranslate"><span class="pre">host</span></code> is optional for listening sockets. If not
specified it defaults to <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">port</span></code> for a listening socket specifies the local port to be
bound. For a connecting socket specifies the port on the remote
host to connect to. <code class="docutils literal notranslate"><span class="pre">port</span></code> can be given as either a port
number or a service name. <code class="docutils literal notranslate"><span class="pre">port</span></code> is required.</p>
<p><code class="docutils literal notranslate"><span class="pre">to</span></code> is only relevant to listening sockets. If it is
specified, and <code class="docutils literal notranslate"><span class="pre">port</span></code> cannot be bound, QEMU will attempt to
bind to subsequent ports up to and including <code class="docutils literal notranslate"><span class="pre">to</span></code> until it
succeeds. <code class="docutils literal notranslate"><span class="pre">to</span></code> must be specified as a port number.</p>
<p><code class="docutils literal notranslate"><span class="pre">ipv4=on|off</span></code> and <code class="docutils literal notranslate"><span class="pre">ipv6=on|off</span></code> specify that either IPv4
or IPv6 must be used. If neither is specified the socket may
use either protocol.</p>
<p><code class="docutils literal notranslate"><span class="pre">nodelay=on|off</span></code> disables the Nagle algorithm.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unix</span> <span class="pre">options:</span> <span class="pre">path=path[,abstract=on|off][,tight=on|off]</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the local path of the unix socket. <code class="docutils literal notranslate"><span class="pre">path</span></code>
is required.
<code class="docutils literal notranslate"><span class="pre">abstract=on|off</span></code> specifies the use of the abstract socket namespace,
rather than the filesystem.  Optional, defaults to false.
<code class="docutils literal notranslate"><span class="pre">tight=on|off</span></code> sets the socket length of abstract sockets to their minimum,
rather than the full sun_path length.  Optional, defaults to true.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">udp,id=id[,host=host],port=port[,localaddr=localaddr][,localport=localport][,ipv4=on|off][,ipv6=on|off]</span></code></dt><dd><p>Sends all traffic from the guest to a remote host over UDP.</p>
<p><code class="docutils literal notranslate"><span class="pre">host</span></code> specifies the remote host to connect to. If not specified
it defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">port</span></code> specifies the port on the remote host to connect to.
<code class="docutils literal notranslate"><span class="pre">port</span></code> is required.</p>
<p><code class="docutils literal notranslate"><span class="pre">localaddr</span></code> specifies the local address to bind to. If not
specified it defaults to <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">localport</span></code> specifies the local port to bind to. If not specified
any available local port will be used.</p>
<p><code class="docutils literal notranslate"><span class="pre">ipv4=on|off</span></code> and <code class="docutils literal notranslate"><span class="pre">ipv6=on|off</span></code> specify that either IPv4 or IPv6 must be used.
If neither is specified the device may use either protocol.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">msmouse,id=id</span></code></dt><dd><p>Forward QEMU’s emulated msmouse events to the guest. <code class="docutils literal notranslate"><span class="pre">msmouse</span></code>
does not take any options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">vc,id=id[[,width=width][,height=height]][[,cols=cols][,rows=rows]]</span></code></dt><dd><p>Connect to a QEMU text console. <code class="docutils literal notranslate"><span class="pre">vc</span></code> may optionally be given a
specific size.</p>
<p><code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> specify the width and height respectively
of the console, in pixels.</p>
<p><code class="docutils literal notranslate"><span class="pre">cols</span></code> and <code class="docutils literal notranslate"><span class="pre">rows</span></code> specify that the console be sized to fit a
text console with the given dimensions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">ringbuf,id=id[,size=size]</span></code></dt><dd><p>Create a ring buffer with fixed size <code class="docutils literal notranslate"><span class="pre">size</span></code>. size must be a power
of two and defaults to <code class="docutils literal notranslate"><span class="pre">64K</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">file,id=id,path=path</span></code></dt><dd><p>Log all traffic received from the guest to a file.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the path of the file to be opened. This file will
be created if it does not already exist, and overwritten if it does.
<code class="docutils literal notranslate"><span class="pre">path</span></code> is required.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">pipe,id=id,path=path</span></code></dt><dd><p>Create a two-way connection to the guest. The behaviour differs
slightly between Windows hosts and other hosts:</p>
<p>On Windows, a single duplex pipe will be created at
<code class="docutils literal notranslate"><span class="pre">\\.pipe\path</span></code>.</p>
<p>On other hosts, 2 pipes will be created called <code class="docutils literal notranslate"><span class="pre">path.in</span></code> and
<code class="docutils literal notranslate"><span class="pre">path.out</span></code>. Data written to <code class="docutils literal notranslate"><span class="pre">path.in</span></code> will be received by the
guest. Data written by the guest can be read from <code class="docutils literal notranslate"><span class="pre">path.out</span></code>. QEMU
will not create these fifos, and requires them to be present.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> forms part of the pipe path as described above. <code class="docutils literal notranslate"><span class="pre">path</span></code> is
required.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">console,id=id</span></code></dt><dd><p>Send traffic from the guest to QEMU’s standard output. <code class="docutils literal notranslate"><span class="pre">console</span></code>
does not take any options.</p>
<p><code class="docutils literal notranslate"><span class="pre">console</span></code> is only available on Windows hosts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">serial,id=id,path=path</span></code></dt><dd><p>Send traffic from the guest to a serial device on the host.</p>
<p>On Unix hosts serial will actually accept any tty device, not only
serial lines.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the name of the serial device to open.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">pty,id=id</span></code></dt><dd><p>Create a new pseudo-terminal on the host and connect to it. <code class="docutils literal notranslate"><span class="pre">pty</span></code>
does not take any options.</p>
<p><code class="docutils literal notranslate"><span class="pre">pty</span></code> is not available on Windows hosts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">stdio,id=id[,signal=on|off]</span></code></dt><dd><p>Connect to standard input and standard output of the QEMU process.</p>
<p><code class="docutils literal notranslate"><span class="pre">signal</span></code> controls if signals are enabled on the terminal, that
includes exiting QEMU with the key sequence Control-c. This option
is enabled by default, use <code class="docutils literal notranslate"><span class="pre">signal=off</span></code> to disable it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">braille,id=id</span></code></dt><dd><p>Connect to a local BrlAPI server. <code class="docutils literal notranslate"><span class="pre">braille</span></code> does not take any
options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">tty,id=id,path=path</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">tty</span></code> is only available on Linux, Sun, FreeBSD, NetBSD, OpenBSD
and DragonFlyBSD hosts. It is an alias for <code class="docutils literal notranslate"><span class="pre">serial</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the path to the tty. <code class="docutils literal notranslate"><span class="pre">path</span></code> is required.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">parallel,id=id,path=path</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">parport,id=id,path=path</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">parallel</span></code> is only available on Linux, FreeBSD and DragonFlyBSD
hosts.</p>
<p>Connect to a local parallel port.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the path to the parallel port device. <code class="docutils literal notranslate"><span class="pre">path</span></code> is
required.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">spicevmc,id=id,debug=debug,name=name</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">spicevmc</span></code> is only available when spice support is built in.</p>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code> debug level for spicevmc</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> name of spice channel to connect to</p>
<p>Connect to a spice virtual machine channel, such as vdiport.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chardev</span> <span class="pre">spiceport,id=id,debug=debug,name=name</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">spiceport</span></code> is only available when spice support is built in.</p>
<p><code class="docutils literal notranslate"><span class="pre">debug</span></code> debug level for spicevmc</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> name of spice port to connect to</p>
<p>Connect to a spice port, allowing a Spice client to handle the
traffic identified by a name (preferably a fqdn).</p>
</dd>
</dl>
</section>
<section id="hxtool-7">
<h2>TPM device options<a class="headerlink" href="#hxtool-7" title="Permalink to this heading"></a></h2>
<p>The general form of a TPM device option is:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-tpmdev</span> <span class="pre">backend,id=id[,options]</span></code></dt><dd><p>The specific backend type will determine the applicable options. The
<code class="docutils literal notranslate"><span class="pre">-tpmdev</span></code> option creates the TPM backend and requires a
<code class="docutils literal notranslate"><span class="pre">-device</span></code> option that specifies the TPM frontend interface model.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">-tpmdev</span> <span class="pre">help</span></code> to print all available TPM backend types.</p>
</dd>
</dl>
<p>The available backends are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-tpmdev</span> <span class="pre">passthrough,id=id,path=path,cancel-path=cancel-path</span></code></dt><dd><p>(Linux-host only) Enable access to the host’s TPM using the
passthrough driver.</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> specifies the path to the host’s TPM device, i.e., on a
Linux host this would be <code class="docutils literal notranslate"><span class="pre">/dev/tpm0</span></code>. <code class="docutils literal notranslate"><span class="pre">path</span></code> is optional and by
default <code class="docutils literal notranslate"><span class="pre">/dev/tpm0</span></code> is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">cancel-path</span></code> specifies the path to the host TPM device’s sysfs
entry allowing for cancellation of an ongoing TPM command.
<code class="docutils literal notranslate"><span class="pre">cancel-path</span></code> is optional and by default QEMU will search for the
sysfs entry to use.</p>
<p>Some notes about using the host’s TPM with the passthrough driver:</p>
<p>The TPM device accessed by the passthrough driver must not be used
by any other application on the host.</p>
<p>Since the host’s firmware (BIOS/UEFI) has already initialized the
TPM, the VM’s firmware (BIOS/UEFI) will not be able to initialize
the TPM again and may therefore not show a TPM-specific menu that
would otherwise allow the user to configure the TPM, e.g., allow the
user to enable/disable or activate/deactivate the TPM. Further, if
TPM ownership is released from within a VM then the host’s TPM will
get disabled and deactivated. To enable and activate the TPM again
afterwards, the host has to be rebooted and the user is required to
enter the firmware’s menu to enable and activate the TPM. If the TPM
is left disabled and/or deactivated most TPM commands will fail.</p>
<p>To create a passthrough TPM use the following two options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">tpmdev</span> <span class="n">passthrough</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">tpm0</span> <span class="o">-</span><span class="n">device</span> <span class="n">tpm</span><span class="o">-</span><span class="n">tis</span><span class="p">,</span><span class="n">tpmdev</span><span class="o">=</span><span class="n">tpm0</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">-tpmdev</span></code> id is <code class="docutils literal notranslate"><span class="pre">tpm0</span></code> and is referenced by
<code class="docutils literal notranslate"><span class="pre">tpmdev=tpm0</span></code> in the device option.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-tpmdev</span> <span class="pre">emulator,id=id,chardev=dev</span></code></dt><dd><p>(Linux-host only) Enable access to a TPM emulator using Unix domain
socket based chardev backend.</p>
<p><code class="docutils literal notranslate"><span class="pre">chardev</span></code> specifies the unique ID of a character device backend
that provides connection to the software TPM server.</p>
<p>To create a TPM emulator backend device with chardev socket backend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">chrtpm</span><span class="p">,</span><span class="n">path</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">swtpm</span><span class="o">-</span><span class="n">sock</span> <span class="o">-</span><span class="n">tpmdev</span> <span class="n">emulator</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">tpm0</span><span class="p">,</span><span class="n">chardev</span><span class="o">=</span><span class="n">chrtpm</span> <span class="o">-</span><span class="n">device</span> <span class="n">tpm</span><span class="o">-</span><span class="n">tis</span><span class="p">,</span><span class="n">tpmdev</span><span class="o">=</span><span class="n">tpm0</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="hxtool-8">
<h2>Boot Image or Kernel specific<a class="headerlink" href="#hxtool-8" title="Permalink to this heading"></a></h2>
<p>There are broadly 4 ways you can boot a system with QEMU.</p>
<blockquote>
<div><ul class="simple">
<li><p>specify a firmware and let it control finding a kernel</p></li>
<li><p>specify a firmware and pass a hint to the kernel to boot</p></li>
<li><p>direct kernel image boot</p></li>
<li><p>manually load files into the guest’s address space</p></li>
</ul>
</div></blockquote>
<p>The third method is useful for quickly testing kernels but as there is
no firmware to pass configuration information to the kernel the
hardware must either be probeable, the kernel built for the exact
configuration or passed some configuration data (e.g. a DTB blob)
which tells the kernel what drivers it needs. This exact details are
often hardware specific.</p>
<p>The final method is the most generic way of loading images into the
guest address space and used mostly for <code class="docutils literal notranslate"><span class="pre">bare</span> <span class="pre">metal</span></code> type
development where the reset vectors of the processor are taken into
account.</p>
<p>For x86 machines and some other architectures <code class="docutils literal notranslate"><span class="pre">-bios</span></code> will generally
do the right thing with whatever it is given. For other machines the
more strict <code class="docutils literal notranslate"><span class="pre">-pflash</span></code> option needs an image that is sized for the
flash device for the given machine type.</p>
<p>Please see the <a class="reference internal" href="targets.html#system-targets-ref"><span class="std std-ref">QEMU System Emulator Targets</span></a> section of the manual for
more detailed documentation.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">file</span></code></dt><dd><p>Set the filename for the BIOS.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-pflash</span> <span class="pre">file</span></code></dt><dd><p>Use file as a parallel flash image.</p>
</dd>
</dl>
<p>The kernel options were designed to work with Linux kernels although
other things (like hypervisors) can be packaged up as a kernel
executable image. The exact format of a executable image is usually
architecture specific.</p>
<p>The way in which the kernel is started (what address it is loaded at,
what if any information is passed to it via CPU registers, the state
of the hardware when it is started, and so on) is also architecture
specific. Typically it follows the specification laid down by the
Linux kernel for how kernels for that architecture must be started.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-kernel</span> <span class="pre">bzImage</span></code></dt><dd><p>Use bzImage as kernel image. The kernel can be either a Linux kernel
or in multiboot format.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-append</span> <span class="pre">cmdline</span></code></dt><dd><p>Use cmdline as kernel command line</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-initrd</span> <span class="pre">file</span></code></dt><dd><p>Use file as initial ram disk.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-initrd</span> <span class="pre">&quot;file1</span> <span class="pre">arg=foo,file2&quot;</span></code></dt><dd><p>This syntax is only available with multiboot.</p>
<p>Use file1 and file2 as modules and pass arg=foo as parameter to the
first module.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-dtb</span> <span class="pre">file</span></code></dt><dd><p>Use file as a device tree binary (dtb) image and pass it to the
kernel on boot.</p>
</dd>
</dl>
<p>Finally you can also manually load images directly into the address
space of the guest. This is most useful for developers who already
know the layout of their guest and take care to ensure something sane
will happen when the reset vector executes.</p>
<p>The generic loader can be invoked by using the loader device:</p>
<p><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">loader,addr=&lt;addr&gt;,data=&lt;data&gt;,data-len=&lt;data-len&gt;[,data-be=&lt;data-be&gt;][,cpu-num=&lt;cpu-num&gt;]</span></code></p>
<p>there is also the guest loader which operates in a similar way but
tweaks the DTB so a hypervisor loaded via <code class="docutils literal notranslate"><span class="pre">-kernel</span></code> can find where
the guest image is:</p>
<p><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">guest-loader,addr=&lt;addr&gt;[,kernel=&lt;path&gt;,[bootargs=&lt;arguments&gt;]][,initrd=&lt;path&gt;]</span></code></p>
</section>
<section id="hxtool-9">
<h2>Debug/Expert options<a class="headerlink" href="#hxtool-9" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-compat</span> <span class="pre">[deprecated-input=&#64;var{input-policy}][,deprecated-output=&#64;var{output-policy}]</span></code></dt><dd><p>Set policy for handling deprecated management interfaces (experimental):</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">deprecated-input=accept</span></code> (default)</dt><dd><p>Accept deprecated commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deprecated-input=reject</span></code></dt><dd><p>Reject deprecated commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deprecated-input=crash</span></code></dt><dd><p>Crash on deprecated commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deprecated-output=accept</span></code> (default)</dt><dd><p>Emit deprecated command results and events</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deprecated-output=hide</span></code></dt><dd><p>Suppress deprecated command results and events</p>
</dd>
</dl>
<p>Limitation: covers only syntactic aspects of QMP.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-compat</span> <span class="pre">[unstable-input=&#64;var{input-policy}][,unstable-output=&#64;var{output-policy}]</span></code></dt><dd><p>Set policy for handling unstable management interfaces (experimental):</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">unstable-input=accept</span></code> (default)</dt><dd><p>Accept unstable commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unstable-input=reject</span></code></dt><dd><p>Reject unstable commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unstable-input=crash</span></code></dt><dd><p>Crash on unstable commands and arguments</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unstable-output=accept</span></code> (default)</dt><dd><p>Emit unstable command results and events</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unstable-output=hide</span></code></dt><dd><p>Suppress unstable command results and events</p>
</dd>
</dl>
<p>Limitation: covers only syntactic aspects of QMP.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fw_cfg</span> <span class="pre">[name=]name,file=file</span></code></dt><dd><p>Add named fw_cfg entry with contents from file file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-fw_cfg</span> <span class="pre">[name=]name,string=str</span></code></dt><dd><p>Add named fw_cfg entry with contents from string str.</p>
<p>The terminating NUL character of the contents of str will not be
included as part of the fw_cfg item data. To insert contents with
embedded NUL characters, you have to use the file parameter.</p>
<p>The fw_cfg entries are passed by QEMU through to the guest.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">fw_cfg</span> <span class="n">name</span><span class="o">=</span><span class="n">opt</span><span class="o">/</span><span class="n">com</span><span class="o">.</span><span class="n">mycompany</span><span class="o">/</span><span class="n">blob</span><span class="p">,</span><span class="n">file</span><span class="o">=./</span><span class="n">my_blob</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>creates an fw_cfg entry named opt/com.mycompany/blob with contents
from ./my_blob.bin.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">dev</span></code></dt><dd><p>Redirect the virtual serial port to host character device dev. The
default device is <code class="docutils literal notranslate"><span class="pre">vc</span></code> in graphical mode and <code class="docutils literal notranslate"><span class="pre">stdio</span></code> in non
graphical mode.</p>
<p>This option can be used several times to simulate up to 4 serial
ports.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">none</span></code> to disable all serial ports.</p>
<p>Available character devices are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">vc[:WxH]</span></code></dt><dd><p>Virtual console. Optionally, a width and height can be given in
pixel with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vc</span><span class="p">:</span><span class="mi">800</span><span class="n">x600</span>
</pre></div>
</div>
<p>It is also possible to specify width or height in characters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vc</span><span class="p">:</span><span class="mi">80</span><span class="n">Cx24C</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pty</span></code></dt><dd><p>[Linux only] Pseudo TTY (a new PTY is automatically allocated)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>No device is allocated.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">null</span></code></dt><dd><p>void device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chardev:id</span></code></dt><dd><p>Use a named character device defined with the <code class="docutils literal notranslate"><span class="pre">-chardev</span></code>
option.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">/dev/XXX</span></code></dt><dd><p>[Linux only] Use host tty, e.g. <code class="docutils literal notranslate"><span class="pre">/dev/ttyS0</span></code>. The host serial
port parameters are set according to the emulated ones.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">/dev/parportN</span></code></dt><dd><p>[Linux only, parallel port only] Use host parallel port N.
Currently SPP and EPP parallel port features can be used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file:filename</span></code></dt><dd><p>Write output to filename. No character can be read.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stdio</span></code></dt><dd><p>[Unix only] standard input/output</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pipe:filename</span></code></dt><dd><p>name pipe filename</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMn</span></code></dt><dd><p>[Windows only] Use host serial port n</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">udp:[remote_host]:remote_port[&#64;[src_ip]:src_port]</span></code></dt><dd><p>This implements UDP Net Console. When remote_host or src_ip
are not specified they default to <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>. When not using a
specified src_port a random port is automatically chosen.</p>
<p>If you just want a simple readonly console you can use
<code class="docutils literal notranslate"><span class="pre">netcat</span></code> or <code class="docutils literal notranslate"><span class="pre">nc</span></code>, by starting QEMU with:
<code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">udp::4555</span></code> and nc as: <code class="docutils literal notranslate"><span class="pre">nc</span> <span class="pre">-u</span> <span class="pre">-l</span> <span class="pre">-p</span> <span class="pre">4555</span></code>. Any time
QEMU writes something to that port it will appear in the
netconsole session.</p>
<p>If you plan to send characters back via netconsole or you want
to stop and start QEMU a lot of times, you should have QEMU use
the same source port each time by using something like <code class="docutils literal notranslate"><span class="pre">-serial</span>
<span class="pre">udp::4555&#64;:4556</span></code> to QEMU. Another approach is to use a patched
version of netcat which can listen to a TCP port and send and
receive characters via udp. If you have a patched version of
netcat which activates telnet remote echo and single char
transfer, then you can use the following options to set up a
netcat redirector to allow telnet on port 5555 to access the
QEMU port.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QEMU</span> <span class="pre">Options:</span></code></dt><dd><p>-serial udp::4555&#64;:4556</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">netcat</span> <span class="pre">options:</span></code></dt><dd><p>-u -P 4555 -L 0.0.0.0:4556 -t -p 5555 -I -T</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">telnet</span> <span class="pre">options:</span></code></dt><dd><p>localhost 5555</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tcp:[host]:port[,server=on|off][,wait=on|off][,nodelay=on|off][,reconnect=seconds]</span></code></dt><dd><p>The TCP Net Console has two modes of operation. It can send the
serial I/O to a location or wait for a connection from a
location. By default the TCP Net Console is sent to host at the
port. If you use the <code class="docutils literal notranslate"><span class="pre">server=on</span></code> option QEMU will wait for a client
socket application to connect to the port before continuing,
unless the <code class="docutils literal notranslate"><span class="pre">wait=on|off</span></code> option was specified. The <code class="docutils literal notranslate"><span class="pre">nodelay=on|off</span></code>
option disables the Nagle buffering algorithm. The <code class="docutils literal notranslate"><span class="pre">reconnect=on</span></code>
option only applies if <code class="docutils literal notranslate"><span class="pre">server=no</span></code> is set, if the connection goes
down it will attempt to reconnect at the given interval. If host
is omitted, 0.0.0.0 is assumed. Only one TCP connection at a
time is accepted. You can use <code class="docutils literal notranslate"><span class="pre">telnet=on</span></code> to connect to the
corresponding character device.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">to</span> <span class="pre">send</span> <span class="pre">tcp</span> <span class="pre">console</span> <span class="pre">to</span> <span class="pre">192.168.0.2</span> <span class="pre">port</span> <span class="pre">4444</span></code></dt><dd><p>-serial <a class="reference external" href="tcp:192.168.0.2:4444">tcp:192.168.0.2:4444</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">to</span> <span class="pre">listen</span> <span class="pre">and</span> <span class="pre">wait</span> <span class="pre">on</span> <span class="pre">port</span> <span class="pre">4444</span> <span class="pre">for</span> <span class="pre">connection</span></code></dt><dd><p>-serial <a class="reference external" href="tcp::4444,server=on">tcp::4444,server=on</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">to</span> <span class="pre">not</span> <span class="pre">wait</span> <span class="pre">and</span> <span class="pre">listen</span> <span class="pre">on</span> <span class="pre">ip</span> <span class="pre">192.168.0.100</span> <span class="pre">port</span> <span class="pre">4444</span></code></dt><dd><p>-serial <a class="reference external" href="tcp:192.168.0.100:4444,server=on,wait=off">tcp:192.168.0.100:4444,server=on,wait=off</a></p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">telnet:host:port[,server=on|off][,wait=on|off][,nodelay=on|off]</span></code></dt><dd><p>The telnet protocol is used instead of raw tcp sockets. The
options work the same as if you had specified <code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">tcp</span></code>.
The difference is that the port acts like a telnet server or
client using telnet option negotiation. This will also allow you
to send the MAGIC_SYSRQ sequence if you use a telnet that
supports sending the break sequence. Typically in unix telnet
you do it with Control-] and then type “send break” followed by
pressing the enter key.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">websocket:host:port,server=on[,wait=on|off][,nodelay=on|off]</span></code></dt><dd><p>The WebSocket protocol is used instead of raw tcp socket. The
port acts as a WebSocket server. Client mode is not supported.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unix:path[,server=on|off][,wait=on|off][,reconnect=seconds]</span></code></dt><dd><p>A unix domain socket is used instead of a tcp socket. The option
works the same as if you had specified <code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">tcp</span></code> except
the unix domain socket path is used for connections.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mon:dev_string</span></code></dt><dd><p>This is a special option to allow the monitor to be multiplexed
onto another serial port. The monitor is accessed with key
sequence of Control-a and then pressing c. dev_string should be
any one of the serial devices specified above. An example to
multiplex the monitor onto a telnet server listening on port
4444 would be:</p>
<p><code class="docutils literal notranslate"><span class="pre">-serial</span> <span class="pre">mon:telnet::4444,server=on,wait=off</span></code></p>
<p>When the monitor is multiplexed to stdio in this way, Ctrl+C
will not terminate QEMU any more but will be passed to the guest
instead.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">braille</span></code></dt><dd><p>Braille device. This will use BrlAPI to display the braille
output on a real or fake device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">msmouse</span></code></dt><dd><p>Three button serial mouse. Configure the guest to use Microsoft
protocol.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-parallel</span> <span class="pre">dev</span></code></dt><dd><p>Redirect the virtual parallel port to host device dev (same devices
as the serial port). On Linux hosts, <code class="docutils literal notranslate"><span class="pre">/dev/parportN</span></code> can be used
to use hardware devices connected on the corresponding host parallel
port.</p>
<p>This option can be used several times to simulate up to 3 parallel
ports.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">-parallel</span> <span class="pre">none</span></code> to disable all parallel ports.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-monitor</span> <span class="pre">dev</span></code></dt><dd><p>Redirect the monitor to host device dev (same devices as the serial
port). The default device is <code class="docutils literal notranslate"><span class="pre">vc</span></code> in graphical mode and <code class="docutils literal notranslate"><span class="pre">stdio</span></code>
in non graphical mode. Use <code class="docutils literal notranslate"><span class="pre">-monitor</span> <span class="pre">none</span></code> to disable the default
monitor.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-qmp</span> <span class="pre">dev</span></code></dt><dd><p>Like -monitor but opens in ‘control’ mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-qmp-pretty</span> <span class="pre">dev</span></code></dt><dd><p>Like -qmp but uses pretty JSON formatting.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-mon</span> <span class="pre">[chardev=]name[,mode=readline|control][,pretty[=on|off]]</span></code></dt><dd><p>Setup monitor on chardev name. <code class="docutils literal notranslate"><span class="pre">mode=control</span></code> configures
a QMP monitor (a JSON RPC-style protocol) and it is not the
same as HMP, the human monitor that has a “(qemu)” prompt.
<code class="docutils literal notranslate"><span class="pre">pretty</span></code> is only valid when <code class="docutils literal notranslate"><span class="pre">mode=control</span></code>,
turning on JSON pretty printing to ease
human reading and debugging.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-debugcon</span> <span class="pre">dev</span></code></dt><dd><p>Redirect the debug console to host device dev (same devices as the
serial port). The debug console is an I/O port which is typically
port 0xe9; writing to that I/O port sends output to this device. The
default device is <code class="docutils literal notranslate"><span class="pre">vc</span></code> in graphical mode and <code class="docutils literal notranslate"><span class="pre">stdio</span></code> in non
graphical mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-pidfile</span> <span class="pre">file</span></code></dt><dd><p>Store the QEMU process PID in file. It is useful if you launch QEMU
from a script.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-singlestep</span></code></dt><dd><p>Run the emulation in single step mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--preconfig</span></code></dt><dd><p>Pause QEMU for interactive configuration before the machine is
created, which allows querying and configuring properties that will
affect machine initialization. Use QMP command ‘x-exit-preconfig’ to
exit the preconfig state and move to the next state (i.e. run guest
if -S isn’t used or pause the second time if -S is used). This
option is experimental.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-S</span></code></dt><dd><p>Do not start CPU at startup (you must type ‘c’ in the monitor).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-overcommit</span> <span class="pre">mem-lock=on|off</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-overcommit</span> <span class="pre">cpu-pm=on|off</span></code></dt><dd><p>Run qemu with hints about host resource overcommit. The default is
to assume that host overcommits all resources.</p>
<p>Locking qemu and guest memory can be enabled via <code class="docutils literal notranslate"><span class="pre">mem-lock=on</span></code>
(disabled by default). This works when host memory is not
overcommitted and reduces the worst-case latency for guest.</p>
<p>Guest ability to manage power state of host cpus (increasing latency
for other processes on the same host cpu, but decreasing latency for
guest) can be enabled via <code class="docutils literal notranslate"><span class="pre">cpu-pm=on</span></code> (disabled by default). This
works best when host CPU is not overcommitted. When used, host
estimates of CPU cycle and power utilization will be incorrect, not
taking into account guest idle time.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-gdb</span> <span class="pre">dev</span></code></dt><dd><p>Accept a gdb connection on device dev (see the <a class="reference internal" href="gdb.html#gdb-usage"><span class="std std-ref">GDB usage</span></a> chapter
in the System Emulation Users Guide). Note that this option does not pause QEMU
execution – if you want QEMU to not start the guest until you
connect with gdb and issue a <code class="docutils literal notranslate"><span class="pre">continue</span></code> command, you will need to
also pass the <code class="docutils literal notranslate"><span class="pre">-S</span></code> option to QEMU.</p>
<p>The most usual configuration is to listen on a local TCP socket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">gdb</span> <span class="n">tcp</span><span class="p">::</span><span class="mi">3117</span>
</pre></div>
</div>
<p>but you can specify other backends; UDP, pseudo TTY, or even stdio
are all reasonable use cases. For example, a stdio connection
allows you to start QEMU from within gdb and establish the
connection via a pipe:</p>
<pre class="literal-block">(gdb) target remote | exec qemu-system-x86_64 -gdb stdio ...</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-s</span></code></dt><dd><p>Shorthand for -gdb <a class="reference external" href="tcp::1234">tcp::1234</a>, i.e. open a gdbserver on TCP port 1234
(see the <a class="reference internal" href="gdb.html#gdb-usage"><span class="std std-ref">GDB usage</span></a> chapter in the System Emulation Users Guide).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">item1[,...]</span></code></dt><dd><p>Enable logging of specified items. Use ‘-d help’ for a list of log
items.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-D</span> <span class="pre">logfile</span></code></dt><dd><p>Output log in logfile instead of to stderr</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-dfilter</span> <span class="pre">range1[,...]</span></code></dt><dd><p>Filter debug output to that relevant to a range of target addresses.
The filter spec can be either start+size, start-size or start..end
where start end and size are the addresses and sizes required. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">dfilter</span> <span class="mh">0x8000</span><span class="o">.</span><span class="mf">.0</span><span class="n">x8fff</span><span class="p">,</span><span class="mh">0xffffffc000080000</span><span class="o">+</span><span class="mh">0x200</span><span class="p">,</span><span class="mh">0xffffffc000060000</span><span class="o">-</span><span class="mh">0x1000</span>
</pre></div>
</div>
<p>Will dump output for any code in the 0x1000 sized block starting at
0x8000 and the 0x200 sized block starting at 0xffffffc000080000 and
another 0x1000 sized block starting at 0xffffffc00005f000.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-seed</span> <span class="pre">number</span></code></dt><dd><p>Force the guest to use a deterministic pseudo-random number
generator, seeded with number. This does not affect crypto routines
within the host.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-L</span>&#160; <span class="pre">path</span></code></dt><dd><p>Set the directory for the BIOS, VGA BIOS and keymaps.</p>
<p>To list all the data directories, use <code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">help</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-enable-kvm</span></code></dt><dd><p>Enable KVM full virtualization support. This option is only
available if KVM support is enabled when compiling.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-xen-domid</span> <span class="pre">id</span></code></dt><dd><p>Specify xen guest domain id (XEN only).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-xen-attach</span></code></dt><dd><p>Attach to existing xen domain. libxl will use this when starting
QEMU (XEN only). Restrict set of available xen operations to
specified domain id (XEN only).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-reboot</span></code></dt><dd><p>Exit instead of rebooting.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-shutdown</span></code></dt><dd><p>Don’t exit QEMU on guest shutdown, but instead only stop the
emulation. This allows for instance switching to monitor to commit
changes to the disk image.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-action</span> <span class="pre">event=action</span></code></dt><dd><p>The action parameter serves to modify QEMU’s default behavior when
certain guest events occur. It provides a generic method for specifying the
same behaviors that are modified by the <code class="docutils literal notranslate"><span class="pre">-no-reboot</span></code> and <code class="docutils literal notranslate"><span class="pre">-no-shutdown</span></code>
parameters.</p>
<p>Examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">-action</span> <span class="pre">panic=none</span></code>
<code class="docutils literal notranslate"><span class="pre">-action</span> <span class="pre">reboot=shutdown,shutdown=pause</span></code>
<code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">i6300esb</span> <span class="pre">-action</span> <span class="pre">watchdog=pause</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-loadvm</span> <span class="pre">file</span></code></dt><dd><p>Start right away with a saved state (<code class="docutils literal notranslate"><span class="pre">loadvm</span></code> in monitor)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-daemonize</span></code></dt><dd><p>Daemonize the QEMU process after initialization. QEMU will not
detach from standard IO until it is ready to receive connections on
any of its devices. This option is a useful way for external
programs to launch QEMU without having to cope with initialization
race conditions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-option-rom</span> <span class="pre">file</span></code></dt><dd><p>Load the contents of file as an option ROM. This option is useful to
load things like EtherBoot.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-rtc</span> <span class="pre">[base=utc|localtime|datetime][,clock=host|rt|vm][,driftfix=none|slew]</span></code></dt><dd><p>Specify <code class="docutils literal notranslate"><span class="pre">base</span></code> as <code class="docutils literal notranslate"><span class="pre">utc</span></code> or <code class="docutils literal notranslate"><span class="pre">localtime</span></code> to let the RTC start at
the current UTC or local time, respectively. <code class="docutils literal notranslate"><span class="pre">localtime</span></code> is
required for correct date in MS-DOS or Windows. To start at a
specific point in time, provide datetime in the format
<code class="docutils literal notranslate"><span class="pre">2006-06-17T16:01:21</span></code> or <code class="docutils literal notranslate"><span class="pre">2006-06-17</span></code>. The default base is UTC.</p>
<p>By default the RTC is driven by the host system time. This allows
using of the RTC as accurate reference clock inside the guest,
specifically if the host time is smoothly following an accurate
external reference clock, e.g. via NTP. If you want to isolate the
guest time from the host, you can set <code class="docutils literal notranslate"><span class="pre">clock</span></code> to <code class="docutils literal notranslate"><span class="pre">rt</span></code> instead,
which provides a host monotonic clock if host support it. To even
prevent the RTC from progressing during suspension, you can set
<code class="docutils literal notranslate"><span class="pre">clock</span></code> to <code class="docutils literal notranslate"><span class="pre">vm</span></code> (virtual clock). ‘<code class="docutils literal notranslate"><span class="pre">clock=vm</span></code>‘ is
recommended especially in icount mode in order to preserve
determinism; however, note that in icount mode the speed of the
virtual clock is variable and can in general differ from the host
clock.</p>
<p>Enable <code class="docutils literal notranslate"><span class="pre">driftfix</span></code> (i386 targets only) if you experience time drift
problems, specifically with Windows’ ACPI HAL. This option will try
to figure out how many timer interrupts were not processed by the
Windows guest and will re-inject them.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-icount</span> <span class="pre">[shift=N|auto][,align=on|off][,sleep=on|off][,rr=record|replay,rrfile=filename[,rrsnapshot=snapshot]]</span></code></dt><dd><p>Enable virtual instruction counter. The virtual cpu will execute one
instruction every 2^N ns of virtual time. If <code class="docutils literal notranslate"><span class="pre">auto</span></code> is specified
then the virtual cpu speed will be automatically adjusted to keep
virtual time within a few seconds of real time.</p>
<p>Note that while this option can give deterministic behavior, it does
not provide cycle accurate emulation. Modern CPUs contain
superscalar out of order cores with complex cache hierarchies. The
number of instructions executed often has little or no correlation
with actual performance.</p>
<p>When the virtual cpu is sleeping, the virtual time will advance at
default speed unless <code class="docutils literal notranslate"><span class="pre">sleep=on</span></code> is specified. With
<code class="docutils literal notranslate"><span class="pre">sleep=on</span></code>, the virtual time will jump to the next timer
deadline instantly whenever the virtual cpu goes to sleep mode and
will not advance if no timer is enabled. This behavior gives
deterministic execution times from the guest point of view.
The default if icount is enabled is <code class="docutils literal notranslate"><span class="pre">sleep=off</span></code>.
<code class="docutils literal notranslate"><span class="pre">sleep=on</span></code> cannot be used together with either <code class="docutils literal notranslate"><span class="pre">shift=auto</span></code>
or <code class="docutils literal notranslate"><span class="pre">align=on</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">align=on</span></code> will activate the delay algorithm which will try to
synchronise the host clock and the virtual clock. The goal is to
have a guest running at the real frequency imposed by the shift
option. Whenever the guest clock is behind the host clock and if
<code class="docutils literal notranslate"><span class="pre">align=on</span></code> is specified then we print a message to the user to
inform about the delay. Currently this option does not work when
<code class="docutils literal notranslate"><span class="pre">shift</span></code> is <code class="docutils literal notranslate"><span class="pre">auto</span></code>. Note: The sync algorithm will work for those
shift values for which the guest clock runs ahead of the host clock.
Typically this happens when the shift value is high (how high
depends on the host machine). The default if icount is enabled
is <code class="docutils literal notranslate"><span class="pre">align=off</span></code>.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">rr</span></code> option is specified deterministic record/replay is
enabled. The <code class="docutils literal notranslate"><span class="pre">rrfile=</span></code> option must also be provided to
specify the path to the replay log. In record mode data is written
to this file, and in replay mode it is read back.
If the <code class="docutils literal notranslate"><span class="pre">rrsnapshot</span></code> option is given then it specifies a VM snapshot
name. In record mode, a new VM snapshot with the given name is created
at the start of execution recording. In replay mode this option
specifies the snapshot name used to load the initial VM state.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-watchdog-action</span> <span class="pre">action</span></code></dt><dd><p>The action controls what QEMU will do when the watchdog timer
expires. The default is <code class="docutils literal notranslate"><span class="pre">reset</span></code> (forcefully reset the guest).
Other possible actions are: <code class="docutils literal notranslate"><span class="pre">shutdown</span></code> (attempt to gracefully
shutdown the guest), <code class="docutils literal notranslate"><span class="pre">poweroff</span></code> (forcefully poweroff the guest),
<code class="docutils literal notranslate"><span class="pre">inject-nmi</span></code> (inject a NMI into the guest), <code class="docutils literal notranslate"><span class="pre">pause</span></code> (pause the
guest), <code class="docutils literal notranslate"><span class="pre">debug</span></code> (print a debug message and continue), or <code class="docutils literal notranslate"><span class="pre">none</span></code>
(do nothing).</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">shutdown</span></code> action requires that the guest responds
to ACPI signals, which it may not be able to do in the sort of
situations where the watchdog would have expired, and thus
<code class="docutils literal notranslate"><span class="pre">-watchdog-action</span> <span class="pre">shutdown</span></code> is not recommended for production use.</p>
<p>Examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">i6300esb</span> <span class="pre">-watchdog-action</span> <span class="pre">pause</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-echr</span> <span class="pre">numeric_ascii_value</span></code></dt><dd><p>Change the escape character used for switching to the monitor when
using monitor and serial sharing. The default is <code class="docutils literal notranslate"><span class="pre">0x01</span></code> when using
the <code class="docutils literal notranslate"><span class="pre">-nographic</span></code> option. <code class="docutils literal notranslate"><span class="pre">0x01</span></code> is equal to pressing
<code class="docutils literal notranslate"><span class="pre">Control-a</span></code>. You can select a different character from the ascii
control keys where 1 through 26 map to Control-a through Control-z.
For instance you could use the either of the following to change the
escape character to Control-t.</p>
<p><code class="docutils literal notranslate"><span class="pre">-echr</span> <span class="pre">0x14</span></code>; <code class="docutils literal notranslate"><span class="pre">-echr</span> <span class="pre">20</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">tcp:[host]:port[,to=maxport][,ipv4=on|off][,ipv6=on|off]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">rdma:host:port[,ipv4=on|off][,ipv6=on|off]</span></code></dt><dd><p>Prepare for incoming migration, listen on a given tcp port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">unix:socketpath</span></code></dt><dd><p>Prepare for incoming migration, listen on a given unix socket.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">fd:fd</span></code></dt><dd><p>Accept incoming migration from a given filedescriptor.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">exec:cmdline</span></code></dt><dd><p>Accept incoming migration as an output from specified external
command.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-incoming</span> <span class="pre">defer</span></code></dt><dd><p>Wait for the URI to be specified via migrate_incoming. The monitor
can be used to change settings (such as migration parameters) prior
to issuing the migrate_incoming to allow the migration to begin.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-only-migratable</span></code></dt><dd><p>Only allow migratable devices. Devices will not be allowed to enter
an unmigratable state.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-nodefaults</span></code></dt><dd><p>Don’t create default devices. Normally, QEMU sets the default
devices like serial port, parallel port, virtual console, monitor
device, VGA adapter, floppy and CD-ROM drive and others. The
<code class="docutils literal notranslate"><span class="pre">-nodefaults</span></code> option will disable all those default devices.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-chroot</span> <span class="pre">dir</span></code></dt><dd><p>Immediately before starting guest execution, chroot to the specified
directory. Especially useful in combination with -runas.
This option is not supported for Windows hosts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-runas</span> <span class="pre">user</span></code></dt><dd><p>Immediately before starting guest execution, drop root privileges,
switching to the specified user.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-prom-env</span> <span class="pre">variable=value</span></code></dt><dd><p>Set OpenBIOS nvram variable to given value (PPC, SPARC only).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">sparc</span> <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;auto-boot?=false&#39;</span> \
 <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;boot-device=sd(0,2,0):d&#39;</span> <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;boot-args=linux single&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">ppc</span> <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;auto-boot?=false&#39;</span> \
 <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;boot-device=hd:2,\yaboot&#39;</span> \
 <span class="o">-</span><span class="n">prom</span><span class="o">-</span><span class="n">env</span> <span class="s1">&#39;boot-args=conf=hd:2,\yaboot.conf&#39;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-semihosting</span></code></dt><dd><p>Enable semihosting mode (ARM, M68K, Xtensa, MIPS, Nios II, RISC-V only).</p>
<p>Note that this allows guest direct access to the host filesystem, so
should only be used with a trusted guest OS.</p>
<p>See the -semihosting-config option documentation for further
information about the facilities this enables.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-semihosting-config</span> <span class="pre">[enable=on|off][,target=native|gdb|auto][,chardev=id][,userspace=on|off][,arg=str[,...]]</span></code></dt><dd><p>Enable and configure semihosting (ARM, M68K, Xtensa, MIPS, Nios II, RISC-V
only).</p>
<p>Note that this allows guest direct access to the host filesystem, so
should only be used with a trusted guest OS.</p>
<p>On Arm this implements the standard semihosting API, version 2.0.</p>
<p>On M68K this implements the “ColdFire GDB” interface used by
libgloss.</p>
<p>Xtensa semihosting provides basic file IO calls, such as
open/read/write/seek/select. Tensilica baremetal libc for ISS and
linux platform “sim” use this interface.</p>
<p>On RISC-V this implements the standard semihosting API, version 0.2.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">target=native|gdb|auto</span></code></dt><dd><p>Defines where the semihosting calls will be addressed, to QEMU
(<code class="docutils literal notranslate"><span class="pre">native</span></code>) or to GDB (<code class="docutils literal notranslate"><span class="pre">gdb</span></code>). The default is <code class="docutils literal notranslate"><span class="pre">auto</span></code>, which
means <code class="docutils literal notranslate"><span class="pre">gdb</span></code> during debug sessions and <code class="docutils literal notranslate"><span class="pre">native</span></code> otherwise.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chardev=str1</span></code></dt><dd><p>Send the output to a chardev backend output for native or auto
output when not in gdb</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">userspace=on|off</span></code></dt><dd><p>Allows code running in guest userspace to access the semihosting
interface. The default is that only privileged guest code can
make semihosting calls. Note that setting <code class="docutils literal notranslate"><span class="pre">userspace=on</span></code> should
only be used if all guest code is trusted (for example, in
bare-metal test case code).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">arg=str1,arg=str2,...</span></code></dt><dd><p>Allows the user to pass input arguments, and can be used
multiple times to build up a list. The old-style
<code class="docutils literal notranslate"><span class="pre">-kernel</span></code>/<code class="docutils literal notranslate"><span class="pre">-append</span></code> method of passing a command line is
still supported for backward compatibility. If both the
<code class="docutils literal notranslate"><span class="pre">--semihosting-config</span> <span class="pre">arg</span></code> and the <code class="docutils literal notranslate"><span class="pre">-kernel</span></code>/<code class="docutils literal notranslate"><span class="pre">-append</span></code> are
specified, the former is passed to semihosting as it always
takes precedence.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-old-param</span></code></dt><dd><p>Old param mode (ARM only).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-sandbox</span> <span class="pre">arg[,obsolete=string][,elevateprivileges=string][,spawn=string][,resourcecontrol=string]</span></code></dt><dd><p>Enable Seccomp mode 2 system call filter. ‘on’ will enable syscall
filtering and ‘off’ will disable it. The default is ‘off’.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">obsolete=string</span></code></dt><dd><p>Enable Obsolete system calls</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elevateprivileges=string</span></code></dt><dd><p>Disable set*uid|gid system calls</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spawn=string</span></code></dt><dd><p>Disable *fork and execve</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resourcecontrol=string</span></code></dt><dd><p>Disable process affinity and schedular priority</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-readconfig</span> <span class="pre">file</span></code></dt><dd><p>Read device configuration from file. This approach is useful when
you want to spawn QEMU process with many command line options but
you don’t want to exceed the command line character limit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-no-user-config</span></code></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">-no-user-config</span></code> option makes QEMU not load any of the
user-provided config files on sysconfdir.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-trace-unassigned</span></code></dt><dd><p>Trace unassigned memory or i/o accesses to stderr.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-trace</span> <span class="pre">[[enable=]pattern][,events=file][,file=file]</span></code></dt><dd><p>Specify tracing options.</p>
<p><code class="docutils literal notranslate"><span class="pre">[enable=]PATTERN</span></code></p>
<blockquote>
<div><p>Immediately enable events matching <em>PATTERN</em>
(either event name or a globbing pattern).  This option is only
available if QEMU has been compiled with the <code class="docutils literal notranslate"><span class="pre">simple</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code>
or <code class="docutils literal notranslate"><span class="pre">ftrace</span></code> tracing backend.  To specify multiple events or patterns,
specify the <code class="xref std std-option docutils literal notranslate"><span class="pre">-trace</span></code> option multiple times.</p>
<p>Use <code class="xref std std-option docutils literal notranslate"><span class="pre">-trace</span> <span class="pre">help</span></code> to print a list of names of trace points.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">events=FILE</span></code></p>
<blockquote>
<div><p>Immediately enable events listed in <em>FILE</em>.
The file must contain one event name (as listed in the <code class="docutils literal notranslate"><span class="pre">trace-events-all</span></code>
file) per line; globbing patterns are accepted too.  This option is only
available if QEMU has been compiled with the <code class="docutils literal notranslate"><span class="pre">simple</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code> or
<code class="docutils literal notranslate"><span class="pre">ftrace</span></code> tracing backend.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">file=FILE</span></code></p>
<blockquote>
<div><p>Log output traces to <em>FILE</em>.
This option is only available if QEMU has been compiled with
the <code class="docutils literal notranslate"><span class="pre">simple</span></code> tracing backend.</p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-plugin</span> <span class="pre">file=file[,argname=argvalue]</span></code></dt><dd><p>Load a plugin.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">file=file</span></code></dt><dd><p>Load the given plugin from a shared library file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">argname=argvalue</span></code></dt><dd><p>Argument passed to the plugin. (Can be given multiple times.)</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-async-teardown</span></code></dt><dd><p>Enable asynchronous teardown. A new process called “cleanup/&lt;QEMU_PID&gt;”
will be created at startup sharing the address space with the main qemu
process, using clone. It will wait for the main qemu process to
terminate completely, and then exit.
This allows qemu to terminate very quickly even if the guest was
huge, leaving the teardown of the address space to the cleanup
process. Since the cleanup process shares the same cgroups as the
main qemu process, accounting is performed correctly. This only
works if the cleanup process is not forcefully killed with SIGKILL
before the main qemu process has terminated completely.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-msg</span> <span class="pre">[timestamp[=on|off]][,guest-name[=on|off]]</span></code></dt><dd><p>Control error message format.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timestamp=on|off</span></code></dt><dd><p>Prefix messages with a timestamp. Default is off.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guest-name=on|off</span></code></dt><dd><p>Prefix messages with guest name but only if -name guest option is set
otherwise the option is ignored. Default is off.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-dump-vmstate</span> <span class="pre">file</span></code></dt><dd><p>Dump json-encoded vmstate information for current machine type to
file in file</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-enable-sync-profile</span></code></dt><dd><p>Enable synchronization profiling.</p>
</dd>
</dl>
</section>
<section id="hxtool-10">
<h2>Generic object creation<a class="headerlink" href="#hxtool-10" title="Permalink to this heading"></a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">typename[,prop1=value1,...]</span></code></dt><dd><p>Create a new object of type typename setting properties in the order
they are specified. Note that the ‘id’ property must be set. These
objects are placed in the ‘/objects’ path.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">memory-backend-file,id=id,size=size,mem-path=dir,share=on|off,discard-data=on|off,merge=on|off,dump=on|off,prealloc=on|off,host-nodes=host-nodes,policy=default|preferred|bind|interleave,align=align,readonly=on|off</span></code></dt><dd><p>Creates a memory file backend object, which can be used to back
the guest RAM with huge pages.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID that will be used to
reference this memory region in other parameters, e.g. <code class="docutils literal notranslate"><span class="pre">-numa</span></code>,
<code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">nvdimm</span></code>, etc.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">size</span></code> option provides the size of the memory region, and
accepts common suffixes, e.g. <code class="docutils literal notranslate"><span class="pre">500M</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mem-path</span></code> provides the path to either a shared memory or
huge page filesystem mount.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">share</span></code> boolean option determines whether the memory
region is marked as private to QEMU, or shared. The latter
allows a co-operating external process to access the QEMU memory
region.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">share</span></code> is also required for pvrdma devices due to
limitations in the RDMA API provided by Linux.</p>
<p>Setting share=on might affect the ability to configure NUMA
bindings for the memory backend under some circumstances, see
Documentation/vm/numa_memory_policy.txt on the Linux kernel
source tree for additional details.</p>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">discard-data</span></code> boolean option to on indicates that
file contents can be destroyed when QEMU exits, to avoid
unnecessarily flushing data to the backing file. Note that
<code class="docutils literal notranslate"><span class="pre">discard-data</span></code> is only an optimization, and QEMU might not
discard file contents if it aborts unexpectedly or is terminated
using SIGKILL.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> boolean option enables memory merge, also known as
MADV_MERGEABLE, so that Kernel Samepage Merging will consider
the pages for memory deduplication.</p>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">dump</span></code> boolean option to off excludes the memory
from core dumps. This feature is also known as MADV_DONTDUMP.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">prealloc</span></code> boolean option enables memory preallocation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">host-nodes</span></code> option binds the memory range to a list of
NUMA host nodes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">policy</span></code> option sets the NUMA policy to one of the
following values:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">default</span></code></dt><dd><p>default host policy</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preferred</span></code></dt><dd><p>prefer the given host node list for allocation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bind</span></code></dt><dd><p>restrict memory allocation to the given host node list</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">interleave</span></code></dt><dd><p>interleave memory allocations across the given host node
list</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">align</span></code> option specifies the base address alignment when
QEMU mmap(2) <code class="docutils literal notranslate"><span class="pre">mem-path</span></code>, and accepts common suffixes, eg
<code class="docutils literal notranslate"><span class="pre">2M</span></code>. Some backend store specified by <code class="docutils literal notranslate"><span class="pre">mem-path</span></code> requires an
alignment different than the default one used by QEMU, eg the
device DAX /dev/dax0.0 requires 2M alignment rather than 4K. In
such cases, users can specify the required alignment via this
option.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pmem</span></code> option specifies whether the backing file specified
by <code class="docutils literal notranslate"><span class="pre">mem-path</span></code> is in host persistent memory that can be
accessed using the SNIA NVM programming model (e.g. Intel
NVDIMM). If <code class="docutils literal notranslate"><span class="pre">pmem</span></code> is set to ‘on’, QEMU will take necessary
operations to guarantee the persistence of its own writes to
<code class="docutils literal notranslate"><span class="pre">mem-path</span></code> (e.g. in vNVDIMM label emulation and live
migration). Also, we will map the backend-file with MAP_SYNC
flag, which ensures the file metadata is in sync for
<code class="docutils literal notranslate"><span class="pre">mem-path</span></code> in case of host crash or a power failure. MAP_SYNC
requires support from both the host kernel (since Linux kernel
4.15) and the filesystem of <code class="docutils literal notranslate"><span class="pre">mem-path</span></code> mounted with DAX
option.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">readonly</span></code> option specifies whether the backing file is opened
read-only or read-write (default).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">memory-backend-ram,id=id,merge=on|off,dump=on|off,share=on|off,prealloc=on|off,size=size,host-nodes=host-nodes,policy=default|preferred|bind|interleave</span></code></dt><dd><p>Creates a memory backend object, which can be used to back the
guest RAM. Memory backend objects offer more control than the
<code class="docutils literal notranslate"><span class="pre">-m</span></code> option that is traditionally used to define guest RAM.
Please refer to <code class="docutils literal notranslate"><span class="pre">memory-backend-file</span></code> for a description of the
options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">memory-backend-memfd,id=id,merge=on|off,dump=on|off,share=on|off,prealloc=on|off,size=size,host-nodes=host-nodes,policy=default|preferred|bind|interleave,seal=on|off,hugetlb=on|off,hugetlbsize=size</span></code></dt><dd><p>Creates an anonymous memory file backend object, which allows
QEMU to share the memory with an external process (e.g. when
using vhost-user). The memory is allocated with memfd and
optional sealing. (Linux only)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">seal</span></code> option creates a sealed-file, that will block
further resizing the memory (‘on’ by default).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">hugetlb</span></code> option specify the file to be created resides in
the hugetlbfs filesystem (since Linux 4.14). Used in conjunction
with the <code class="docutils literal notranslate"><span class="pre">hugetlb</span></code> option, the <code class="docutils literal notranslate"><span class="pre">hugetlbsize</span></code> option specify
the hugetlb page size on systems that support multiple hugetlb
page sizes (it must be a power of 2 value supported by the
system).</p>
<p>In some versions of Linux, the <code class="docutils literal notranslate"><span class="pre">hugetlb</span></code> option is
incompatible with the <code class="docutils literal notranslate"><span class="pre">seal</span></code> option (requires at least Linux
4.16).</p>
<p>Please refer to <code class="docutils literal notranslate"><span class="pre">memory-backend-file</span></code> for a description of the
other options.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">share</span></code> boolean option is on by default with memfd.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">rng-builtin,id=id</span></code></dt><dd><p>Creates a random number generator backend which obtains entropy
from QEMU builtin functions. The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID
that will be used to reference this entropy backend from the
<code class="docutils literal notranslate"><span class="pre">virtio-rng</span></code> device. By default, the <code class="docutils literal notranslate"><span class="pre">virtio-rng</span></code> device
uses this RNG backend.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">rng-random,id=id,filename=/dev/random</span></code></dt><dd><p>Creates a random number generator backend which obtains entropy
from a device on the host. The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID
that will be used to reference this entropy backend from the
<code class="docutils literal notranslate"><span class="pre">virtio-rng</span></code> device. The <code class="docutils literal notranslate"><span class="pre">filename</span></code> parameter specifies
which file to obtain entropy from and if omitted defaults to
<code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">rng-egd,id=id,chardev=chardevid</span></code></dt><dd><p>Creates a random number generator backend which obtains entropy
from an external daemon running on the host. The <code class="docutils literal notranslate"><span class="pre">id</span></code>
parameter is a unique ID that will be used to reference this
entropy backend from the <code class="docutils literal notranslate"><span class="pre">virtio-rng</span></code> device. The <code class="docutils literal notranslate"><span class="pre">chardev</span></code>
parameter is the unique ID of a character device backend that
provides the connection to the RNG daemon.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-creds-anon,id=id,endpoint=endpoint,dir=/path/to/cred/dir,verify-peer=on|off</span></code></dt><dd><p>Creates a TLS anonymous credentials object, which can be used to
provide TLS support on network backends. The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is
a unique ID which network backends will use to access the
credentials. The <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> is either <code class="docutils literal notranslate"><span class="pre">server</span></code> or <code class="docutils literal notranslate"><span class="pre">client</span></code>
depending on whether the QEMU network backend that uses the
credentials will be acting as a client or as a server. If
<code class="docutils literal notranslate"><span class="pre">verify-peer</span></code> is enabled (the default) then once the handshake
is completed, the peer credentials will be verified, though this
is a no-op for anonymous credentials.</p>
<p>The dir parameter tells QEMU where to find the credential files.
For server endpoints, this directory may contain a file
dh-params.pem providing diffie-hellman parameters to use for the
TLS server. If the file is missing, QEMU will generate a set of
DH parameters at startup. This is a computationally expensive
operation that consumes random pool entropy, so it is
recommended that a persistent set of parameters be generated
upfront and saved.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-creds-psk,id=id,endpoint=endpoint,dir=/path/to/keys/dir[,username=username]</span></code></dt><dd><p>Creates a TLS Pre-Shared Keys (PSK) credentials object, which
can be used to provide TLS support on network backends. The
<code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID which network backends will use
to access the credentials. The <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> is either <code class="docutils literal notranslate"><span class="pre">server</span></code>
or <code class="docutils literal notranslate"><span class="pre">client</span></code> depending on whether the QEMU network backend that
uses the credentials will be acting as a client or as a server.
For clients only, <code class="docutils literal notranslate"><span class="pre">username</span></code> is the username which will be
sent to the server. If omitted it defaults to “qemu”.</p>
<p>The dir parameter tells QEMU where to find the keys file. It is
called “dir/keys.psk” and contains “username:key” pairs. This
file can most easily be created using the GnuTLS <code class="docutils literal notranslate"><span class="pre">psktool</span></code>
program.</p>
<p>For server endpoints, dir may also contain a file dh-params.pem
providing diffie-hellman parameters to use for the TLS server.
If the file is missing, QEMU will generate a set of DH
parameters at startup. This is a computationally expensive
operation that consumes random pool entropy, so it is
recommended that a persistent set of parameters be generated up
front and saved.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-creds-x509,id=id,endpoint=endpoint,dir=/path/to/cred/dir,priority=priority,verify-peer=on|off,passwordid=id</span></code></dt><dd><p>Creates a TLS anonymous credentials object, which can be used to
provide TLS support on network backends. The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is
a unique ID which network backends will use to access the
credentials. The <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> is either <code class="docutils literal notranslate"><span class="pre">server</span></code> or <code class="docutils literal notranslate"><span class="pre">client</span></code>
depending on whether the QEMU network backend that uses the
credentials will be acting as a client or as a server. If
<code class="docutils literal notranslate"><span class="pre">verify-peer</span></code> is enabled (the default) then once the handshake
is completed, the peer credentials will be verified. With x509
certificates, this implies that the clients must be provided
with valid client certificates too.</p>
<p>The dir parameter tells QEMU where to find the credential files.
For server endpoints, this directory may contain a file
dh-params.pem providing diffie-hellman parameters to use for the
TLS server. If the file is missing, QEMU will generate a set of
DH parameters at startup. This is a computationally expensive
operation that consumes random pool entropy, so it is
recommended that a persistent set of parameters be generated
upfront and saved.</p>
<p>For x509 certificate credentials the directory will contain
further files providing the x509 certificates. The certificates
must be stored in PEM format, in filenames ca-cert.pem,
ca-crl.pem (optional), server-cert.pem (only servers),
server-key.pem (only servers), client-cert.pem (only clients),
and client-key.pem (only clients).</p>
<p>For the server-key.pem and client-key.pem files which contain
sensitive private keys, it is possible to use an encrypted
version by providing the passwordid parameter. This provides the
ID of a previously created <code class="docutils literal notranslate"><span class="pre">secret</span></code> object containing the
password for decryption.</p>
<p>The priority parameter allows to override the global default
priority used by gnutls. This can be useful if the system
administrator needs to use a weaker set of crypto priorities for
QEMU without potentially forcing the weakness onto all
applications. Or conversely if one wants wants a stronger
default for QEMU than for all other applications, they can do
this through this parameter. Its format is a gnutls priority
string as described at
<a class="reference external" href="https://gnutls.org/manual/html_node/Priority-Strings.html">https://gnutls.org/manual/html_node/Priority-Strings.html</a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">tls-cipher-suites,id=id,priority=priority</span></code></dt><dd><p>Creates a TLS cipher suites object, which can be used to control
the TLS cipher/protocol algorithms that applications are permitted
to use.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID which frontends will use to
access the ordered list of permitted TLS cipher suites from the
host.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">priority</span></code> parameter allows to override the global default
priority used by gnutls. This can be useful if the system
administrator needs to use a weaker set of crypto priorities for
QEMU without potentially forcing the weakness onto all
applications. Or conversely if one wants wants a stronger
default for QEMU than for all other applications, they can do
this through this parameter. Its format is a gnutls priority
string as described at
<a class="reference external" href="https://gnutls.org/manual/html_node/Priority-Strings.html">https://gnutls.org/manual/html_node/Priority-Strings.html</a>.</p>
<p>An example of use of this object is to control UEFI HTTPS Boot.
The tls-cipher-suites object exposes the ordered list of permitted
TLS cipher suites from the host side to the guest firmware, via
fw_cfg. The list is represented as an array of IANA_TLS_CIPHER
objects. The firmware uses the IANA_TLS_CIPHER array for configuring
guest-side TLS.</p>
<p>In the following example, the priority at which the host-side policy
is retrieved is given by the <code class="docutils literal notranslate"><span class="pre">priority</span></code> property.
Given that QEMU uses GNUTLS, <code class="docutils literal notranslate"><span class="pre">priority=&#64;SYSTEM</span></code> may be used to
refer to /etc/crypto-policies/back-ends/gnutls.config.</p>
<pre class="literal-block"># qemu-system-x86_64 \
    -object tls-cipher-suites,id=mysuite0,priority=&#64;SYSTEM \
    -fw_cfg name=etc/edk2/https/ciphers,gen_id=mysuite0</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">filter-buffer,id=id,netdev=netdevid,interval=t[,queue=all|rx|tx][,status=on|off][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</span></code></dt><dd><p>Interval t can’t be 0, this filter batches the packet delivery:
all packets arriving in a given interval on netdev netdevid are
delayed until the end of the interval. Interval is in
microseconds. <code class="docutils literal notranslate"><span class="pre">status</span></code> is optional that indicate whether the
netfilter is on (enabled) or off (disabled), the default status
for netfilter will be ‘on’.</p>
<p>queue all|rx|tx is an option that can be applied to any
netfilter.</p>
<p><code class="docutils literal notranslate"><span class="pre">all</span></code>: the filter is attached both to the receive and the
transmit queue of the netdev (default).</p>
<p><code class="docutils literal notranslate"><span class="pre">rx</span></code>: the filter is attached to the receive queue of the
netdev, where it will receive packets sent to the netdev.</p>
<p><code class="docutils literal notranslate"><span class="pre">tx</span></code>: the filter is attached to the transmit queue of the
netdev, where it will receive packets sent by the netdev.</p>
<p>position head|tail|id=&lt;id&gt; is an option to specify where the
filter should be inserted in the filter list. It can be applied
to any netfilter.</p>
<p><code class="docutils literal notranslate"><span class="pre">head</span></code>: the filter is inserted at the head of the filter list,
before any existing filters.</p>
<p><code class="docutils literal notranslate"><span class="pre">tail</span></code>: the filter is inserted at the tail of the filter list,
behind any existing filters (default).</p>
<p><code class="docutils literal notranslate"><span class="pre">id=&lt;id&gt;</span></code>: the filter is inserted before or behind the filter
specified by &lt;id&gt;, see the insert option below.</p>
<p>insert behind|before is an option to specify where to insert
the new filter relative to the one specified with
position=id=&lt;id&gt;. It can be applied to any netfilter.</p>
<p><code class="docutils literal notranslate"><span class="pre">before</span></code>: insert before the specified filter.</p>
<p><code class="docutils literal notranslate"><span class="pre">behind</span></code>: insert behind the specified filter (default).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">filter-mirror,id=id,netdev=netdevid,outdev=chardevid,queue=all|rx|tx[,vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</span></code></dt><dd><p>filter-mirror on netdev netdevid,mirror net packet to
chardevchardevid, if it has the vnet_hdr_support flag,
filter-mirror will mirror packet with vnet_hdr_len.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">filter-redirector,id=id,netdev=netdevid,indev=chardevid,outdev=chardevid,queue=all|rx|tx[,vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</span></code></dt><dd><p>filter-redirector on netdev netdevid,redirect filter’s net
packet to chardev chardevid,and redirect indev’s packet to
filter.if it has the vnet_hdr_support flag, filter-redirector
will redirect packet with vnet_hdr_len. Create a
filter-redirector we need to differ outdev id from indev id, id
can not be the same. we can just use indev or outdev, but at
least one of indev or outdev need to be specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">filter-rewriter,id=id,netdev=netdevid,queue=all|rx|tx,[vnet_hdr_support][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</span></code></dt><dd><p>Filter-rewriter is a part of COLO project.It will rewrite tcp
packet to secondary from primary to keep secondary tcp
connection,and rewrite tcp packet to primary from secondary make
tcp packet can be handled by client.if it has the
vnet_hdr_support flag, we can parse packet with vnet header.</p>
<p>usage: colo secondary: -object
filter-redirector,id=f1,netdev=hn0,queue=tx,indev=red0 -object
filter-redirector,id=f2,netdev=hn0,queue=rx,outdev=red1 -object
filter-rewriter,id=rew0,netdev=hn0,queue=all</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">filter-dump,id=id,netdev=dev[,file=filename][,maxlen=len][,position=head|tail|id=&lt;id&gt;][,insert=behind|before]</span></code></dt><dd><p>Dump the network traffic on netdev dev to the file specified by
filename. At most len bytes (64k by default) per packet are
stored. The file format is libpcap, so it can be analyzed with
tools such as tcpdump or Wireshark.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">colo-compare,id=id,primary_in=chardevid,secondary_in=chardevid,outdev=chardevid,iothread=id[,vnet_hdr_support][,notify_dev=id][,compare_timeout=&#64;var{ms}][,expired_scan_cycle=&#64;var{ms}][,max_queue_size=&#64;var{size}]</span></code></dt><dd><p>Colo-compare gets packet from primary_in chardevid and
secondary_in, then compare whether the payload of primary packet
and secondary packet are the same. If same, it will output
primary packet to out_dev, else it will notify COLO-framework to do
checkpoint and send primary packet to out_dev. In order to
improve efficiency, we need to put the task of comparison in
another iothread. If it has the vnet_hdr_support flag,
colo compare will send/recv packet with vnet_hdr_len.
The <a class="reference external" href="mailto:compare_timeout=&#37;&#52;&#48;var{ms">compare_timeout=<span>&#64;</span>var{ms</a>} determines the maximum time of the
colo-compare hold the packet. The <a class="reference external" href="mailto:expired_scan_cycle=&#37;&#52;&#48;var{ms">expired_scan_cycle=<span>&#64;</span>var{ms</a>}
is to set the period of scanning expired primary node network packets.
The <a class="reference external" href="mailto:max_queue_size=&#37;&#52;&#48;var{size">max_queue_size=<span>&#64;</span>var{size</a>} is to set the max compare queue
size depend on user environment.
If user want to use Xen COLO, need to add the notify_dev to
notify Xen colo-frame to do checkpoint.</p>
<p>COLO-compare must be used with the help of filter-mirror,
filter-redirector and filter-rewriter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KVM</span> <span class="n">COLO</span>

<span class="n">primary</span><span class="p">:</span>
<span class="o">-</span><span class="n">netdev</span> <span class="n">tap</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">vhost</span><span class="o">=</span><span class="n">off</span><span class="p">,</span><span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifup</span><span class="p">,</span><span class="n">downscript</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifdown</span>
<span class="o">-</span><span class="n">device</span> <span class="n">e1000</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">e0</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">mac</span><span class="o">=</span><span class="mi">52</span><span class="p">:</span><span class="n">a4</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">78</span><span class="p">:</span><span class="mi">66</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">mirror0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9003</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare1</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9004</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9001</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare0</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9001</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare_out</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9005</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare_out0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9005</span>
<span class="o">-</span><span class="nb">object</span> <span class="n">iothread</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">iothread1</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">mirror</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m0</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">mirror0</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">redire0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">indev</span><span class="o">=</span><span class="n">compare_out</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">redire1</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">compare0</span>
<span class="o">-</span><span class="nb">object</span> <span class="n">colo</span><span class="o">-</span><span class="n">compare</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">comp0</span><span class="p">,</span><span class="n">primary_in</span><span class="o">=</span><span class="n">compare0</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="n">secondary_in</span><span class="o">=</span><span class="n">compare1</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">compare_out0</span><span class="p">,</span><span class="n">iothread</span><span class="o">=</span><span class="n">iothread1</span>

<span class="n">secondary</span><span class="p">:</span>
<span class="o">-</span><span class="n">netdev</span> <span class="n">tap</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">vhost</span><span class="o">=</span><span class="n">off</span><span class="p">,</span><span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifup</span><span class="p">,</span><span class="n">down</span> <span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifdown</span>
<span class="o">-</span><span class="n">device</span> <span class="n">e1000</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">mac</span><span class="o">=</span><span class="mi">52</span><span class="p">:</span><span class="n">a4</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">78</span><span class="p">:</span><span class="mi">66</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">red0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9003</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">red1</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9004</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">indev</span><span class="o">=</span><span class="n">red0</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">red1</span>


<span class="n">Xen</span> <span class="n">COLO</span>

<span class="n">primary</span><span class="p">:</span>
<span class="o">-</span><span class="n">netdev</span> <span class="n">tap</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">vhost</span><span class="o">=</span><span class="n">off</span><span class="p">,</span><span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifup</span><span class="p">,</span><span class="n">downscript</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifdown</span>
<span class="o">-</span><span class="n">device</span> <span class="n">e1000</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">e0</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">mac</span><span class="o">=</span><span class="mi">52</span><span class="p">:</span><span class="n">a4</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">78</span><span class="p">:</span><span class="mi">66</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">mirror0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9003</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare1</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9004</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9001</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare0</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9001</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare_out</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9005</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">compare_out0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9005</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">notify_way</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9009</span><span class="p">,</span><span class="n">server</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="n">off</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">mirror</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">m0</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">mirror0</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">redire0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">indev</span><span class="o">=</span><span class="n">compare_out</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">redire1</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">compare0</span>
<span class="o">-</span><span class="nb">object</span> <span class="n">iothread</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">iothread1</span>
<span class="o">-</span><span class="nb">object</span> <span class="n">colo</span><span class="o">-</span><span class="n">compare</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">comp0</span><span class="p">,</span><span class="n">primary_in</span><span class="o">=</span><span class="n">compare0</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="n">secondary_in</span><span class="o">=</span><span class="n">compare1</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">compare_out0</span><span class="p">,</span><span class="n">notify_dev</span><span class="o">=</span><span class="n">nofity_way</span><span class="p">,</span><span class="n">iothread</span><span class="o">=</span><span class="n">iothread1</span>

<span class="n">secondary</span><span class="p">:</span>
<span class="o">-</span><span class="n">netdev</span> <span class="n">tap</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">vhost</span><span class="o">=</span><span class="n">off</span><span class="p">,</span><span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifup</span><span class="p">,</span><span class="n">down</span> <span class="n">script</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">-</span><span class="n">ifdown</span>
<span class="o">-</span><span class="n">device</span> <span class="n">e1000</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">mac</span><span class="o">=</span><span class="mi">52</span><span class="p">:</span><span class="n">a4</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">78</span><span class="p">:</span><span class="mi">66</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">red0</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9003</span>
<span class="o">-</span><span class="n">chardev</span> <span class="n">socket</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">red1</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="mf">3.3.3.3</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9004</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">indev</span><span class="o">=</span><span class="n">red0</span>
<span class="o">-</span><span class="nb">object</span> <span class="nb">filter</span><span class="o">-</span><span class="n">redirector</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span><span class="n">netdev</span><span class="o">=</span><span class="n">hn0</span><span class="p">,</span><span class="n">queue</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">outdev</span><span class="o">=</span><span class="n">red1</span>
</pre></div>
</div>
<p>If you want to know the detail of above command line, you can
read the colo-compare git log.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">cryptodev-backend-builtin,id=id[,queues=queues]</span></code></dt><dd><p>Creates a cryptodev backend which executes crypto operations from
the QEMU cipher APIs. The id parameter is a unique ID that will
be used to reference this cryptodev backend from the
<code class="docutils literal notranslate"><span class="pre">virtio-crypto</span></code> device. The queues parameter is optional,
which specify the queue number of cryptodev backend, the default
of queues is 1.</p>
<pre class="literal-block"># qemu-system-x86_64 \
  [...] \
      -object cryptodev-backend-builtin,id=cryptodev0 \
      -device virtio-crypto-pci,id=crypto0,cryptodev=cryptodev0 \
  [...]</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">cryptodev-vhost-user,id=id,chardev=chardevid[,queues=queues]</span></code></dt><dd><p>Creates a vhost-user cryptodev backend, backed by a chardev
chardevid. The id parameter is a unique ID that will be used to
reference this cryptodev backend from the <code class="docutils literal notranslate"><span class="pre">virtio-crypto</span></code>
device. The chardev should be a unix domain socket backed one.
The vhost-user uses a specifically defined protocol to pass
vhost ioctl replacement messages to an application on the other
end of the socket. The queues parameter is optional, which
specify the queue number of cryptodev backend for multiqueue
vhost-user, the default of queues is 1.</p>
<pre class="literal-block"># qemu-system-x86_64 \
  [...] \
      -chardev socket,id=chardev0,path=/path/to/socket \
      -object cryptodev-vhost-user,id=cryptodev0,chardev=chardev0 \
      -device virtio-crypto-pci,id=crypto0,cryptodev=cryptodev0 \
  [...]</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">secret,id=id,data=string,format=raw|base64[,keyid=secretid,iv=string]</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">secret,id=id,file=filename,format=raw|base64[,keyid=secretid,iv=string]</span></code></dt><dd><p>Defines a secret to store a password, encryption key, or some
other sensitive data. The sensitive data can either be passed
directly via the data parameter, or indirectly via the file
parameter. Using the data parameter is insecure unless the
sensitive data is encrypted.</p>
<p>The sensitive data can be provided in raw format (the default),
or base64. When encoded as JSON, the raw format only supports
valid UTF-8 characters, so base64 is recommended for sending
binary data. QEMU will convert from which ever format is
provided to the format it needs internally. eg, an RBD password
can be provided in raw format, even though it will be base64
encoded when passed onto the RBD sever.</p>
<p>For added protection, it is possible to encrypt the data
associated with a secret using the AES-256-CBC cipher. Use of
encryption is indicated by providing the keyid and iv
parameters. The keyid parameter provides the ID of a previously
defined secret that contains the AES-256 decryption key. This
key should be 32-bytes long and be base64 encoded. The iv
parameter provides the random initialization vector used for
encryption of this particular secret and should be a base64
encrypted string of the 16-byte IV.</p>
<p>The simplest (insecure) usage is to provide the secret inline</p>
<pre class="literal-block"># qemu-system-x86_64 -object secret,id=sec0,data=letmein,format=raw</pre>
<p>The simplest secure usage is to provide the secret via a file</p>
<p># printf “letmein” &gt; mypasswd.txt # QEMU_SYSTEM_MACRO -object
secret,id=sec0,file=mypasswd.txt,format=raw</p>
<p>For greater security, AES-256-CBC should be used. To illustrate
usage, consider the openssl command line tool which can encrypt
the data. Note that when encrypting, the plaintext must be
padded to the cipher block size (32 bytes) using the standard
PKCS#5/6 compatible padding algorithm.</p>
<p>First a master key needs to be created in base64 encoding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># openssl rand -base64 32 &gt; key.b64</span>
<span class="c1"># KEY=$(base64 -d key.b64 | hexdump  -v -e &#39;/1 &quot;%02X&quot;&#39;)</span>
</pre></div>
</div>
<p>Each secret to be encrypted needs to have a random
initialization vector generated. These do not need to be kept
secret</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># openssl rand -base64 16 &gt; iv.b64</span>
<span class="c1"># IV=$(base64 -d iv.b64 | hexdump  -v -e &#39;/1 &quot;%02X&quot;&#39;)</span>
</pre></div>
</div>
<p>The secret to be defined can now be encrypted, in this case
we’re telling openssl to base64 encode the result, but it could
be left as raw bytes if desired.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># SECRET=$(printf &quot;letmein&quot; |
           openssl enc -aes-256-cbc -a -K $KEY -iv $IV)
</pre></div>
</div>
<p>When launching QEMU, create a master secret pointing to
<code class="docutils literal notranslate"><span class="pre">key.b64</span></code> and specify that to be used to decrypt the user
password. Pass the contents of <code class="docutils literal notranslate"><span class="pre">iv.b64</span></code> to the second secret</p>
<pre class="literal-block"># qemu-system-x86_64 \
    -object secret,id=secmaster0,format=base64,file=key.b64 \
    -object secret,id=sec0,keyid=secmaster0,format=base64,\
        data=$SECRET,iv=$(&lt;iv.b64)</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">sev-guest,id=id,cbitpos=cbitpos,reduced-phys-bits=val,[sev-device=string,policy=policy,handle=handle,dh-cert-file=file,session-file=file,kernel-hashes=on|off]</span></code></dt><dd><p>Create a Secure Encrypted Virtualization (SEV) guest object,
which can be used to provide the guest memory encryption support
on AMD processors.</p>
<p>When memory encryption is enabled, one of the physical address
bit (aka the C-bit) is utilized to mark if a memory page is
protected. The <code class="docutils literal notranslate"><span class="pre">cbitpos</span></code> is used to provide the C-bit
position. The C-bit position is Host family dependent hence user
must provide this value. On EPYC, the value should be 47.</p>
<p>When memory encryption is enabled, we loose certain bits in
physical address space. The <code class="docutils literal notranslate"><span class="pre">reduced-phys-bits</span></code> is used to
provide the number of bits we loose in physical address space.
Similar to C-bit, the value is Host family dependent. On EPYC,
the value should be 5.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sev-device</span></code> provides the device file to use for
communicating with the SEV firmware running inside AMD Secure
Processor. The default device is ‘/dev/sev’. If hardware
supports memory encryption then /dev/sev devices are created by
CCP driver.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">policy</span></code> provides the guest policy to be enforced by the
SEV firmware and restrict what configuration and operational
commands can be performed on this guest by the hypervisor. The
policy should be provided by the guest owner and is bound to the
guest and cannot be changed throughout the lifetime of the
guest. The default is 0.</p>
<p>If guest <code class="docutils literal notranslate"><span class="pre">policy</span></code> allows sharing the key with another SEV
guest then <code class="docutils literal notranslate"><span class="pre">handle</span></code> can be use to provide handle of the guest
from which to share the key.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dh-cert-file</span></code> and <code class="docutils literal notranslate"><span class="pre">session-file</span></code> provides the guest
owner’s Public Diffie-Hillman key defined in SEV spec. The PDH
and session parameters are used for establishing a cryptographic
session with the guest owner to negotiate keys used for
attestation. The file must be encoded in base64.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">kernel-hashes</span></code> adds the hashes of given kernel/initrd/
cmdline to a designated guest firmware page for measured Linux
boot with -kernel. The default is off. (Since 6.2)</p>
<p>e.g to launch a SEV guest</p>
<pre class="literal-block"># qemu-system-x86_64 \
    ...... \
    -object sev-guest,id=sev0,cbitpos=47,reduced-phys-bits=5 \
    -machine ...,memory-encryption=sev0 \
    .....</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">authz-simple,id=id,identity=string</span></code></dt><dd><p>Create an authorization object that will control access to
network services.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">identity</span></code> parameter is identifies the user and its format
depends on the network service that authorization object is
associated with. For authorizing based on TLS x509 certificates,
the identity must be the x509 distinguished name. Note that care
must be taken to escape any commas in the distinguished name.</p>
<p>An example authorization object to validate a x509 distinguished
name would look like:</p>
<pre class="literal-block"># qemu-system-x86_64 \
    ... \
    -object 'authz-simple,id=auth0,identity=CN=laptop.example.com,,O=Example Org,,L=London,,ST=London,,C=GB' \
    ...</pre>
<p>Note the use of quotes due to the x509 distinguished name
containing whitespace, and escaping of ‘,’.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">authz-listfile,id=id,filename=path,refresh=on|off</span></code></dt><dd><p>Create an authorization object that will control access to
network services.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filename</span></code> parameter is the fully qualified path to a file
containing the access control list rules in JSON format.</p>
<p>An example set of rules that match against SASL usernames might
look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span> <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;fred&quot;</span><span class="p">,</span> <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span> <span class="p">},</span>
     <span class="p">{</span> <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span> <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span> <span class="p">},</span>
     <span class="p">{</span> <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;danb&quot;</span><span class="p">,</span> <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="s2">&quot;deny&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;glob&quot;</span> <span class="p">},</span>
     <span class="p">{</span> <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;dan*&quot;</span><span class="p">,</span> <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="s2">&quot;allow&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span> <span class="p">},</span>
  <span class="p">],</span>
  <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="s2">&quot;deny&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When checking access the object will iterate over all the rules
and the first rule to match will have its <code class="docutils literal notranslate"><span class="pre">policy</span></code> value
returned as the result. If no rules match, then the default
<code class="docutils literal notranslate"><span class="pre">policy</span></code> value is returned.</p>
<p>The rules can either be an exact string match, or they can use
the simple UNIX glob pattern matching to allow wildcards to be
used.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">refresh</span></code> is set to true the file will be monitored and
automatically reloaded whenever its content changes.</p>
<p>As with the <code class="docutils literal notranslate"><span class="pre">authz-simple</span></code> object, the format of the identity
strings being matched depends on the network service, but is
usually a TLS x509 distinguished name, or a SASL username.</p>
<p>An example authorization object to validate a SASL username
would look like:</p>
<pre class="literal-block"># qemu-system-x86_64 \
    ... \
    -object authz-simple,id=auth0,filename=/etc/qemu/vnc-sasl.acl,refresh=on \
    ...</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">authz-pam,id=id,service=string</span></code></dt><dd><p>Create an authorization object that will control access to
network services.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">service</span></code> parameter provides the name of a PAM service to
use for authorization. It requires that a file
<code class="docutils literal notranslate"><span class="pre">/etc/pam.d/service</span></code> exist to provide the configuration for
the <code class="docutils literal notranslate"><span class="pre">account</span></code> subsystem.</p>
<p>An example authorization object to validate a TLS x509
distinguished name would look like:</p>
<pre class="literal-block"># qemu-system-x86_64 \
    ... \
    -object authz-pam,id=auth0,service=qemu-vnc \
    ...</pre>
<p>There would then be a corresponding config file for PAM at
<code class="docutils literal notranslate"><span class="pre">/etc/pam.d/qemu-vnc</span></code> that contains:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">account</span> <span class="n">requisite</span>  <span class="n">pam_listfile</span><span class="o">.</span><span class="n">so</span> <span class="n">item</span><span class="o">=</span><span class="n">user</span> <span class="n">sense</span><span class="o">=</span><span class="n">allow</span> \
           <span class="n">file</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">qemu</span><span class="o">/</span><span class="n">vnc</span><span class="o">.</span><span class="n">allow</span>
</pre></div>
</div>
<p>Finally the <code class="docutils literal notranslate"><span class="pre">/etc/qemu/vnc.allow</span></code> file would contain the list
of x509 distinguished names that are permitted access</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CN</span><span class="o">=</span><span class="n">laptop</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">O</span><span class="o">=</span><span class="n">Example</span> <span class="n">Home</span><span class="p">,</span><span class="n">L</span><span class="o">=</span><span class="n">London</span><span class="p">,</span><span class="n">ST</span><span class="o">=</span><span class="n">London</span><span class="p">,</span><span class="n">C</span><span class="o">=</span><span class="n">GB</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-object</span> <span class="pre">iothread,id=id,poll-max-ns=poll-max-ns,poll-grow=poll-grow,poll-shrink=poll-shrink,aio-max-batch=aio-max-batch</span></code></dt><dd><p>Creates a dedicated event loop thread that devices can be
assigned to. This is known as an IOThread. By default device
emulation happens in vCPU threads or the main event loop thread.
This can become a scalability bottleneck. IOThreads allow device
emulation and I/O to run on other host CPUs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter is a unique ID that will be used to
reference this IOThread from <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">...,iothread=id</span></code>.
Multiple devices can be assigned to an IOThread. Note that not
all devices support an <code class="docutils literal notranslate"><span class="pre">iothread</span></code> parameter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">query-iothreads</span></code> QMP command lists IOThreads and reports
their thread IDs so that the user can configure host CPU
pinning/affinity.</p>
<p>IOThreads use an adaptive polling algorithm to reduce event loop
latency. Instead of entering a blocking system call to monitor
file descriptors and then pay the cost of being woken up when an
event occurs, the polling algorithm spins waiting for events for
a short time. The algorithm’s default parameters are suitable
for many cases but can be adjusted based on knowledge of the
workload and/or host device latency.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">poll-max-ns</span></code> parameter is the maximum number of
nanoseconds to busy wait for events. Polling can be disabled by
setting this value to 0.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">poll-grow</span></code> parameter is the multiplier used to increase
the polling time when the algorithm detects it is missing events
due to not polling long enough.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">poll-shrink</span></code> parameter is the divisor used to decrease
the polling time when the algorithm detects it is spending too
long polling without encountering events.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">aio-max-batch</span></code> parameter is the maximum number of requests
in a batch for the AIO engine, 0 means that the engine will use
its default.</p>
<p>The IOThread parameters can be modified at run-time using the
<code class="docutils literal notranslate"><span class="pre">qom-set</span></code> command (where <code class="docutils literal notranslate"><span class="pre">iothread1</span></code> is the IOThread’s
<code class="docutils literal notranslate"><span class="pre">id</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">qemu</span><span class="p">)</span> <span class="n">qom</span><span class="o">-</span><span class="nb">set</span> <span class="o">/</span><span class="n">objects</span><span class="o">/</span><span class="n">iothread1</span> <span class="n">poll</span><span class="o">-</span><span class="nb">max</span><span class="o">-</span><span class="n">ns</span> <span class="mi">100000</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="device-url-syntax">
<h2>Device URL Syntax<a class="headerlink" href="#device-url-syntax" title="Permalink to this heading"></a></h2>
<p>In addition to using normal file images for the emulated storage
devices, QEMU can also use networked resources such as iSCSI devices.
These are specified using a special URL syntax.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">iSCSI</span></code></dt><dd><p>iSCSI support allows QEMU to access iSCSI resources directly and use
as images for the guest storage. Both disk and cdrom images are
supported.</p>
<p>Syntax for specifying iSCSI LUNs is
“iscsi://&lt;target-ip&gt;[:&lt;port&gt;]/&lt;target-iqn&gt;/&lt;lun&gt;”</p>
<p>By default qemu will use the iSCSI initiator-name
‘iqn.2008-11.org.linux-kvm[:&lt;name&gt;]’ but this can also be set from
the command line or a configuration file.</p>
<p>Since version QEMU 2.4 it is possible to specify a iSCSI request
timeout to detect stalled requests and force a reestablishment of the
session. The timeout is specified in seconds. The default is 0 which
means no timeout. Libiscsi 1.15.0 or greater is required for this
feature.</p>
<p>Example (without authentication):</p>
<pre class="literal-block">qemu-system-x86_64 -iscsi initiator-name=iqn.2001-04.com.example:my-initiator \
                 -cdrom iscsi://192.0.2.1/iqn.2001-04.com.example/2 \
                 -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1</pre>
<p>Example (CHAP username/password via URL):</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=iscsi:<a class="reference external" href="mailto://user%password&#37;&#52;&#48;192&#46;0&#46;2&#46;1/iqn&#46;2001-04&#46;com&#46;example/1">//user%password<span>&#64;</span>192<span>&#46;</span>0<span>&#46;</span>2<span>&#46;</span>1/iqn<span>&#46;</span>2001-04<span>&#46;</span>com<span>&#46;</span>example/1</a></pre>
<p>Example (CHAP username/password via environment variables):</p>
<pre class="literal-block">LIBISCSI_CHAP_USERNAME=&quot;user&quot; \
LIBISCSI_CHAP_PASSWORD=&quot;password&quot; \
qemu-system-x86_64 -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">NBD</span></code></dt><dd><p>QEMU supports NBD (Network Block Devices) both using TCP protocol as
well as Unix Domain Sockets. With TCP, the default port is 10809.</p>
<p>Syntax for specifying a NBD device using TCP, in preferred URI form:
“nbd://&lt;server-ip&gt;[:&lt;port&gt;]/[&lt;export&gt;]”</p>
<p>Syntax for specifying a NBD device using Unix Domain Sockets;
remember that ‘?’ is a shell glob character and may need quoting:
“nbd+unix:///[&lt;export&gt;]?socket=&lt;domain-socket&gt;”</p>
<p>Older syntax that is also recognized:
“nbd:&lt;server-ip&gt;:&lt;port&gt;[:exportname=&lt;export&gt;]”</p>
<p>Syntax for specifying a NBD device using Unix Domain Sockets
“nbd:unix:&lt;domain-socket&gt;[:exportname=&lt;export&gt;]”</p>
<p>Example for TCP</p>
<pre class="literal-block">qemu-system-x86_64 --drive file=nbd:192.0.2.1:30000</pre>
<p>Example for Unix Domain Sockets</p>
<pre class="literal-block">qemu-system-x86_64 --drive file=nbd:unix:/tmp/nbd-socket</pre>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SSH</span></code></dt><dd><p>QEMU supports SSH (Secure Shell) access to remote disks.</p>
<p>Examples:</p>
<pre class="literal-block">qemu-system-x86_64 -drive file=ssh:<a class="reference external" href="mailto://user&#37;&#52;&#48;host/path/to/disk&#46;img">//user<span>&#64;</span>host/path/to/disk<span>&#46;</span>img</a>
qemu-system-x86_64 -drive file.driver=ssh,file.user=user,file.host=host,file.port=22,file.path=/path/to/disk.img</pre>
<p>Currently authentication must be done using ssh-agent. Other
authentication methods may be supported in future.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GlusterFS</span></code></dt><dd><p>GlusterFS is a user space distributed file system. QEMU supports the
use of GlusterFS volumes for hosting VM disk images using TCP, Unix
Domain Sockets and RDMA transport protocols.</p>
<p>Syntax for specifying a VM disk image on GlusterFS volume is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>URI:
gluster[+type]://[host[:port]]/volume/path[?socket=...][,debug=N][,logfile=...]

JSON:
&#39;json:{&quot;driver&quot;:&quot;qcow2&quot;,&quot;file&quot;:{&quot;driver&quot;:&quot;gluster&quot;,&quot;volume&quot;:&quot;testvol&quot;,&quot;path&quot;:&quot;a.img&quot;,&quot;debug&quot;:N,&quot;logfile&quot;:&quot;...&quot;,
                                 &quot;server&quot;:[{&quot;type&quot;:&quot;tcp&quot;,&quot;host&quot;:&quot;...&quot;,&quot;port&quot;:&quot;...&quot;},
                                           {&quot;type&quot;:&quot;unix&quot;,&quot;socket&quot;:&quot;...&quot;}]}}&#39;
</pre></div>
</div>
<p>Example</p>
<pre class="literal-block">URI:
qemu-system-x86_64 --drive file=gluster://192.0.2.1/testvol/a.img,
                               file.debug=9,file.logfile=/var/log/qemu-gluster.log

JSON:
qemu-system-x86_64 'json:{&quot;driver&quot;:&quot;qcow2&quot;,
                          &quot;file&quot;:{&quot;driver&quot;:&quot;gluster&quot;,
                                   &quot;volume&quot;:&quot;testvol&quot;,&quot;path&quot;:&quot;a.img&quot;,
                                   &quot;debug&quot;:9,&quot;logfile&quot;:&quot;/var/log/qemu-gluster.log&quot;,
                                   &quot;server&quot;:[{&quot;type&quot;:&quot;tcp&quot;,&quot;host&quot;:&quot;1.2.3.4&quot;,&quot;port&quot;:24007},
                                             {&quot;type&quot;:&quot;unix&quot;,&quot;socket&quot;:&quot;/var/run/glusterd.socket&quot;}]}}'
qemu-system-x86_64 -drive driver=qcow2,file.driver=gluster,file.volume=testvol,file.path=/path/a.img,
                                      file.debug=9,file.logfile=/var/log/qemu-gluster.log,
                                      file.server.0.type=tcp,file.server.0.host=1.2.3.4,file.server.0.port=24007,
                                      file.server.1.type=unix,file.server.1.socket=/var/run/glusterd.socket</pre>
<p>See also <a class="reference external" href="http://www.gluster.org">http://www.gluster.org</a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">HTTP/HTTPS/FTP/FTPS</span></code></dt><dd><p>QEMU supports read-only access to files accessed over http(s) and
ftp(s).</p>
<p>Syntax using a single filename:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">protocol</span><span class="o">&gt;</span><span class="p">:</span><span class="o">//</span><span class="p">[</span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">[:</span><span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="o">&lt;</span><span class="n">host</span><span class="o">&gt;/&lt;</span><span class="n">path</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">protocol</span></code></dt><dd><p>‘http’, ‘https’, ‘ftp’, or ‘ftps’.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>Optional username for authentication to the remote server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>Optional password for authentication to the remote server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Address of the remote server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code></dt><dd><p>Path on the remote server, including any query string.</p>
</dd>
</dl>
<p>The following options are also supported:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">url</span></code></dt><dd><p>The full URL when passing options to the driver explicitly.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readahead</span></code></dt><dd><p>The amount of data to read ahead with each range request to the
remote server. This value may optionally have the suffix ‘T’, ‘G’,
‘M’, ‘K’, ‘k’ or ‘b’. If it does not have a suffix, it will be
assumed to be in bytes. The value must be a multiple of 512 bytes.
It defaults to 256k.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sslverify</span></code></dt><dd><p>Whether to verify the remote server’s certificate when connecting
over SSL. It can have the value ‘on’ or ‘off’. It defaults to
‘on’.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cookie</span></code></dt><dd><p>Send this cookie (it can also be a list of cookies separated by
‘;’) with each outgoing request. Only supported when using
protocols such as HTTP which support cookies, otherwise ignored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timeout</span></code></dt><dd><p>Set the timeout in seconds of the CURL connection. This timeout is
the time that CURL waits for a response from the remote server to
get the size of the image to be downloaded. If not set, the
default timeout of 5 seconds is used.</p>
</dd>
</dl>
<p>Note that when passing options to qemu explicitly, <code class="docutils literal notranslate"><span class="pre">driver</span></code> is the
value of &lt;protocol&gt;.</p>
<p>Example: boot from a remote Fedora 20 live ISO image</p>
<pre class="literal-block">qemu-system-x86_64 --drive media=cdrom,file=https://archives.fedoraproject.org/pub/archive/fedora/linux/releases/20/Live/x86_64/Fedora-Live-Desktop-x86_64-20-1.iso,readonly

qemu-system-x86_64 --drive media=cdrom,file.driver=http,file.url=http://archives.fedoraproject.org/pub/fedora/linux/releases/20/Live/x86_64/Fedora-Live-Desktop-x86_64-20-1.iso,readonly</pre>
<p>Example: boot from a remote Fedora 20 cloud image using a local
overlay for writes, copy-on-read, and a readahead of 64k</p>
<pre class="literal-block">qemu-img create -f qcow2 -o backing_file='json:{&quot;file.driver&quot;:&quot;http&quot;,, &quot;file.url&quot;:&quot;<a class="reference external" href="http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/20/Images/x86_64/Fedora-x86_64-20-20131211.1-sda.qcow2">http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/20/Images/x86_64/Fedora-x86_64-20-20131211.1-sda.qcow2</a>&quot;,, &quot;file.readahead&quot;:&quot;64k&quot;}' /tmp/Fedora-x86_64-20-20131211.1-sda.qcow2

qemu-system-x86_64 -drive file=/tmp/Fedora-x86_64-20-20131211.1-sda.qcow2,copy-on-read=on</pre>
<p>Example: boot from an image stored on a VMware vSphere server with a
self-signed certificate using a local overlay for writes, a readahead
of 64k and a timeout of 10 seconds.</p>
<pre class="literal-block">qemu-img create -f qcow2 -o backing_file='json:{&quot;file.driver&quot;:&quot;https&quot;,, &quot;file.url&quot;:&quot;<a class="reference external" href="https://user:password&#64;vsphere.example.com/folder/test/test-flat.vmdk?dcPath=Datacenter&amp;dsName=datastore1">https://user:password&#64;vsphere.example.com/folder/test/test-flat.vmdk?dcPath=Datacenter&amp;dsName=datastore1</a>&quot;,, &quot;file.sslverify&quot;:&quot;off&quot;,, &quot;file.readahead&quot;:&quot;64k&quot;,, &quot;file.timeout&quot;:10}' /tmp/test.qcow2

qemu-system-x86_64 -drive file=/tmp/test.qcow2</pre>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="device-emulation.html" class="btn btn-neutral float-right" title="Device Emulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The QEMU Project Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<!-- Empty para to force a blank line after "Built with Sphinx ..." -->
<p></p>

<p>This documentation is for QEMU version 7.2.0.</p>


<p><a href="../about/license.html">QEMU and this manual are released under the
GNU General Public License, version 2.</a></p>

 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>